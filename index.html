<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üîÆ –¢–∞—Ä–æ –ú–∏–Ω–∏-–ê–ø–ø</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- config.js —É–¥–∞–ª–µ–Ω -->
    <script src="standalone.js"></script>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* –ü—Ä–æ—Å—Ç—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 1000;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }
        
        .nav-item {
            background: none;
            border: none;
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-size: 12px;
        }
        
        .nav-item:hover {
            background: rgba(255,255,255,0.1);
            transform: translateY(-2px);
        }
        
        .nav-item.active {
            background: rgba(255,255,255,0.2);
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        
        /* –ó–∞–ø—Ä–µ—Ç –ø–µ—Ä–µ–º–æ—Ç–∫–∏ –≤–∏–¥–µ–æ */
        video::-webkit-media-controls-timeline {
            display: none !important;
        }
        
        video::-webkit-media-controls-current-time-display {
            display: none !important;
        }
        
        video::-webkit-media-controls-time-remaining-display {
            display: none !important;
        }
        
        video::-webkit-media-controls-seek-back-button {
            display: none !important;
        }
        
        video::-webkit-media-controls-seek-forward-button {
            display: none !important;
        }
        
        video::-webkit-media-controls-rewind-button {
            display: none !important;
        }
        
        video::-webkit-media-controls-fast-forward-button {
            display: none !important;
        }
        
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∑–∞–ø—Ä–µ—Ç–∞ –ø–µ—Ä–µ–º–æ—Ç–∫–∏ */
        video::-webkit-media-controls-overlay-play-button {
            display: none !important;
        }
        
        video::-webkit-media-controls-play-button {
            display: block !important;
        }
        
        video::-webkit-media-controls-pause-button {
            display: block !important;
        }
        
        video::-webkit-media-controls-volume-slider {
            display: block !important;
        }
        
        video::-webkit-media-controls-mute-button {
            display: block !important;
        }
        
        video::-webkit-media-controls-fullscreen-button {
            display: block !important;
        }
        
        /* –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–º–æ—Ç–∫–∏ –Ω–∞ 10 —Å–µ–∫—É–Ω–¥ */
        video::-webkit-media-controls-seek-back-button,
        video::-webkit-media-controls-seek-forward-button {
            display: none !important;
        }
        
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∑–∞–ø—Ä–µ—Ç–∞ –ø–µ—Ä–µ–º–æ—Ç–∫–∏ */
        video::-webkit-media-controls { display: none !important; }
        video::-webkit-media-controls-panel { display: none !important; }
        video::-webkit-media-controls-play-button { display: none !important; }
        video::-webkit-media-controls-volume-slider { display: none !important; }
        video::-webkit-media-controls-mute-button { display: none !important; }
        video::-webkit-media-controls-fullscreen-button { display: none !important; }
        video::-webkit-media-controls-picture-in-picture-button { display: none !important; }
        video::-webkit-media-controls-enclosure { display: none !important; }
        
        /* –°–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        video::-webkit-media-controls-start-playback-button { display: none !important; }
        video::-webkit-media-controls-return-to-realtime-button { display: none !important; }
        video::-webkit-media-controls-toggle-closed-captions-button { display: none !important; }
        
        /* –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é */
        video { pointer-events: auto; }
        video::-webkit-media-controls { pointer-events: none !important; }
        
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –≤–∏–¥–µ–æ */
        #adVideo {
            max-width: 100% !important;
            max-height: 100% !important;
            object-fit: cover !important;
            overflow: hidden !important;
        }
        
        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤–∏–¥–µ–æ */
        .video-container {
            overflow: hidden !important;
            max-width: 100% !important;
        }
        
        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }
        
        .nav-text {
            font-weight: 500;
        }
        
        /* –û—Ç—Å—Ç—É–ø –¥–ª—è –Ω–∏–∂–Ω–µ–≥–æ –º–µ–Ω—é */
        body {
            padding-bottom: 80px;
            /* –û—Ç–∫–ª—é—á–∞–µ–º —Å–≤–∞–π–ø—ã –∏ –∂–µ—Å—Ç—ã */
            touch-action: pan-x pan-y;
            overscroll-behavior: none;
            -webkit-overflow-scrolling: touch;
        }
        
        /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å–≤–∞–π–ø—ã –≤–Ω–∏–∑ */
        html, body {
            overscroll-behavior-y: none;
            -webkit-overflow-scrolling: touch;
        }
        
        /* –û—Ç–∫–ª—é—á–∞–µ–º pull-to-refresh */
        body {
            overscroll-behavior: none;
        }
        
        .container {
            display: none;
        }
        
        .container.active {
            display: block;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≥–∞–¥–∞–Ω–∏–π */
        .spread-card {
            cursor: pointer !important;
            transition: all 0.3s ease !important;
            border: 2px solid transparent !important;
        }
        
        .spread-card:hover {
            transform: scale(1.05) !important;
            border-color: #667eea !important;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3) !important;
        }
        
        .spread-card:active {
            transform: scale(0.98) !important;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–π */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: #667eea;
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ */
        .setting-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }
        
        .setting-item:last-child {
            border-bottom: none;
        }
        
        .setting-info {
            display: flex;
            align-items: center;
            flex: 1;
        }
        
        .setting-icon {
            font-size: 24px;
            margin-right: 15px;
        }
        
        .setting-text {
            display: flex;
            flex-direction: column;
        }
        
        .setting-title {
            font-weight: 600;
            font-size: 16px;
            color: #333;
            margin-bottom: 2px;
        }
        
        .setting-description {
            font-size: 14px;
            color: #666;
        }
        
        /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ */
        [data-theme="dark"] {
            background-color: #1a1a1a;
            color: #ffffff;
        }
        
        [data-theme="dark"] .container {
            background-color: #1a1a1a;
            color: #ffffff;
        }
        
        [data-theme="dark"] .main {
            background-color: #1a1a1a;
            color: #ffffff;
        }
        
        [data-theme="dark"] .spread-card {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #ffffff;
            border: 2px solid #34495e;
        }
        
        [data-theme="dark"] .spread-card:hover {
            border-color: #667eea;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        [data-theme="dark"] .bottom-nav {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        }
        
        [data-theme="dark"] .cabinet-section {
            background-color: #1a1a1a;
            color: #ffffff;
        }
        
        [data-theme="dark"] .user-profile {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #ffffff;
        }
        
        [data-theme="dark"] .settings-section {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #ffffff;
        }
        
        [data-theme="dark"] .ad-section {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #ffffff;
        }
        
        [data-theme="dark"] .history-section {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #ffffff;
        }
        
        [data-theme="dark"] .setting-item {
            border-bottom-color: #34495e;
        }
        
        [data-theme="dark"] .setting-title {
            color: #ffffff;
        }
        
        [data-theme="dark"] .setting-description {
            color: #bdc3c7;
        }
        
        [data-theme="dark"] .shop-section {
            background-color: #1a1a1a;
            color: #ffffff;
        }
        
        [data-theme="dark"] .shop-item {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #ffffff;
        }
        
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã */
        [data-theme="dark"] body {
            background-color: #1a1a1a;
            color: #ffffff;
        }
        
        [data-theme="dark"] .main {
            background-color: #1a1a1a;
            color: #ffffff;
        }
        
        [data-theme="dark"] .shop {
            background-color: #1a1a1a;
            color: #ffffff;
        }
        
        [data-theme="dark"] .cabinet {
            background-color: #1a1a1a;
            color: #ffffff;
        }
        
        [data-theme="dark"] .spread-selection {
            background-color: #1a1a1a;
            color: #ffffff;
        }
        
        [data-theme="dark"] .spread-selection h2 {
            color: #ffffff;
        }
        
        [data-theme="dark"] .spread-selection p {
            color: #bdc3c7;
        }
        
        [data-theme="dark"] .spread-grid {
            background-color: #1a1a1a;
        }
        
        [data-theme="dark"] .spread-card h3 {
            color: #ffffff;
        }
        
        [data-theme="dark"] .spread-card p {
            color: #bdc3c7;
        }
        
        [data-theme="dark"] .spread-card .spread-cost {
            color: #f39c12;
        }
        
        [data-theme="dark"] .nav-item {
            color: #ffffff;
        }
        
        [data-theme="dark"] .nav-item.active {
            background: rgba(255,255,255,0.2);
        }
        
        [data-theme="dark"] .nav-item:hover {
            background: rgba(255,255,255,0.1);
        }
        
        [data-theme="dark"] .balance-amount {
            color: #f39c12;
        }
        
        [data-theme="dark"] .profile-name {
            color: #ffffff;
        }
        
        [data-theme="dark"] .profile-level {
            color: #bdc3c7;
        }
        
        [data-theme="dark"] .profile-balance {
            color: #f39c12;
        }
        
        [data-theme="dark"] .settings-section h3 {
            color: #ffffff;
        }
        
        [data-theme="dark"] .ad-section h3 {
            color: #ffffff;
        }
        
        [data-theme="dark"] .history-section h3 {
            color: #ffffff;
        }
        
        [data-theme="dark"] .shop-section h3 {
            color: #ffffff;
        }
        
        [data-theme="dark"] .shop-item h4 {
            color: #ffffff;
        }
        
        [data-theme="dark"] .shop-item p {
            color: #bdc3c7;
        }
        
        [data-theme="dark"] .shop-item .item-price {
            color: #f39c12;
        }
        
        [data-theme="dark"] .ad-button {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #ffffff;
        }
        
        [data-theme="dark"] .ad-button:hover {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
        }
        
        [data-theme="dark"] .history-button {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #ffffff;
        }
        
        [data-theme="dark"] .history-button:hover {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
        }
        
        [data-theme="dark"] .upload-button {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #ffffff;
        }
        
        [data-theme="dark"] .upload-button:hover {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
        }
        
        [data-theme="dark"] .watch-ad-button {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #ffffff;
        }
        
        [data-theme="dark"] .watch-ad-button:hover {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
        }
        
        [data-theme="dark"] .buy-button {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: #ffffff;
        }
        
        [data-theme="dark"] .buy-button:hover {
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
        }
        
        [data-theme="dark"] .toggle-slider {
            background-color: #555;
        }
        
        [data-theme="dark"] input:checked + .toggle-slider {
            background-color: #667eea;
        }
        
        [data-theme="dark"] .toggle-slider:before {
            background-color: #ffffff;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–µ–∫—Ü–∏–∏ —Ä–µ–∫–ª–∞–º—ã */
        .ad-section {
            margin-top: 20px;
        }
        
        .ad-section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .ad-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        .ad-button {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 18px 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.25);
            position: relative;
            overflow: hidden;
        }
        
        .ad-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .ad-button:hover::before {
            left: 100%;
        }
        
        .ad-button:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }
        
        .ad-button:active {
            transform: translateY(-1px) scale(0.98);
        }
        
        .ad-button.upload {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.25);
        }
        
        .ad-button.history {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            box-shadow: 0 6px 20px rgba(155, 89, 182, 0.25);
        }
        
        .ad-button.friends {
            background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
            box-shadow: 0 6px 20px rgba(46, 204, 113, 0.25);
        }
        
        .ad-button.upload:hover {
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
        }
        
        .ad-button.friends:hover {
            box-shadow: 0 8px 25px rgba(46, 204, 113, 0.4);
        }
        
        .ad-button.notifications {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.25);
        }
        
        .ad-button.notifications:hover {
            box-shadow: 0 8px 25px rgba(52, 152, 219, 0.4);
        }
        
        .ad-button.games-history {
            background: linear-gradient(135deg, #e67e22 0%, #d35400 100%);
            box-shadow: 0 6px 20px rgba(230, 126, 34, 0.25);
        }
        
        .ad-button.games-history:hover {
            box-shadow: 0 8px 25px rgba(230, 126, 34, 0.4);
        }
        
        .ad-icon {
            font-size: 24px;
            margin-right: 12px;
        }
        
        .ad-text {
            font-size: 16px;
            font-weight: 600;
            flex: 1;
        }
        
        .ad-reward {
            font-size: 13px;
            background: rgba(255, 255, 255, 0.25);
            padding: 6px 12px;
            border-radius: 15px;
            font-weight: 700;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–∞—Ä—Ç */
        .card-selection-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            padding: 20px;
            box-sizing: border-box;
        }
        
        .card-selection-content {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            border-radius: 25px;
            max-width: 95%;
            max-height: 90%;
            overflow-y: auto;
            box-shadow: 0 15px 40px rgba(0,0,0,0.5);
            font-family: Arial, sans-serif;
            text-align: center;
        }
        
        .card-selection-title {
            font-size: 24px;
            margin-bottom: 20px;
            color: #ecf0f1;
        }
        
        .card-selection-instruction {
            font-size: 16px;
            margin-bottom: 30px;
            color: #bdc3c7;
            line-height: 1.5;
        }
        
        .cards-grid {
            display: grid;
            gap: 15px;
            margin-bottom: 30px;
            max-width: 100%;
            margin-left: auto;
            margin-right: auto;
            justify-items: center;
            overflow: hidden;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ —Å–µ—Ç–∫–∏ */
        .cards-grid.grid-1x3 {
            grid-template-columns: repeat(3, 1fr);
            max-width: 90vw;
            gap: 10px;
        }
        
        .cards-grid.grid-3x3 {
            grid-template-columns: repeat(3, 1fr);
            max-width: 90vw;
            gap: 8px;
        }
        
        .cards-grid.grid-5x5 {
            grid-template-columns: repeat(5, 1fr);
            max-width: 95vw;
            gap: 6px;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –∫–∞—Ä—Ç */
        @media (max-width: 600px) {
            .cards-grid.grid-5x5 {
                gap: 4px;
                max-width: 90vw;
            }
        }
        
        @media (max-width: 480px) {
            .tarot-card {
                width: 80px;
                height: 120px;
                min-height: 80px;
            }
            
            .cards-grid.grid-5x5 {
                gap: 3px;
                max-width: 95vw;
            }
        }
        
        @media (max-width: 360px) {
            .tarot-card {
                width: 70px;
                height: 105px;
                min-height: 70px;
            }
            
            .cards-grid.grid-5x5 {
                gap: 2px;
                max-width: 98vw;
            }
        }
        
        /* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–µ–ª—å—Ç—Å–∫–æ–≥–æ –∫—Ä–µ—Å—Ç–∞ */
        .cards-grid.grid-5x5 .tarot-card {
            font-size: 10px;
            padding: 4px;
        }
        
        @media (max-width: 480px) {
            .cards-grid.grid-5x5 .tarot-card {
                font-size: 9px;
                padding: 3px;
            }
        }
        
        @media (max-width: 360px) {
            .cards-grid.grid-5x5 .tarot-card {
                font-size: 8px;
                padding: 2px;
            }
        }
        
        .tarot-card {
            width: 100px;
            height: 150px;
            background: linear-gradient(135deg, #8e44ad 0%, #9b59b6 100%);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            box-shadow: 0 6px 20px rgba(142, 68, 173, 0.3);
            border: 2px solid transparent;
        }
        
        .tarot-card:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 12px 35px rgba(142, 68, 173, 0.5);
            border-color: #f39c12;
        }
        
        .tarot-card.selected {
            transform: translateY(-5px) scale(1.05);
            border-color: #e74c3c;
            box-shadow: 0 12px 35px rgba(231, 76, 60, 0.5);
        }
        
        .tarot-card.flipped {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }
        
        .card-back {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: rgba(255, 255, 255, 0.8);
            position: absolute;
            top: 0;
            left: 0;
            background: linear-gradient(135deg, #8e44ad 0%, #9b59b6 100%);
            border-radius: 15px;
        }
        
        .card-front {
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 10px;
            text-align: center;
            position: absolute;
            top: 0;
            left: 0;
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            border-radius: 15px;
        }
        
        .tarot-card.flipped .card-back {
            display: none !important;
        }
        
        .tarot-card.flipped .card-front {
            display: flex !important;
        }
        
        .card-name {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #ecf0f1;
        }
        
        .card-meaning {
            font-size: 11px;
            color: #bdc3c7;
            line-height: 1.3;
        }
        
        .selection-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .selection-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .selection-btn.confirm {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
        }
        
        .selection-btn.confirm:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
        }
        
        .selection-btn.cancel {
            background: linear-gradient(135deg, #95a5a6 0%, #7f8c8d 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(149, 165, 166, 0.3);
        }
        
        .selection-btn.cancel:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(149, 165, 166, 0.4);
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ –≤–∏–¥–µ–æ */
        .ad-modal video {
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }
        
        .ad-modal video:hover {
            box-shadow: 0 12px 35px rgba(0,0,0,0.4);
        }
        
        .ad-modal video::-webkit-media-controls {
            background: rgba(0,0,0,0.7);
        }
        
        .ad-modal video::-webkit-media-controls-panel {
            background: rgba(0,0,0,0.7);
        }
        
        .ad-modal video::-webkit-media-controls-play-button {
            background: rgba(255,255,255,0.9);
            border-radius: 50%;
        }
        
        .ad-modal video::-webkit-media-controls-timeline {
            background: rgba(255,255,255,0.3);
        }
        
        .ad-modal video::-webkit-media-controls-current-time-display,
        .ad-modal video::-webkit-media-controls-time-remaining-display {
            color: white;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –∏–≥—Ä */
        .games-section {
            padding: 20px;
            text-align: center;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .games-section h2 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 28px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .games-section p {
            color: #666;
            margin-bottom: 30px;
            font-size: 16px;
            font-weight: 500;
        }
        
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .game-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 25px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
            border: 3px solid transparent;
        }
        
        .game-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        .game-card:hover::before {
            left: 100%;
        }
        
        .game-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 40px rgba(102, 126, 234, 0.5);
            border-color: rgba(255, 255, 255, 0.3);
        }
        
        .game-card:active {
            transform: translateY(-4px) scale(0.98);
        }
        
        .game-icon {
            font-size: 60px;
            margin-bottom: 20px;
            display: block;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
            animation: float 3s ease-in-out infinite;
        }
        
        .game-card h3 {
            color: white;
            margin-bottom: 15px;
            font-size: 24px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .game-card p {
            color: rgba(255, 255, 255, 0.95);
            margin-bottom: 20px;
            font-size: 16px;
            line-height: 1.5;
            font-weight: 500;
        }
        
        .game-cost {
            color: #ffd700;
            font-weight: 700;
            margin-bottom: 8px;
            font-size: 16px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }
        
        .game-reward {
            color: #90ee90;
            font-weight: 700;
            font-size: 16px;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–ª–∞–≤–∞–Ω–∏—è –¥–ª—è –∏–∫–æ–Ω–æ–∫ */
        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }
        
        /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è –∏–≥—Ä */
        [data-theme="dark"] .games-section {
            background: linear-gradient(135deg, #1a1a1a 0%, #2c3e50 100%);
        }
        
        [data-theme="dark"] .games-section h2 {
            color: #ffffff;
        }
        
        [data-theme="dark"] .games-section p {
            color: #bdc3c7;
        }
        
        [data-theme="dark"] .game-card {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            box-shadow: 0 10px 30px rgba(44, 62, 80, 0.4);
        }
        
        [data-theme="dark"] .game-card:hover {
            box-shadow: 0 15px 40px rgba(44, 62, 80, 0.6);
            border-color: rgba(255, 255, 255, 0.2);
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –∏–≥—Ä */
        @media (max-width: 768px) {
            .games-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .game-card {
                padding: 20px;
            }
            
            .game-icon {
                font-size: 40px;
            }
            
            .game-card h3 {
                font-size: 20px;
            }
        }
        
        @media (max-width: 480px) {
            .games-section {
                padding: 15px;
            }
            
            .games-section h2 {
                font-size: 24px;
            }
            
            .game-card {
                padding: 15px;
            }
            
            .game-icon {
                font-size: 36px;
            }
            
            .game-card h3 {
                font-size: 18px;
            }
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π */
        @keyframes slideInDown {
            from {
                transform: translateX(-50%) translateY(-100%);
                opacity: 0;
            }
            to {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
        }
        
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        @keyframes slideInUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        @keyframes spin {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã */
        .profile-level {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 8px;
            font-size: 14px;
        }
        
        .level-icon {
            font-size: 16px;
        }
        
        .level-text {
            font-weight: 600;
        }
        
        .xp-text {
            opacity: 0.8;
        }
        
        .achievements-section {
            margin-top: 20px;
        }
        
        .achievements-section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .achievement-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            animation: fadeIn 0.3s ease-out;
        }
        
        /* –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∫–∞–±–∏–Ω–µ—Ç–∞ */
        .profile-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            margin-top: 60px;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .profile-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: float 6s ease-in-out infinite;
        }
        
        .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            position: relative;
            z-index: 2;
        }
        
        .profile-avatar-section {
            position: relative;
            margin-right: 15px;
        }
        
        .profile-avatar {
            font-size: 40px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            width: 70px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.3);
        }
        
        .zodiac-sign {
            position: absolute;
            bottom: -5px;
            right: -5px;
            background: #ffc107;
            color: #333;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
            border: 2px solid white;
        }
        
        .profile-details {
            flex: 1;
        }
        
        .profile-details h3 {
            margin: 0 0 5px 0;
            font-size: 22px;
            font-weight: 700;
            color: white;
        }
        
        .user-id {
            margin: 0 0 8px 0;
            font-size: 14px;
            color: rgba(255,255,255,0.9);
            font-weight: 600;
        }
        
        .profile-meta {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        .user-gender, .user-age, .zodiac-name {
            background: rgba(255,255,255,0.2);
            padding: 6px 10px;
            border-radius: 12px;
            font-size: 13px;
            font-weight: 700;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
        }
        
        .edit-profile-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .edit-profile-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }
        
        .horoscope-subscription {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255,255,255,0.15);
            padding: 12px 15px;
            border-radius: 12px;
            margin-top: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .subscription-info {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .subscription-icon {
            font-size: 16px;
        }
        
        .subscription-text {
            font-size: 15px;
            font-weight: 700;
        }
        
        .subscription-toggle {
            position: relative;
            display: inline-block;
            width: 45px;
            height: 25px;
        }
        
        .subscription-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .subscription-toggle .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255,255,255,0.3);
            transition: .4s;
            border-radius: 25px;
        }
        
        .subscription-toggle .toggle-slider:before {
            position: absolute;
            content: "";
            height: 19px;
            width: 19px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        .subscription-toggle input:checked + .toggle-slider {
            background-color: #28a745;
        }
        
        .subscription-toggle input:checked + .toggle-slider:before {
            transform: translateX(20px);
        }
        
        .profile-stats {
            display: flex;
            justify-content: space-between;
            gap: 16px;
        }
        
        .stat {
            text-align: center;
            flex: 1;
        }
        
        .stat-value {
            display: block;
            font-size: 18px;
            font-weight: 700;
            color: white;
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 12px;
            color: rgba(255,255,255,0.8);
            font-weight: 600;
        }
        
        .cabinet-menu {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .menu-item {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            text-align: left;
        }
        
        .menu-item:hover {
            background: #f8f9fa;
            border-color: #667eea;
            transform: translateY(-1px);
        }
        
        .menu-icon {
            font-size: 20px;
            width: 24px;
            text-align: center;
        }
        
        .menu-text {
            flex: 1;
            font-size: 16px;
            font-weight: 600;
            color: #333;
        }
        
        .menu-reward {
            background: #28a745;
            color: white;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .menu-arrow {
            color: #999;
            font-size: 16px;
        }
        
        .menu-badge {
            background: #dc3545;
            color: white;
            padding: 4px 8px;
            border-radius: 10px;
            font-size: 12px;
            font-weight: 600;
            min-width: 20px;
            text-align: center;
        }
        
        .settings-section {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 20px;
            border: 1px solid #e0e0e0;
        }
        
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
        }
        
        .setting-item:not(:last-child) {
            border-bottom: 1px solid #f0f0f0;
            margin-bottom: 8px;
            padding-bottom: 16px;
        }
        
        .setting-label {
            font-size: 16px;
            color: #333;
            font-weight: 600;
        }
        
        .admin-section {
            background: #fff5f5;
            border: 1px solid #fed7d7;
            border-radius: 12px;
            padding: 16px;
        }
        
        .admin-button {
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 16px;
            cursor: pointer;
            transition: background 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            width: 100%;
            justify-content: center;
        }
        
        .admin-button:hover {
            background: #c82333;
        }
        
        .admin-icon {
            font-size: 16px;
        }
        
        .admin-text {
            font-size: 15px;
            font-weight: 600;
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .profile-stats {
                flex-direction: column;
                gap: 12px;
            }
            
            .stat {
                display: flex;
                justify-content: space-between;
                align-items: center;
                text-align: left;
            }
        }
    </style>
</head>
<body>
    <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≥–∞–¥–∞–Ω–∏–π -->
    <div class="container active" id="mainPage">

        <main class="main">
            <section class="spread-selection" id="spreadSelection">
                <h2>üé¥ –í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞—Å–∫–ª–∞–¥</h2>
                <div class="spreads-grid">
                    <div class="spread-card" data-spread="one_card" onclick="startReading('one_card')" style="cursor: pointer;">
                        <h3>–û–¥–Ω–∞ –∫–∞—Ä—Ç–∞</h3>
                        <p>–ü—Ä–æ—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å</p>
                        <span class="price">50 –º–æ–Ω–µ—Ç</span>
                    </div>
                    <div class="spread-card" data-spread="three_cards" onclick="startReading('three_cards')" style="cursor: pointer;">
                        <h3>–¢—Ä–∏ –∫–∞—Ä—Ç—ã</h3>
                        <p>–ü—Ä–æ—à–ª–æ–µ, –Ω–∞—Å—Ç–æ—è—â–µ–µ, –±—É–¥—É—â–µ–µ</p>
                        <span class="price">100 –º–æ–Ω–µ—Ç</span>
                    </div>
                    <div class="spread-card" data-spread="celtic_cross" onclick="startReading('celtic_cross')" style="cursor: pointer;">
                        <h3>–ö–µ–ª—å—Ç—Å–∫–∏–π –∫—Ä–µ—Å—Ç</h3>
                        <p>–ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Å–∏—Ç—É–∞—Ü–∏–∏</p>
                        <span class="price">200 –º–æ–Ω–µ—Ç</span>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–∞–≥–∞–∑–∏–Ω–∞ -->
    <div class="container" id="shopPage">

        <main class="main">
            <section class="shop-section">
                <div class="shop-categories">
                    <div class="category">
                        <div class="items-grid">
                            <div class="shop-item">
                                <div class="item-icon">üí∞</div>
                                <h4>100 –º–æ–Ω–µ—Ç</h4>
                                <p>–ë–∞–∑–æ–≤—ã–π –ø–∞–∫–µ—Ç</p>
                                <span class="price">$0.99</span>
                                <button class="btn-primary">–ö—É–ø–∏—Ç—å</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞–±–∏–Ω–µ—Ç–∞ -->
    <div class="container" id="cabinetPage">
        <main class="main">
            <section class="cabinet-section">
                <!-- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
                <div class="profile-card">
                    <div class="profile-header">
                        <div class="profile-avatar-section">
                            <div class="profile-avatar" id="profileAvatar">üîÆ</div>
                            <div class="zodiac-sign" id="zodiacSign">‚ôà</div>
                        </div>
                        <div class="profile-details">
                            <h3 id="userName">–ú–∞—Å—Ç–µ—Ä –¢–∞—Ä–æ</h3>
                            <p class="user-id">ID: 123456789</p>
                            <div class="profile-meta">
                                <span class="user-gender" id="userGender">üë§</span>
                                <span class="user-age" id="userAge">25 –ª–µ—Ç</span>
                                <span class="zodiac-name" id="zodiacName">–û–≤–µ–Ω</span>
                            </div>
                        </div>
                        <button class="edit-profile-btn" onclick="showEditProfile()">‚úèÔ∏è</button>
                    </div>
                    <div class="profile-stats">
                        <div class="stat">
                            <span class="stat-value" id="profileBalance">1000</span>
                            <span class="stat-label">–º–æ–Ω–µ—Ç</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value" id="userLevel">1</span>
                            <span class="stat-label">—É—Ä–æ–≤–µ–Ω—å</span>
                        </div>
                        <div class="stat">
                            <span class="stat-value" id="userXP">0/100</span>
                            <span class="stat-label">–æ–ø—ã—Ç</span>
                        </div>
                    </div>
                    <div class="horoscope-subscription" id="horoscopeSubscription">
                        <div class="subscription-info">
                            <span class="subscription-icon">üåü</span>
                            <span class="subscription-text">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø</span>
                        </div>
                        <label class="subscription-toggle">
                            <input type="checkbox" id="horoscopeEnabled" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                
                <!-- –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ -->
                <div class="cabinet-menu">
                    <button onclick="showAdReward()" class="menu-item">
                        <span class="menu-icon">üì∫</span>
                        <span class="menu-text">–°–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∫–ª–∞–º—É</span>
                        <span class="menu-reward">+25</span>
                    </button>
                    
                    <button onclick="showFriends()" class="menu-item">
                        <span class="menu-icon">üë•</span>
                        <span class="menu-text">–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–∑–µ–π</span>
                        <span class="menu-reward">+100</span>
                    </button>
                    
                    <button onclick="showAdCabinet()" class="menu-item">
                        <span class="menu-icon">üìä</span>
                        <span class="menu-text">–†–µ–∫–ª–∞–º–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</span>
                        <span class="menu-arrow">‚Üí</span>
                    </button>
                    
                    <button onclick="showNotificationCenter()" class="menu-item">
                        <span class="menu-icon">üîî</span>
                        <span class="menu-text">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                        <span class="menu-badge" id="notificationCount">0</span>
                    </button>
                    
                    <button onclick="showGamesHistory()" class="menu-item">
                        <span class="menu-icon">üéÆ</span>
                        <span class="menu-text">–ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä</span>
                        <span class="menu-arrow">‚Üí</span>
                    </button>
                    
                    <button onclick="showHistory()" class="menu-item">
                        <span class="menu-icon">üìã</span>
                        <span class="menu-text">–ò—Å—Ç–æ—Ä–∏—è –≥–∞–¥–∞–Ω–∏–π</span>
                        <span class="menu-arrow">‚Üí</span>
                    </button>
                    
                    <button onclick="showAchievements()" class="menu-item">
                        <span class="menu-icon">üèÜ</span>
                        <span class="menu-text">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</span>
                        <span class="menu-arrow">‚Üí</span>
                    </button>
                    
                    <button onclick="showLeaderboard()" class="menu-item">
                        <span class="menu-icon">üëë</span>
                        <span class="menu-text">–¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</span>
                        <span class="menu-arrow">‚Üí</span>
                    </button>
                </div>
                
                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
                <div class="settings-section">
                    <div class="setting-item">
                        <span class="setting-label">üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="notificationsEnabled" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <span class="setting-label">üåô –¢–µ–º–Ω–∞—è —Ç–µ–º–∞</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="darkThemeToggle">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                
                <!-- –ê–¥–º–∏–Ω —Ñ—É–Ω–∫—Ü–∏–∏ -->
                <div class="admin-section">
                    <button onclick="showAdUpload()" class="admin-button">
                        <span class="admin-icon">üì§</span>
                        <span class="admin-text">–î–æ–±–∞–≤–∏—Ç—å —Ä–µ–∫–ª–∞–º—É</span>
                    </button>
                </div>
            </section>
        </main>
    </div>

    <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–≥—Ä -->
    <div class="container" id="gamesPage">
        <main class="main">
            <section class="games-section">
                <h2>üîÆ –ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∏–≥—Ä—ã</h2>
                <p>–ò—Å–ø—ã—Ç–∞–π—Ç–µ —Å–≤–æ—é –∏–Ω—Ç—É–∏—Ü–∏—é –∏ –≤—ã–∏–≥—Ä–∞–π—Ç–µ –º–æ–Ω–µ—Ç—ã!</p>
                
                <div class="games-grid">
                    <!-- –ò–≥—Ä–∞: –ö—Ä–∏—Å—Ç–∞–ª—å–Ω—ã–π —à–∞—Ä -->
                    <div class="game-card" onclick="startCrystalBallGame()">
                        <div class="game-icon">üîÆ</div>
                        <h3>–ö—Ä–∏—Å—Ç–∞–ª—å–Ω—ã–π —à–∞—Ä</h3>
                        <p>–£–≥–∞–¥–∞–π—Ç–µ —Ü–≤–µ—Ç –∫—Ä–∏—Å—Ç–∞–ª–ª–∞ –≤ —à–∞—Ä–µ</p>
                        <div class="game-cost">–°—Ç–æ–∏–º–æ—Å—Ç—å: 15 –º–æ–Ω–µ—Ç</div>
                        <div class="game-reward">–í—ã–∏–≥—Ä—ã—à: 30 –º–æ–Ω–µ—Ç</div>
                    </div>
                    
                    <!-- –ò–≥—Ä–∞: –†—É–Ω—ã -->
                    <div class="game-card" onclick="startRunesGame()">
                        <div class="game-icon">·ö±</div>
                        <h3>–†—É–Ω—ã</h3>
                        <p>–í—ã—Ç–∞—â–∏—Ç–µ —Ä—É–Ω—É –∏ —É–≥–∞–¥–∞–π—Ç–µ –µ—ë –∑–Ω–∞—á–µ–Ω–∏–µ</p>
                        <div class="game-cost">–°—Ç–æ–∏–º–æ—Å—Ç—å: 20 –º–æ–Ω–µ—Ç</div>
                        <div class="game-reward">–í—ã–∏–≥—Ä—ã—à: 50 –º–æ–Ω–µ—Ç</div>
                    </div>
                    
                    <!-- –ò–≥—Ä–∞: –ú–∞–≥–∏—á–µ—Å–∫–∏–π –∫—É–± -->
                    <div class="game-card" onclick="startMagicCubeGame()">
                        <div class="game-icon">üé≤</div>
                        <h3>–ú–∞–≥–∏—á–µ—Å–∫–∏–π –∫—É–±</h3>
                        <p>–ü—Ä–µ–¥—Å–∫–∞–∂–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ –±—Ä–æ—Å–∫–∞</p>
                        <div class="game-cost">–°—Ç–æ–∏–º–æ—Å—Ç—å: 25 –º–æ–Ω–µ—Ç</div>
                        <div class="game-reward">–í—ã–∏–≥—Ä—ã—à: –¥–æ 100 –º–æ–Ω–µ—Ç</div>
                    </div>
                    
                    <!-- –ò–≥—Ä–∞: –ú–∞–≥–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç—ã -->
                    <div class="game-card" onclick="startMagicCardsGame()">
                        <div class="game-icon">üÉè</div>
                        <h3>–ú–∞–≥–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç—ã</h3>
                        <p>–£–≥–∞–¥–∞–π—Ç–µ –º–∞—Å—Ç—å –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã</p>
                        <div class="game-cost">–°—Ç–æ–∏–º–æ—Å—Ç—å: 30 –º–æ–Ω–µ—Ç</div>
                        <div class="game-reward">–í—ã–∏–≥—Ä—ã—à: –¥–æ 150 –º–æ–Ω–µ—Ç</div>
                    </div>
                    
                    <!-- –ò–≥—Ä–∞: –ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã -->
                    <div class="game-card" onclick="startWheelOfFortuneGame()">
                        <div class="game-icon">üé°</div>
                        <h3>–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã</h3>
                        <p>–ö—Ä—É—Ç–∏—Ç–µ –∫–æ–ª–µ—Å–æ –∏ –≤—ã–∏–≥—Ä—ã–≤–∞–π—Ç–µ –ø—Ä–∏–∑—ã</p>
                        <div class="game-cost">–°—Ç–æ–∏–º–æ—Å—Ç—å: 35 –º–æ–Ω–µ—Ç</div>
                        <div class="game-reward">–í—ã–∏–≥—Ä—ã—à: –¥–æ 200 –º–æ–Ω–µ—Ç</div>
                    </div>
                    
                    <!-- –ò–≥—Ä–∞: –ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ª–∞–±–∏—Ä–∏–Ω—Ç -->
                    <div class="game-card" onclick="startMysticLabyrinthGame()">
                        <div class="game-icon">üåÄ</div>
                        <h3>–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ª–∞–±–∏—Ä–∏–Ω—Ç</h3>
                        <p>–ù–∞–π–¥–∏—Ç–µ –≤—ã—Ö–æ–¥ –∏–∑ –º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ –ª–∞–±–∏—Ä–∏–Ω—Ç–∞</p>
                        <div class="game-cost">–°—Ç–æ–∏–º–æ—Å—Ç—å: 40 –º–æ–Ω–µ—Ç</div>
                        <div class="game-reward">–í—ã–∏–≥—Ä—ã—à: –¥–æ 250 –º–æ–Ω–µ—Ç</div>
                    </div>
                    
                    <!-- –ò–≥—Ä–∞: –ó–≤–µ–∑–¥–Ω–∞—è –∫–∞—Ä—Ç–∞ -->
                    <div class="game-card" onclick="startStarMapGame()">
                        <div class="game-icon">‚≠ê</div>
                        <h3>–ó–≤–µ–∑–¥–Ω–∞—è –∫–∞—Ä—Ç–∞</h3>
                        <p>–£–≥–∞–¥–∞–π—Ç–µ —Å–æ–∑–≤–µ–∑–¥–∏–µ –ø–æ –∑–≤–µ–∑–¥–∞–º</p>
                        <div class="game-cost">–°—Ç–æ–∏–º–æ—Å—Ç—å: 45 –º–æ–Ω–µ—Ç</div>
                        <div class="game-reward">–í—ã–∏–≥—Ä—ã—à: –¥–æ 300 –º–æ–Ω–µ—Ç</div>
                    </div>
                    
                    <!-- –ò–≥—Ä–∞: –ö—Ä–∏—Å—Ç–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å -->
                    <div class="game-card" onclick="startCrystalMemoryGame()">
                        <div class="game-icon">üíé</div>
                        <h3>–ö—Ä–∏—Å—Ç–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å</h3>
                        <p>–ó–∞–ø–æ–º–Ω–∏—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤</p>
                        <div class="game-cost">–°—Ç–æ–∏–º–æ—Å—Ç—å: 50 –º–æ–Ω–µ—Ç</div>
                        <div class="game-reward">–í—ã–∏–≥—Ä—ã—à: –¥–æ 400 –º–æ–Ω–µ—Ç</div>
                    </div>
                    
                    <!-- –ò–≥—Ä–∞: –†—É–Ω–∏—á–µ—Å–∫–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞ -->
                    <div class="game-card" onclick="startRunicQuizGame()">
                        <div class="game-icon">üìö</div>
                        <h3>–†—É–Ω–∏—á–µ—Å–∫–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞</h3>
                        <p>–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ —Ä—É–Ω–∞—Ö</p>
                        <div class="game-cost">–°—Ç–æ–∏–º–æ—Å—Ç—å: 55 –º–æ–Ω–µ—Ç</div>
                        <div class="game-reward">–í—ã–∏–≥—Ä—ã—à: –¥–æ 500 –º–æ–Ω–µ—Ç</div>
                    </div>
                    
                    <!-- –ò–≥—Ä–∞: –¢–∞—Ä–æ-–∫–≤–∏–∑ -->
                    <div class="game-card" onclick="startTarotQuizGame()">
                        <div class="game-icon">üé¥</div>
                        <h3>–¢–∞—Ä–æ-–∫–≤–∏–∑</h3>
                        <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–Ω–∞–Ω–∏—è –∫–∞—Ä—Ç –¢–∞—Ä–æ</p>
                        <div class="game-cost">–°—Ç–æ–∏–º–æ—Å—Ç—å: 60 –º–æ–Ω–µ—Ç</div>
                        <div class="game-reward">–í—ã–∏–≥—Ä—ã—à: –¥–æ 600 –º–æ–Ω–µ—Ç</div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
    <nav class="bottom-nav">
        <button class="nav-item" id="navShop" onclick="switchPage('shopPage', 'navShop')" style="cursor: pointer;">
            <span class="nav-icon">üõí</span>
            <span class="nav-text">–ú–∞–≥–∞–∑–∏–Ω</span>
        </button>
        <button class="nav-item active" id="navReadings" onclick="switchPage('mainPage', 'navReadings')" style="cursor: pointer;">
            <span class="nav-icon">üîÆ</span>
            <span class="nav-text">–ì–∞–¥–∞–Ω–∏—è</span>
        </button>
        <button class="nav-item" id="navGames" onclick="switchPage('gamesPage', 'navGames')" style="cursor: pointer;">
            <span class="nav-icon">üéÆ</span>
            <span class="nav-text">–ò–≥—Ä—ã</span>
        </button>
        <button class="nav-item" id="navCabinet" onclick="switchPage('cabinetPage', 'navCabinet')" style="cursor: pointer;">
            <span class="nav-icon">üë§</span>
            <span class="nav-text">–ö–∞–±–∏–Ω–µ—Ç</span>
        </button>
    </nav>

    <!-- –í–°–¢–†–û–ï–ù–ù–ê–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø (–ì–ê–†–ê–ù–¢–ò–†–û–í–ê–ù–ù–û –†–ê–ë–û–¢–ê–ï–¢) -->
    <script>
        console.log('üöÄ –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è...');
        
        // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≥–∞–¥–∞–Ω–∏—è (–¥–æ—Å—Ç—É–ø–Ω–∞ —Å—Ä–∞–∑—É)
        window.startReading = function(spreadType) {
            console.log('üîÆ –ì–ª–æ–±–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ –≥–∞–¥–∞–Ω–∏—è:', spreadType);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑–≤–∞–Ω–∞
            if (!spreadType) {
                console.error('‚ùå –¢–∏–ø —Ä–∞—Å–∫–ª–∞–¥–∞ –Ω–µ —É–∫–∞–∑–∞–Ω');
                alert('‚ùå –û—à–∏–±–∫–∞: —Ç–∏–ø —Ä–∞—Å–∫–ª–∞–¥–∞ –Ω–µ —É–∫–∞–∑–∞–Ω');
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç
            if (typeof window.tarotData === 'undefined') {
                console.error('‚ùå –î–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
                alert('‚ùå –î–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
                return;
            }
            
            // –ü–æ–ª—É—á–∞–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å –≥–∞–¥–∞–Ω–∏—è
            const cost = getReadingCost(spreadType);
            const currentBalance = getCurrentBalance();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–∞–ª–∞–Ω—Å
            if (currentBalance < cost) {
                showInsufficientBalance(cost, currentBalance);
                return;
            }
            
            // –ü–æ–ª—É—á–∞–µ–º –≤–æ–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const question = prompt(`‚ùì –ó–∞–¥–∞–π—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å:\n\nüí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} –º–æ–Ω–µ—Ç\nüí≥ –í–∞—à –±–∞–ª–∞–Ω—Å: ${currentBalance} –º–æ–Ω–µ—Ç`);
            if (!question || question.trim() === '') {
                alert('‚ùå –í–æ–ø—Ä–æ—Å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º!');
                return;
            }
            
            // –°–ø–∏—Å—ã–≤–∞–µ–º –º–æ–Ω–µ—Ç—ã
            deductCoins(cost);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±–æ—Ä –∫–∞—Ä—Ç
            showCardSelection(spreadType, question, cost);
        };
        
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–ª–∞–Ω—Å–æ–º
        window.getCurrentBalance = function() {
            // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å –∏–∑ localStorage
            const savedBalance = localStorage.getItem('userBalance');
            if (savedBalance) {
                return parseInt(savedBalance) || 0;
            }
            
            // –ï—Å–ª–∏ –Ω–µ—Ç –≤ localStorage, –∏—â–µ–º —ç–ª–µ–º–µ–Ω—Ç –±–∞–ª–∞–Ω—Å–∞
            const balanceElement = document.getElementById('balanceAmount') || document.getElementById('profileBalance');
            if (balanceElement) {
                return parseInt(balanceElement.textContent) || 0;
            }
            
            return 0;
        };
        
        window.getReadingCost = function(spreadType) {
            const costs = {
                'one_card': 50,
                'three_cards': 100,
                'celtic_cross': 200
            };
            return costs[spreadType] || 50;
        };
        
        window.deductCoins = function(amount) {
            const currentBalance = getCurrentBalance();
            const newBalance = Math.max(0, currentBalance - amount);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –±–∞–ª–∞–Ω—Å–∞
            document.querySelectorAll('.balance-amount').forEach(element => {
                element.textContent = newBalance;
            });
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
            const profileBalance = document.getElementById('profileBalance');
            if (profileBalance) {
                profileBalance.textContent = newBalance;
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            localStorage.setItem('userBalance', newBalance.toString());
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–ø–∏—Å–∞–Ω–∏–∏
            showNotification('üí∞ –°–ø–∏—Å–∞–Ω–∏–µ', `–°–ø–∏—Å–∞–Ω–æ ${amount} –º–æ–Ω–µ—Ç. –û—Å—Ç–∞—Ç–æ–∫: ${newBalance}`, 'info');
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ —Ü–µ–Ω—Ç—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
            addNotification('üí∞ –°–ø–∏—Å–∞–Ω–∏–µ', `–°–ø–∏—Å–∞–Ω–æ ${amount} –º–æ–Ω–µ—Ç. –û—Å—Ç–∞—Ç–æ–∫: ${newBalance}`, 'info', -amount);
            
            console.log(`üí∞ –°–ø–∏—Å–∞–Ω–æ ${amount} –º–æ–Ω–µ—Ç. –ù–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: ${newBalance}`);
        };
        
        // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü
        window.switchPage = function(pageId, buttonId) {
            console.log('üîÑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ:', pageId);
            
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            ['mainPage', 'shopPage', 'cabinetPage', 'gamesPage'].forEach(id => {
                const page = document.getElementById(id);
                if (page) page.style.display = 'none';
            });
            
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å
            document.querySelectorAll('.nav-item').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.style.display = 'block';
                console.log('‚úÖ –ü–æ–∫–∞–∑–∞–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞:', pageId);
            }
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
            const activeButton = document.getElementById(buttonId);
            if (activeButton) {
                activeButton.classList.add('active');
                console.log('‚úÖ –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ –∫–Ω–æ–ø–∫–∞:', buttonId);
            }
        };
        
        // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
        window.initNav = function() {
            console.log('üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏...');
            
            // –ö–Ω–æ–ø–∫–∞ –ú–∞–≥–∞–∑–∏–Ω
            const shopBtn = document.getElementById('navShop');
            if (shopBtn) {
                shopBtn.onclick = function(e) {
                    e.preventDefault();
                    console.log('üõí –ö–ª–∏–∫ –ú–∞–≥–∞–∑–∏–Ω');
                    switchPage('shopPage', 'navShop');
                };
                console.log('‚úÖ –ú–∞–≥–∞–∑–∏–Ω –≥–æ—Ç–æ–≤');
            }
            
            // –ö–Ω–æ–ø–∫–∞ –ì–∞–¥–∞–Ω–∏—è
            const readingsBtn = document.getElementById('navReadings');
            if (readingsBtn) {
                readingsBtn.onclick = function(e) {
                    e.preventDefault();
                    console.log('üîÆ –ö–ª–∏–∫ –ì–∞–¥–∞–Ω–∏—è');
                    switchPage('mainPage', 'navReadings');
                };
                console.log('‚úÖ –ì–∞–¥–∞–Ω–∏—è –≥–æ—Ç–æ–≤—ã');
            }
            
            // –ö–Ω–æ–ø–∫–∞ –ò–≥—Ä—ã
            const gamesBtn = document.getElementById('navGames');
            if (gamesBtn) {
                gamesBtn.onclick = function(e) {
                    e.preventDefault();
                    console.log('üéÆ –ö–ª–∏–∫ –ò–≥—Ä—ã');
                    switchPage('gamesPage', 'navGames');
                };
                console.log('‚úÖ –ò–≥—Ä—ã –≥–æ—Ç–æ–≤—ã');
            }
            
            // –ö–Ω–æ–ø–∫–∞ –ö–∞–±–∏–Ω–µ—Ç
            const cabinetBtn = document.getElementById('navCabinet');
            if (cabinetBtn) {
                cabinetBtn.onclick = function(e) {
                    e.preventDefault();
                    console.log('üë§ –ö–ª–∏–∫ –ö–∞–±–∏–Ω–µ—Ç');
                    switchPage('cabinetPage', 'navCabinet');
                };
                console.log('‚úÖ –ö–∞–±–∏–Ω–µ—Ç –≥–æ—Ç–æ–≤');
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
            switchPage('mainPage', 'navReadings');
            console.log('üéâ –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞!');
        };
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–æ–∫ –≥–∞–¥–∞–Ω–∏–π
        function initSpreadButtons() {
            console.log('üîÆ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–æ–∫ –≥–∞–¥–∞–Ω–∏–π...');
            
            const spreadCards = document.querySelectorAll('.spread-card');
            console.log('üé¥ –ù–∞–π–¥–µ–Ω–æ –∫–∞—Ä—Ç —Ä–∞—Å–∫–ª–∞–¥–æ–≤:', spreadCards.length);
            
            spreadCards.forEach((card, index) => {
                console.log(`üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã ${index + 1}:`, card);
                
                // –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
                card.onclick = null;
                card.onmouseover = null;
                card.onmouseout = null;
                
                // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
                card.onclick = function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const spreadType = this.getAttribute('data-spread');
                    console.log('üé¥ –í—ã–±—Ä–∞–Ω —Ä–∞—Å–∫–ª–∞–¥:', spreadType);
                    
                    // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –≥–∞–¥–∞–Ω–∏–µ
                    startReading(spreadType);
                };
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏
                card.style.cursor = 'pointer';
                card.style.transition = 'transform 0.2s ease';
                
                card.onmouseover = function() {
                    this.style.transform = 'scale(1.05)';
                };
                
                card.onmouseout = function() {
                    this.style.transform = 'scale(1)';
                };
                
                console.log(`‚úÖ –ö–∞—Ä—Ç–∞ ${index + 1} –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞`);
            });
            
            console.log('‚úÖ –ö–Ω–æ–ø–∫–∏ –≥–∞–¥–∞–Ω–∏–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã:', spreadCards.length);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≥–∞–¥–∞–Ω–∏—è
        function startReading(spreadType) {
            console.log('üîÆ –ó–∞–ø—É—Å–∫ –≥–∞–¥–∞–Ω–∏—è:', spreadType);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑–≤–∞–Ω–∞
            if (!spreadType) {
                console.error('‚ùå –¢–∏–ø —Ä–∞—Å–∫–ª–∞–¥–∞ –Ω–µ —É–∫–∞–∑–∞–Ω');
                alert('‚ùå –û—à–∏–±–∫–∞: —Ç–∏–ø —Ä–∞—Å–∫–ª–∞–¥–∞ –Ω–µ —É–∫–∞–∑–∞–Ω');
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç
            if (typeof window.tarotData === 'undefined') {
                console.error('‚ùå –î–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
                alert('‚ùå –î–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
                return;
            }
            
            // –ü–æ–ª—É—á–∞–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å –≥–∞–¥–∞–Ω–∏—è
            const cost = getReadingCost(spreadType);
            const currentBalance = getCurrentBalance();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–∞–ª–∞–Ω—Å
            if (currentBalance < cost) {
                showInsufficientBalance(cost, currentBalance);
                return;
            }
            
            // –ü–æ–ª—É—á–∞–µ–º –≤–æ–ø—Ä–æ—Å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const question = prompt(`‚ùì –ó–∞–¥–∞–π—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å:\n\nüí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} –º–æ–Ω–µ—Ç\nüí≥ –í–∞—à –±–∞–ª–∞–Ω—Å: ${currentBalance} –º–æ–Ω–µ—Ç`);
            if (!question || question.trim() === '') {
                alert('‚ùå –í–æ–ø—Ä–æ—Å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º!');
                return;
            }
            
            // –°–ø–∏—Å—ã–≤–∞–µ–º –º–æ–Ω–µ—Ç—ã
            deductCoins(cost);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–∞—á–∞–ª–µ –≥–∞–¥–∞–Ω–∏—è
            showNotification('üîÆ –ì–∞–¥–∞–Ω–∏–µ –Ω–∞—á–∞–ª–æ—Å—å', `–†–∞—Å–∫–ª–∞–¥: ${getSpreadInfo(spreadType).name}`, 'info');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±–æ—Ä –∫–∞—Ä—Ç
            showCardSelection(spreadType, question, cost);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –≤—ã–±–æ—Ä–∞ –∫–∞—Ä—Ç
        function showCardSelection(spreadType, question, cost) {
            const spreadInfo = getSpreadInfo(spreadType);
            const cardsNeeded = spreadInfo.cards;
            
            const modal = document.createElement('div');
            modal.className = 'card-selection-modal';
            modal.dataset.spreadType = spreadType; // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–∏–ø —Ä–∞—Å–∫–ª–∞–¥–∞
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                padding: 20px;
                box-sizing: border-box;
            `;
            
            const content = document.createElement('div');
            content.className = 'card-selection-content';
            content.style.cssText = `
                background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
                color: white;
                padding: 20px;
                border-radius: 25px;
                max-width: 98%;
                max-height: 95%;
                overflow-y: auto;
                box-shadow: 0 15px 40px rgba(0,0,0,0.5);
                font-family: Arial, sans-serif;
                text-align: center;
                box-sizing: border-box;
            `;
            
            content.innerHTML = `
                <div class="card-selection-title">üé¥ –í—ã–±–µ—Ä–∏—Ç–µ ${cardsNeeded} –∫–∞—Ä—Ç${cardsNeeded > 1 ? '—ã' : '—É'}</div>
                <div class="card-selection-instruction">
                    –í—ã–±–µ—Ä–∏—Ç–µ ${cardsNeeded} –∫–∞—Ä—Ç${cardsNeeded > 1 ? '—ã' : '—É'} –¥–ª—è –≥–∞–¥–∞–Ω–∏—è "${spreadInfo.name}".<br>
                    –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∫–∞—Ä—Ç—É, —á—Ç–æ–±—ã –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—å –µ—ë –∏ —É–≤–∏–¥–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ.
                </div>
                <div class="cards-grid" id="cardsGrid"></div>
                <div class="selection-buttons">
                    <button class="selection-btn confirm" onclick="confirmCardSelection('${spreadType}', '${question}', ${cost})">
                        ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–±–æ—Ä
                    </button>
                    <button class="selection-btn cancel" onclick="cancelCardSelection(${cost})">
                        ‚ùå –û—Ç–º–µ–Ω–∞
                    </button>
                </div>
            `;
            
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            // –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç—ã
            createTarotCards(cardsNeeded);
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            modal.onclick = function(e) {
                if (e.target === modal) {
                    cancelCardSelection(cost);
                }
            };
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–∞—Å–∫–ª–∞–¥–µ
        function getSpreadInfo(spreadType) {
            const spreads = {
                'one_card': { name: '–û–¥–Ω–∞ –∫–∞—Ä—Ç–∞', cards: 1 },
                'three_cards': { name: '–¢—Ä–∏ –∫–∞—Ä—Ç—ã', cards: 3 },
                'celtic_cross': { name: '–ö–µ–ª—å—Ç—Å–∫–∏–π –∫—Ä–µ—Å—Ç', cards: 10 }
            };
            const result = spreads[spreadType] || { name: '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥', cards: 1 };
            console.log(`üìä –†–∞—Å–∫–ª–∞–¥: ${result.name}, –∫–∞—Ä—Ç –Ω—É–∂–Ω–æ: ${result.cards}`);
            return result;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç –¢–∞—Ä–æ
        function createTarotCards(cardsNeeded) {
            const cardsGrid = document.getElementById('cardsGrid');
            cardsGrid.innerHTML = '';
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ä—Ç –∏ —Ä—è–¥–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –≥–∞–¥–∞–Ω–∏—è
            let totalCards, cardsPerRow, rows;
            if (cardsNeeded === 1) {
                totalCards = 3;
                cardsPerRow = 3;
                rows = 1;
            } else if (cardsNeeded === 3) {
                totalCards = 9;
                cardsPerRow = 3;
                rows = 3;
            } else if (cardsNeeded === 10) {
                totalCards = 25;
                cardsPerRow = 5;
                rows = 5;
            } else {
                totalCards = 9;
                cardsPerRow = 3;
                rows = 3;
            }
            
            // –ü–æ–ª—É—á–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ –∫–∞—Ä—Ç—ã –∏–∑ –∫–æ–ª–æ–¥—ã
            const availableCards = [...window.tarotData.tarotCards];
            const selectedCards = [];
            
            // –í—ã–±–∏—Ä–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ –∫–∞—Ä—Ç—ã
            for (let i = 0; i < Math.min(totalCards, availableCards.length); i++) {
                const randomIndex = Math.floor(Math.random() * availableCards.length);
                selectedCards.push(availableCards.splice(randomIndex, 1)[0]);
            }
            
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Å—Ç–∏–ª–∏ —Å–µ—Ç–∫–∏ –∏ –¥–æ–±–∞–≤–ª—è–µ–º CSS –∫–ª–∞—Å—Å
            cardsGrid.className = 'cards-grid';
            if (cardsNeeded === 1) {
                cardsGrid.classList.add('grid-1x3');
            } else if (cardsNeeded === 3) {
                cardsGrid.classList.add('grid-3x3');
            } else if (cardsNeeded === 10) {
                cardsGrid.classList.add('grid-5x5');
            }
            
            // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–æ–≤ –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏
            const screenWidth = window.innerWidth;
            let cardSize, gapSize, maxWidth;
            
            if (cardsNeeded === 10) {
                // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–µ–ª—å—Ç—Å–∫–æ–≥–æ –∫—Ä–µ—Å—Ç–∞ (5x5)
                if (screenWidth <= 360) {
                    cardSize = 60;
                    gapSize = 2;
                    maxWidth = '98vw';
                } else if (screenWidth <= 480) {
                    cardSize = 70;
                    gapSize = 3;
                    maxWidth = '95vw';
                } else if (screenWidth <= 600) {
                    cardSize = 80;
                    gapSize = 4;
                    maxWidth = '90vw';
                } else {
                    cardSize = 90;
                    gapSize = 5;
                    maxWidth = '85vw';
                }
            } else {
                // –û–±—ã—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ä–∞—Å–∫–ª–∞–¥–æ–≤
                if (screenWidth <= 360) {
                    cardSize = 70;
                    gapSize = 6;
                    maxWidth = '95vw';
                } else if (screenWidth <= 480) {
                    cardSize = 80;
                    gapSize = 8;
                    maxWidth = '90vw';
                } else {
                    cardSize = 100;
                    gapSize = 10;
                    maxWidth = '90vw';
                }
            }
            
            cardsGrid.style.cssText = `
                display: grid;
                grid-template-columns: repeat(${cardsPerRow}, 1fr);
                gap: ${gapSize}px;
                margin: 20px 0;
                max-width: ${maxWidth};
                margin-left: auto;
                margin-right: auto;
                width: 100%;
                box-sizing: border-box;
            `;
            
            // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –∫–∞—Ä—Ç
            selectedCards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'tarot-card';
                cardElement.dataset.cardIndex = index;
                cardElement.dataset.cardName = card.name;
                cardElement.dataset.cardMeaning = card.meaning;
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞–∑–º–µ—Ä—ã —à—Ä–∏—Ñ—Ç–∞ –∏ padding –¥–ª—è –∫–µ–ª—å—Ç—Å–∫–æ–≥–æ –∫—Ä–µ—Å—Ç–∞
                let fontSize, padding;
                if (cardsNeeded === 10) {
                    // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–µ–ª—å—Ç—Å–∫–æ–≥–æ –∫—Ä–µ—Å—Ç–∞
                    if (cardSize <= 60) {
                        fontSize = '8px';
                        padding = '2px';
                    } else if (cardSize <= 70) {
                        fontSize = '9px';
                        padding = '3px';
                    } else {
                        fontSize = '10px';
                        padding = '4px';
                    }
                } else {
                    // –û–±—ã—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    fontSize = cardSize > 80 ? '12px' : '10px';
                    padding = cardSize > 80 ? '8px' : '6px';
                }
                
                cardElement.style.cssText = `
                    width: ${cardSize}px;
                    height: ${Math.round(cardSize * 1.5)}px;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    border-radius: 12px;
                    cursor: pointer;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    font-size: ${fontSize};
                    text-align: center;
                    padding: ${padding};
                    transition: all 0.3s ease;
                    border: 3px solid transparent;
                    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                    position: relative;
                    overflow: hidden;
                    box-sizing: border-box;
                `;
                
                cardElement.innerHTML = `
                    <div class="card-back" style="
                        width: 100%;
                        height: 100%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        flex-direction: column;
                        transform: rotate(180deg);
                    ">
                        <img src="https://fedormala3of.github.io/AstroVopros.github.io/img/–†—É–±–∞—à–∫–∞.png" 
                             alt="–†—É–±–∞—à–∫–∞ –∫–∞—Ä—Ç—ã" 
                             style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px;"
                             onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div style="display: none; width: 100%; height: 100%; align-items: center; justify-content: center; font-size: 48px; color: rgba(255,255,255,0.8);">üÉè</div>
                    </div>
                    <div class="card-front" style="
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        display: none;
                        align-items: center;
                        justify-content: center;
                        flex-direction: column;
                        background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
                        border-radius: 12px;
                        padding: 8px;
                        text-align: center;
                    ">
                        <img src="https://fedormala3of.github.io/AstroVopros.github.io/img/${card.name.toLowerCase().replace(/\s+/g, '_')}.png" 
                             alt="${card.name}" 
                             style="width: 100%; height: 100%; object-fit: cover; border-radius: 12px;"
                             onerror="this.style.display='none';">
                        <div class="card-info" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.8); color: white; padding: 8px; border-radius: 0 0 12px 12px;">
                            <div class="card-name" style="font-size: 12px; font-weight: bold; margin-bottom: 4px;">${card.name}</div>
                            <div class="card-meaning" style="font-size: 10px; line-height: 1.2;">${card.meaning}</div>
                        </div>
                    </div>
                `;
                
                cardElement.onclick = function() {
                    toggleCardSelection(this);
                };
                
                cardsGrid.appendChild(cardElement);
            });
            
            console.log(`üé¥ –°–æ–∑–¥–∞–Ω–æ ${selectedCards.length} –∫–∞—Ä—Ç –¥–ª—è –≤—ã–±–æ—Ä–∞ (${rows} —Ä—è–¥–æ–≤ –ø–æ ${cardsPerRow} –∫–∞—Ä—Ç)`);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–∫–Ω–∞ –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏
            window.addEventListener('resize', function() {
                const newScreenWidth = window.innerWidth;
                let newCardSize, newGapSize, newMaxWidth;
                
                if (cardsNeeded === 10) {
                    // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–µ–ª—å—Ç—Å–∫–æ–≥–æ –∫—Ä–µ—Å—Ç–∞ (5x5)
                    if (newScreenWidth <= 360) {
                        newCardSize = 60;
                        newGapSize = 2;
                        newMaxWidth = '98vw';
                    } else if (newScreenWidth <= 480) {
                        newCardSize = 70;
                        newGapSize = 3;
                        newMaxWidth = '95vw';
                    } else if (newScreenWidth <= 600) {
                        newCardSize = 80;
                        newGapSize = 4;
                        newMaxWidth = '90vw';
                    } else {
                        newCardSize = 90;
                        newGapSize = 5;
                        newMaxWidth = '85vw';
                    }
                } else {
                    // –û–±—ã—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Ä–∞—Å–∫–ª–∞–¥–æ–≤
                    if (newScreenWidth <= 360) {
                        newCardSize = 70;
                        newGapSize = 6;
                        newMaxWidth = '95vw';
                    } else if (newScreenWidth <= 480) {
                        newCardSize = 80;
                        newGapSize = 8;
                        newMaxWidth = '90vw';
                    } else {
                        newCardSize = 100;
                        newGapSize = 10;
                        newMaxWidth = '90vw';
                    }
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ —Å–µ—Ç–∫–∏
                cardsGrid.style.cssText = `
                    display: grid;
                    grid-template-columns: repeat(${cardsPerRow}, 1fr);
                    gap: ${newGapSize}px;
                    margin: 20px 0;
                    max-width: ${newMaxWidth};
                    margin-left: auto;
                    margin-right: auto;
                    width: 100%;
                    box-sizing: border-box;
                `;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–∑–º–µ—Ä—ã –∫–∞—Ä—Ç
                document.querySelectorAll('.tarot-card').forEach(card => {
                    let newFontSize, newPadding;
                    if (cardsNeeded === 10) {
                        // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–µ–ª—å—Ç—Å–∫–æ–≥–æ –∫—Ä–µ—Å—Ç–∞
                        if (newCardSize <= 60) {
                            newFontSize = '8px';
                            newPadding = '2px';
                        } else if (newCardSize <= 70) {
                            newFontSize = '9px';
                            newPadding = '3px';
                        } else {
                            newFontSize = '10px';
                            newPadding = '4px';
                        }
                    } else {
                        // –û–±—ã—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                        newFontSize = newCardSize > 80 ? '12px' : '10px';
                        newPadding = newCardSize > 80 ? '8px' : '6px';
                    }
                    
                    card.style.width = `${newCardSize}px`;
                    card.style.height = `${Math.round(newCardSize * 1.5)}px`;
                    card.style.fontSize = newFontSize;
                    card.style.padding = newPadding;
                });
            });
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫–∞—Ä—Ç—ã (–±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
        function toggleCardSelection(cardElement) {
            // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–∞—Å–∫–ª–∞–¥–µ –∏–∑ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            const modal = document.querySelector('.card-selection-modal');
            if (!modal) return;
            
            const spreadType = modal.dataset.spreadType;
            const cardsNeeded = getSpreadInfo(spreadType).cards;
            const currentlySelected = document.querySelectorAll('.tarot-card.selected').length;
            
            // –ï—Å–ª–∏ –∫–∞—Ä—Ç–∞ —É–∂–µ –≤—ã–±—Ä–∞–Ω–∞, –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ–º
            if (cardElement.classList.contains('selected')) {
                console.log('üîÑ –ö–∞—Ä—Ç–∞ —É–∂–µ –≤—ã–±—Ä–∞–Ω–∞, –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ:', cardElement.dataset.cardName);
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –º–æ–∂–µ–º –ª–∏ –º—ã –≤—ã–±—Ä–∞—Ç—å –µ—â–µ –æ–¥–Ω—É –∫–∞—Ä—Ç—É
            if (currentlySelected < cardsNeeded) {
                // –î–æ–±–∞–≤–ª—è–µ–º –≤—ã–±–æ—Ä
                cardElement.classList.add('selected');
                cardElement.classList.add('flipped');
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ª–∏—Ü–µ–≤—É—é —Å—Ç–æ—Ä–æ–Ω—É –∫–∞—Ä—Ç—ã
                const cardBack = cardElement.querySelector('.card-back');
                const cardFront = cardElement.querySelector('.card-front');
                
                if (cardBack && cardFront) {
                    cardBack.style.display = 'none';
                    cardFront.style.display = 'flex';
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–∞—Ä—Ç—ã
                cardElement.style.border = '3px solid #e74c3c';
                cardElement.style.transform = 'scale(0.95)';
                cardElement.style.boxShadow = '0 6px 20px rgba(231, 76, 60, 0.4)';
                
                console.log('‚úÖ –ö–∞—Ä—Ç–∞ –≤—ã–±—Ä–∞–Ω–∞:', cardElement.dataset.cardName);
            } else {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                alert(`‚ùå –í—ã —É–∂–µ –≤—ã–±—Ä–∞–ª–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ä—Ç (${cardsNeeded}).`);
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤—ã–±–æ—Ä–∞ –∫–∞—Ä—Ç
        function confirmCardSelection(spreadType, question, cost) {
            const selectedCards = document.querySelectorAll('.tarot-card.selected');
            const cardsNeeded = getSpreadInfo(spreadType).cards;
            
            if (selectedCards.length !== cardsNeeded) {
                alert(`‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–≤–Ω–æ ${cardsNeeded} –∫–∞—Ä—Ç${cardsNeeded > 1 ? '—ã' : '—É'}!`);
                return;
            }
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –∫–∞—Ä—Ç
            const modal = document.querySelector('.card-selection-modal');
            if (modal) {
                modal.remove();
            }
            
            // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç
            const selectedCardsData = Array.from(selectedCards).map(card => ({
                name: card.dataset.cardName,
                meaning: card.dataset.cardMeaning
            }));
            
            // –í—ã–ø–æ–ª–Ω—è–µ–º –≥–∞–¥–∞–Ω–∏–µ —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏
            try {
                const result = performReadingWithSelectedCards(spreadType, question, selectedCardsData);
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
                saveToHistory(spreadType, question, selectedCardsData, result);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                showReadingResult(result, cost);
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–∞–¥–∞–Ω–∏–∏:', error);
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –º–æ–Ω–µ—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–µ
                addCoins(cost);
                alert('‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –≥–∞–¥–∞–Ω–∏–∏. –ú–æ–Ω–µ—Ç—ã –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–º–µ–Ω—ã –≤—ã–±–æ—Ä–∞ –∫–∞—Ä—Ç
        function cancelCardSelection(cost) {
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            const modal = document.querySelector('.card-selection-modal');
            if (modal) {
                modal.remove();
            }
            
            // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –º–æ–Ω–µ—Ç—ã
            addCoins(cost);
            console.log('üí∞ –ì–∞–¥–∞–Ω–∏–µ –æ—Ç–º–µ–Ω–µ–Ω–æ, –º–æ–Ω–µ—Ç—ã –≤–æ–∑–≤—Ä–∞—â–µ–Ω—ã');
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≥–∞–¥–∞–Ω–∏—è —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏
        function performReadingWithSelectedCards(spreadType, question, selectedCards) {
            const spreadInfo = getSpreadInfo(spreadType);
            
            let interpretation = `üîÆ –ì–∞–¥–∞–Ω–∏–µ: ${spreadInfo.name}\n\n`;
            interpretation += `‚ùì –í–æ–ø—Ä–æ—Å: ${question}\n\n`;
            interpretation += `üé¥ –í—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã:\n`;
            
            // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è —Ä–∞—Å–∫–ª–∞–¥–æ–≤
            const positions = getSpreadPositions(spreadType);
            
            selectedCards.forEach((card, index) => {
                if (positions && positions[index]) {
                    interpretation += `${index + 1}. ${positions[index]}: ${card.name} - ${card.meaning}\n`;
                } else {
                    interpretation += `${index + 1}. ${card.name} - ${card.meaning}\n`;
                }
            });
            
            interpretation += `\nüí≠ –û–±—â–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:\n`;
            interpretation += `–ö–∞—Ä—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ –≤ –≤–∞—à–µ–π —Å–∏—Ç—É–∞—Ü–∏–∏ ${getGeneralInterpretation(selectedCards)}`;
            
            return interpretation;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π —Ä–∞—Å–∫–ª–∞–¥–∞
        function getSpreadPositions(spreadType) {
            const positions = {
                'one_card': ['–û—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å'],
                'three_cards': ['–ü—Ä–æ—à–ª–æ–µ', '–ù–∞—Å—Ç–æ—è—â–µ–µ', '–ë—É–¥—É—â–µ–µ'],
                'celtic_cross': [
                    '–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è', '–ü—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ', '–î–∞–ª–µ–∫–æ–µ –ø—Ä–æ—à–ª–æ–µ', '–ù–µ–¥–∞–≤–Ω–µ–µ –ø—Ä–æ—à–ª–æ–µ',
                    '–í–æ–∑–º–æ–∂–Ω–æ–µ –±—É–¥—É—â–µ–µ', '–ë–ª–∏–∂–∞–π—à–µ–µ –±—É–¥—É—â–µ–µ', '–í–∞—à –ø–æ–¥—Ö–æ–¥', '–í–Ω–µ—à–Ω–∏–µ –≤–ª–∏—è–Ω–∏—è',
                    '–ù–∞–¥–µ–∂–¥—ã –∏ —Å—Ç—Ä–∞—Ö–∏', '–ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç'
                ]
            };
            
            return positions[spreadType] || null;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—â–µ–π –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏
        function getGeneralInterpretation(cards) {
            const meanings = cards.map(card => card.meaning.toLowerCase());
            const positiveWords = ['–ª—é–±–æ–≤—å', '—É—Å–ø–µ—Ö', '—Ä–∞–¥–æ—Å—Ç—å', '–Ω–∞–¥–µ–∂–¥–∞', '–≥–∞—Ä–º–æ–Ω–∏—è', '–±–æ–≥–∞—Ç—Å—Ç–≤–æ'];
            const negativeWords = ['–±–æ–ª—å', '–∫–æ–Ω—Ñ–ª–∏–∫—Ç', '–ø–æ—Ç–µ—Ä—è', '—Å—Ç—Ä–∞—Ö', '—Å—Ç—Ä–∞–¥–∞–Ω–∏–µ', '–±–µ–¥–Ω–æ—Å—Ç—å'];
            
            let positiveCount = 0;
            let negativeCount = 0;
            
            meanings.forEach(meaning => {
                positiveWords.forEach(word => {
                    if (meaning.includes(word)) positiveCount++;
                });
                negativeWords.forEach(word => {
                    if (meaning.includes(word)) negativeCount++;
                });
            });
            
            if (positiveCount > negativeCount) {
                return '–ø—Ä–µ–æ–±–ª–∞–¥–∞—é—Ç –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–µ —ç–Ω–µ—Ä–≥–∏–∏. –≠—Ç–æ —Ö–æ—Ä–æ—à–∏–π –∑–Ω–∞–∫ –¥–ª—è –≤–∞—à–µ–≥–æ –±—É–¥—É—â–µ–≥–æ.';
            } else if (negativeCount > positiveCount) {
                return '–µ—Å—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, –Ω–æ –æ–Ω–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ. –°–æ—Å—Ä–µ–¥–æ—Ç–æ—á—å—Ç–µ—Å—å –Ω–∞ —Ä–µ—à–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º.';
            } else {
                return '–µ—Å—Ç—å –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Å–≤–µ—Ç–ª—ã–º–∏ –∏ —Ç–µ–º–Ω—ã–º–∏ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏. –ü—Ä–∏—Å–ª—É—à–∞–π—Ç–µ—Å—å –∫ —Å–≤–æ–µ–π –∏–Ω—Ç—É–∏—Ü–∏–∏.';
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≥–∞–¥–∞–Ω–∏—è
        function getReadingCost(spreadType) {
            const costs = {
                'one_card': 50,
                'three_cards': 100,
                'celtic_cross': 200
            };
            return costs[spreadType] || 50;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞
        function getCurrentBalance() {
            // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å –∏–∑ localStorage
            const savedBalance = localStorage.getItem('userBalance');
            if (savedBalance) {
                return parseInt(savedBalance) || 0;
            }
            
            // –ï—Å–ª–∏ –Ω–µ—Ç –≤ localStorage, –∏—â–µ–º —ç–ª–µ–º–µ–Ω—Ç –±–∞–ª–∞–Ω—Å–∞
            const balanceElement = document.getElementById('balanceAmount') || document.getElementById('profileBalance');
            if (balanceElement) {
                return parseInt(balanceElement.textContent) || 0;
            }
            
            return 0;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è –º–æ–Ω–µ—Ç
        function deductCoins(amount) {
            const currentBalance = getCurrentBalance();
            const newBalance = Math.max(0, currentBalance - amount);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –±–∞–ª–∞–Ω—Å–∞
            document.querySelectorAll('.balance-amount').forEach(element => {
                element.textContent = newBalance;
            });
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
            const profileBalance = document.getElementById('profileBalance');
            if (profileBalance) {
                profileBalance.textContent = newBalance;
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            localStorage.setItem('userBalance', newBalance.toString());
            
            console.log(`üí∞ –°–ø–∏—Å–∞–Ω–æ ${amount} –º–æ–Ω–µ—Ç. –ù–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: ${newBalance}`);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–æ–Ω–µ—Ç
        function addCoins(amount) {
            const currentBalance = getCurrentBalance();
            const newBalance = currentBalance + amount;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –±–∞–ª–∞–Ω—Å–∞
            document.querySelectorAll('.balance-amount').forEach(element => {
                element.textContent = newBalance;
            });
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
            const profileBalance = document.getElementById('profileBalance');
            if (profileBalance) {
                profileBalance.textContent = newBalance;
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
            localStorage.setItem('userBalance', newBalance.toString());
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –º–æ–Ω–µ—Ç
            showNotification('üí∞ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ', `–î–æ–±–∞–≤–ª–µ–Ω–æ ${amount} –º–æ–Ω–µ—Ç. –ë–∞–ª–∞–Ω—Å: ${newBalance}`, 'success');
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ —Ü–µ–Ω—Ç—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
            addNotification('üí∞ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ', `–î–æ–±–∞–≤–ª–µ–Ω–æ ${amount} –º–æ–Ω–µ—Ç. –ë–∞–ª–∞–Ω—Å: ${newBalance}`, 'success', amount);
            
            console.log(`üí∞ –î–æ–±–∞–≤–ª–µ–Ω–æ ${amount} –º–æ–Ω–µ—Ç. –ù–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: ${newBalance}`);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞
        function showInsufficientBalance(cost, currentBalance) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                padding: 20px;
                box-sizing: border-box;
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
                color: white;
                padding: 30px;
                border-radius: 20px;
                max-width: 90%;
                text-align: center;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                font-family: Arial, sans-serif;
            `;
            
            content.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <h2 style="margin: 0; font-size: 24px;">üí∞ –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç</h2>
                </div>
                <div style="font-size: 16px; margin-bottom: 20px;">
                    <p>–°—Ç–æ–∏–º–æ—Å—Ç—å –≥–∞–¥–∞–Ω–∏—è: <strong>${cost} –º–æ–Ω–µ—Ç</strong></p>
                    <p>–í–∞—à –±–∞–ª–∞–Ω—Å: <strong>${currentBalance} –º–æ–Ω–µ—Ç</strong></p>
                    <p>–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –µ—â–µ: <strong>${cost - currentBalance} –º–æ–Ω–µ—Ç</strong></p>
                </div>
                <div style="display: flex; gap: 15px; justify-content: center;">
                    <button onclick="showAdReward()" style="
                        background: rgba(255,255,255,0.2);
                        border: 2px solid white;
                        color: white;
                        padding: 12px 20px;
                        border-radius: 25px;
                        cursor: pointer;
                        font-size: 14px;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                       onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                        üì∫ –°–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∫–ª–∞–º—É
                    </button>
                    <button onclick="this.closest('.modal').remove()" style="
                        background: rgba(255,255,255,0.2);
                        border: 2px solid white;
                        color: white;
                        padding: 12px 20px;
                        border-radius: 25px;
                        cursor: pointer;
                        font-size: 14px;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                       onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                        ‚ú® –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                </div>
            `;
            
            modal.className = 'modal';
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            modal.onclick = function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            };
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≥–∞–¥–∞–Ω–∏—è
        function showReadingResult(result, cost) {
            // –°–æ–∑–¥–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                padding: 20px;
                box-sizing: border-box;
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 30px;
                border-radius: 20px;
                max-width: 90%;
                max-height: 80%;
                overflow-y: auto;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                font-family: Arial, sans-serif;
                line-height: 1.6;
            `;
            
            content.innerHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <h2 style="margin: 0; font-size: 24px;">üîÆ –†–µ–∑—É–ª—å—Ç–∞—Ç –≥–∞–¥–∞–Ω–∏—è</h2>
                    <p style="margin: 10px 0 0 0; font-size: 14px; opacity: 0.8;">üí∞ –ü–æ—Ç—Ä–∞—á–µ–Ω–æ: ${cost} –º–æ–Ω–µ—Ç</p>
                </div>
                <div style="white-space: pre-line; font-size: 16px;">${result}</div>
                <div style="text-align: center; margin-top: 30px;">
                    <button onclick="this.closest('.modal').remove()" style="
                        background: rgba(255,255,255,0.2);
                        border: 2px solid white;
                        color: white;
                        padding: 12px 30px;
                        border-radius: 25px;
                        cursor: pointer;
                        font-size: 16px;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                       onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                        ‚ú® –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                </div>
            `;
            
            modal.className = 'modal';
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            modal.onclick = function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            };
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —Ä–µ–∫–ª–∞–º—ã –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–≥—Ä–∞–¥—ã
        function showAdReward() {
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            const existingModal = document.querySelector('.modal');
            if (existingModal) {
                existingModal.remove();
            }
            
            // –°–æ–∑–¥–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–∫–ª–∞–º—ã
            const modal = document.createElement('div');
            modal.className = 'ad-modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.95);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10001;
                padding: 20px;
                box-sizing: border-box;
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
                color: white;
                padding: 30px;
                border-radius: 25px;
                max-width: 95%;
                max-height: 90%;
                text-align: center;
                box-shadow: 0 15px 40px rgba(0,0,0,0.5);
                font-family: Arial, sans-serif;
            `;
            
            content.innerHTML = `
                <div style="margin-bottom: 10px;">
                    <h2 style="margin: 0; font-size: 24px;">üì∫ –†–µ–∫–ª–∞–º–∞</h2>
                    <p style="margin: 5px 0 0 0; font-size: 16px; opacity: 0.9;">–°–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∫–ª–∞–º—É –∏ –ø–æ–ª—É—á–∞–π—Ç–µ 25 –º–æ–Ω–µ—Ç!</p>
                </div>
                <div style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 15px; margin-bottom: 20px; position: relative; max-width: 100%; overflow: hidden;">
                    <div class="video-container" style="width: 100%; max-width: 100%; overflow: hidden; border-radius: 10px;">
                        <video id="adVideo" controls style="
                            width: 100%;
                            max-width: 100%;
                            height: 60vh;
                            border-radius: 10px;
                            background: #000;
                            object-fit: cover;
                            margin: 0;
                            display: block;
                        " preload="metadata" controlsList="nodownload nofullscreen noremoteplayback noplaybackrate noscrubber" onseeking="event.preventDefault(); return false;" onseeked="event.preventDefault(); return false;" ontimeupdate="if(this.currentTime > this.lastTime + 1) { this.currentTime = this.lastTime; } this.lastTime = this.currentTime;">
                        <source src="https://fedormala3of.github.io/AstroVopros.github.io/video/IMG_0503.MOV" type="video/quicktime">
                        <source src="https://fedormala3of.github.io/AstroVopros.github.io/video/IMG_0503.mp4" type="video/mp4">
                        <p style="color: #bdc3c7; margin: 20px 0;">
                            –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ. 
                            <a href="https://fedormala3of.github.io/AstroVopros.github.io/video/IMG_0503.MOV" style="color: #3498db;">–°–∫–∞—á–∞—Ç—å –≤–∏–¥–µ–æ</a>
                        </p>
                    </video>
                    </div>
                    

                    
                                            <!-- –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Ä–µ—Å—É—Ä—Å —Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—è - —Ä–∞—Å—Ç—è–Ω—É—Ç–∞ –ø–æ —à–∏—Ä–∏–Ω–µ –≤–∏–¥–µ–æ -->
                        <div id="advertiserButton" style="
                            position: absolute;
                            bottom: 20px;
                            left: 10px;
                            right: 10px;
                            display: none;
                            z-index: 10;
                        ">
                            <button onclick="openAdvertiserLink()" style="
                                background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
                                border: none;
                                color: white;
                                padding: 12px 20px;
                                border-radius: 20px;
                                cursor: pointer;
                                font-size: 14px;
                                font-weight: 600;
                                box-shadow: 0 4px 15px rgba(39, 174, 96, 0.5);
                                transition: all 0.3s ease;
                                backdrop-filter: blur(10px);
                                border: 2px solid rgba(255, 255, 255, 0.2);
                                width: 100%;
                            " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(39, 174, 96, 0.6)'" 
                               onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(39, 174, 96, 0.5)'">
                                üîó –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç
                            </button>
                        </div>
                </div>
                

            `;
            
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –≤–∏–¥–µ–æ
            setupAdVideo(modal);
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            modal.onclick = function(e) {
                if (e.target === modal) {
                    skipAd();
                }
            };
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ –≤–∏–¥–µ–æ
        function setupAdVideo(modal) {
            const video = modal.querySelector('#adVideo');
            let lastTime = 0;
            let isPlaying = false;
            
            // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–µ—Ä–µ–º–æ—Ç–∫–∏ - 100% –∑–∞—â–∏—Ç–∞
            video.addEventListener('seeking', function(e) {
                e.preventDefault();
                video.currentTime = lastTime;
                return false;
            });
            
            video.addEventListener('seeked', function(e) {
                e.preventDefault();
                video.currentTime = lastTime;
                return false;
            });
            
            video.addEventListener('timeupdate', function() {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Ä–µ–º—è –Ω–µ –ø–µ—Ä–µ—Å–∫–æ—á–∏–ª–æ –≤–ø–µ—Ä–µ–¥
                if (video.currentTime > lastTime + 1) {
                    video.currentTime = lastTime;
                }
                lastTime = video.currentTime;
            });
            
            // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–ª–∞–≤–∏—à –ø–µ—Ä–µ–º–æ—Ç–∫–∏
            video.addEventListener('keydown', function(e) {
                if (e.keyCode === 37 || e.keyCode === 39 || e.keyCode === 32) {
                    e.preventDefault();
                    return false;
                }
            });
            
            // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é
            video.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                return false;
            });
            
            // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–≤–æ–π–Ω–æ–≥–æ –∫–ª–∏–∫–∞
            video.addEventListener('dblclick', function(e) {
                e.preventDefault();
                return false;
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –≤–∏–¥–µ–æ
            video.addEventListener('play', function() {
                isPlaying = true;
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                setTimeout(() => {
                    const advertiserBtn = modal.querySelector('#advertiserButton');
                    if (advertiserBtn) {
                        advertiserBtn.style.display = 'block';
                    }
                }, 5000);
            });
            
            video.addEventListener('pause', function() {
                isPlaying = false;
            });
            
            video.addEventListener('ended', function() {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–∞–≥—Ä–∞–¥–µ
                showRewardNotification();
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ø–∞–ø —Å –Ω–∞–≥—Ä–∞–¥–æ–π —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
                setTimeout(() => {
                    completeAdReward();
                }, 2000);
            });
            
            video.addEventListener('error', function() {
                // –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤–∏–¥–µ–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–∞–µ–º –Ω–∞–≥—Ä–∞–¥—É
                setTimeout(() => {
                    completeAdReward();
                }, 1000);
            });
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä–æ–º)
            video.addEventListener('loadeddata', function() {
                video.play().catch(function(error) {
                    console.log('–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ:', error);
                });
            });
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–µ—Ä–µ–º–æ—Ç–∫–∏ —á–µ—Ä–µ–∑ setInterval
            setInterval(function() {
                if (isPlaying && video.currentTime > lastTime + 1) {
                    video.currentTime = lastTime;
                }
            }, 100);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞ —Ä–µ–∫–ª–∞–º—ã
        function skipAd() {
            const modal = document.querySelector('.ad-modal');
            if (modal) {
                const video = modal.querySelector('#adVideo');
                if (video) {
                    video.pause();
                    video.currentTime = 0;
                }
                modal.remove();
            }
            console.log('üì∫ –†–µ–∫–ª–∞–º–∞ –ø—Ä–æ–ø—É—â–µ–Ω–∞');
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —Å–∞–π—Ç —Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—è
        function openAdvertiserLink() {
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å–∞–π—Ç —Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—è
            const advertiserUrl = 'https://example.com'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
            
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
            window.open(advertiserUrl, '_blank');
            
            console.log('üîó –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–∞–π—Ç —Ä–µ–∫–ª–∞–º–æ–¥–∞—Ç–µ–ª—è:', advertiserUrl);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–∞–≥—Ä–∞–¥–µ
        function showRewardNotification() {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
                color: white;
                padding: 15px 25px;
                border-radius: 15px;
                box-shadow: 0 8px 25px rgba(39, 174, 96, 0.3);
                font-family: Arial, sans-serif;
                font-size: 16px;
                font-weight: 600;
                z-index: 10003;
                animation: slideInRight 0.5s ease-out;
            `;
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <span style="font-size: 20px;">üéâ</span>
                    <span>–ù–∞–≥—Ä–∞–¥–∞ –≥–æ—Ç–æ–≤–∞! +25 –º–æ–Ω–µ—Ç</span>
                </div>
            `;
            
            // –î–æ–±–∞–≤–ª—è–µ–º CSS –∞–Ω–∏–º–∞—Ü–∏—é
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideInRight {
                    from {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(notification);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ —Ü–µ–Ω—Ç—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
            addNotification('üéâ –ù–∞–≥—Ä–∞–¥–∞ –∑–∞ —Ä–µ–∫–ª–∞–º—É', '–í—ã –ø–æ–ª—É—á–∏–ª–∏ 25 –º–æ–Ω–µ—Ç –∑–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∫–ª–∞–º—ã', 'success', 25);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–±–∏—Ä–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 4 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                notification.style.animation = 'slideInRight 0.5s ease-out reverse';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 500);
            }, 4000);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∫–ª–∞–º—ã
        function completeAdReward() {
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–∫–ª–∞–º—ã
            const adModal = document.querySelector('.ad-modal');
            if (adModal) {
                const video = adModal.querySelector('#adVideo');
                if (video) {
                    video.pause();
                    video.currentTime = 0;
                }
                adModal.remove();
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º –º–æ–Ω–µ—Ç—ã –∑–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∫–ª–∞–º—ã
            const reward = 25; // 25 –º–æ–Ω–µ—Ç –∑–∞ —Ä–µ–∫–ª–∞–º—É
            addCoins(reward);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ—Å—Ç–æ–π –ø–æ–ø–∞–ø —Å –∫–Ω–æ–ø–∫–æ–π –û–ö
            showSimpleAdRewardPopup(reward);
            
            console.log('üì∫ –†–µ–∫–ª–∞–º–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–∞, –Ω–∞–≥—Ä–∞–¥–∞ –ø–æ–ª—É—á–µ–Ω–∞:', reward, '–º–æ–Ω–µ—Ç');
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –ø–æ–ø–∞–ø–∞ —Å –Ω–∞–≥—Ä–∞–¥–æ–π –∑–∞ —Ä–µ–∫–ª–∞–º—É
        function showAdRewardPopup() {
            const popup = document.createElement('div');
            popup.className = 'ad-reward-popup';
            popup.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10004;
                animation: fadeIn 0.3s ease-out;
            `;
            
            popup.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
                    border-radius: 20px;
                    padding: 40px;
                    text-align: center;
                    max-width: 400px;
                    width: 90%;
                    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
                    animation: slideInUp 0.5s ease-out;
                ">
                    <div style="font-size: 60px; margin-bottom: 20px;">üéâ</div>
                    <h2 style="color: white; margin: 0 0 15px 0; font-size: 28px; font-weight: 600;">
                        –ù–∞–≥—Ä–∞–¥–∞ –ø–æ–ª—É—á–µ–Ω–∞!
                    </h2>
                    <p style="color: #bdc3c7; margin: 0 0 25px 0; font-size: 18px; line-height: 1.4;">
                        –í—ã —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–ª–∏ —Ä–µ–∫–ª–∞–º—É –∏ –ø–æ–ª—É—á–∏–ª–∏ <span style="color: #f39c12; font-weight: bold;">25 –º–æ–Ω–µ—Ç</span>!
                    </p>
                    <div style="background: rgba(39, 174, 96, 0.2); border: 2px solid #27ae60; border-radius: 15px; padding: 15px; margin: 20px 0;">
                        <div style="color: #27ae60; font-size: 16px; font-weight: 600;">
                            üí∞ –í–∞—à –±–∞–ª–∞–Ω—Å: ${getCurrentBalance()} –º–æ–Ω–µ—Ç
                        </div>
                    </div>
                    <button onclick="closeAdRewardPopup()" style="
                        background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
                        border: none;
                        color: white;
                        padding: 15px 40px;
                        border-radius: 25px;
                        cursor: pointer;
                        font-size: 18px;
                        font-weight: 600;
                        box-shadow: 0 6px 20px rgba(52, 152, 219, 0.3);
                        transition: all 0.3s ease;
                        margin-top: 10px;
                    " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(52, 152, 219, 0.4)'" 
                       onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 6px 20px rgba(52, 152, 219, 0.3)'">
                        üè† –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
                    </button>
                </div>
            `;
            
            // –î–æ–±–∞–≤–ª—è–µ–º CSS –∞–Ω–∏–º–∞—Ü–∏–∏
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                @keyframes slideInUp {
                    from {
                        transform: translateY(50px);
                        opacity: 0;
                    }
                    to {
                        transform: translateY(0);
                        opacity: 1;
                    }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(popup);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–ø–∞–ø–∞ —Å –Ω–∞–≥—Ä–∞–¥–æ–π
        function closeAdRewardPopup() {
            const popup = document.querySelector('.ad-reward-popup');
            if (popup) {
                popup.style.animation = 'fadeIn 0.3s ease-out reverse';
                setTimeout(() => {
                    popup.remove();
                    // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
                    showPage('divination');
                }, 300);
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –ø—Ä–æ—Å—Ç–æ–≥–æ –ø–æ–ø–∞–ø–∞ —Å –Ω–∞–≥—Ä–∞–¥–æ–π
        function showSimpleAdRewardPopup(reward) {
            const popup = document.createElement('div');
            popup.className = 'simple-ad-reward-popup';
            popup.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.9);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10005;
                animation: fadeIn 0.3s ease-out;
            `;
            
            popup.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
                    border-radius: 25px;
                    padding: 40px;
                    text-align: center;
                    max-width: 400px;
                    width: 90%;
                    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
                    animation: slideInUp 0.5s ease-out;
                    position: relative;
                ">
                    <div style="font-size: 60px; margin-bottom: 20px;">üéâ</div>
                    <h2 style="color: white; margin: 0 0 15px 0; font-size: 28px; font-weight: 600;">
                        –ù–∞–≥—Ä–∞–¥–∞ –ø–æ–ª—É—á–µ–Ω–∞!
                    </h2>
                    <p style="color: white; margin: 0 0 25px 0; font-size: 18px; opacity: 0.9; line-height: 1.4;">
                        –í—ã –ø–æ–ª—É—á–∏–ª–∏ <span style="font-weight: bold; color: #f1c40f; font-size: 20px;">${reward} –º–æ–Ω–µ—Ç</span><br>–∑–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∫–ª–∞–º—ã!
                    </p>
                    <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 15px; margin: 20px 0;">
                        <div style="color: white; font-size: 16px; font-weight: 600;">
                            üí∞ –í–∞—à –±–∞–ª–∞–Ω—Å: ${getCurrentBalance()} –º–æ–Ω–µ—Ç
                        </div>
                    </div>
                    <button onclick="closeSimpleAdRewardPopup()" style="
                        background: white;
                        border: none;
                        color: #27ae60;
                        padding: 15px 40px;
                        border-radius: 30px;
                        cursor: pointer;
                        font-size: 18px;
                        font-weight: 600;
                        box-shadow: 0 6px 20px rgba(255, 255, 255, 0.3);
                        transition: all 0.3s ease;
                        margin-top: 15px;
                        min-width: 120px;
                    " onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 25px rgba(255, 255, 255, 0.4)'" 
                       onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 6px 20px rgba(255, 255, 255, 0.3)'">
                        –û–ö
                    </button>
                </div>
            `;
            
            document.body.appendChild(popup);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ –ø–æ–ø–∞–ø–∞ —Å –Ω–∞–≥—Ä–∞–¥–æ–π
        function closeSimpleAdRewardPopup() {
            const popup = document.querySelector('.simple-ad-reward-popup');
            if (popup) {
                popup.style.animation = 'fadeIn 0.3s ease-out reverse';
                setTimeout(() => {
                    popup.remove();
                    // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –Ω–∞—á–∞–ª—å–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
                    showPage('divination');
                }, 300);
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
        function showEditProfile() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                padding: 20px;
                box-sizing: border-box;
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: white;
                border-radius: 20px;
                padding: 30px;
                max-width: 90%;
                max-height: 90%;
                overflow-y: auto;
                box-shadow: 0 20px 40px rgba(0,0,0,0.3);
                font-family: Arial, sans-serif;
                width: 100%;
                max-width: 500px;
            `;
            
            // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const userData = JSON.parse(localStorage.getItem('userData') || '{}');
            const currentName = userData.name || '–ú–∞—Å—Ç–µ—Ä –¢–∞—Ä–æ';
            const currentGender = userData.gender || 'all';
            const currentBirthDate = userData.birthDate || '';
            const currentZodiac = userData.zodiac || '–û–≤–µ–Ω';
            const currentZodiacSign = userData.zodiacSign || '‚ôà';
            
            content.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                    <h2 style="margin: 0; color: #333; font-size: 24px;">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è</h2>
                    <button onclick="this.closest('.modal').remove()" style="
                        background: #dc3545;
                        color: white;
                        border: none;
                        border-radius: 50%;
                        width: 40px;
                        height: 40px;
                        cursor: pointer;
                        font-size: 18px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    ">√ó</button>
                </div>
                
                <div style="display: grid; gap: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">–ò–º—è</label>
                        <input type="text" id="editName" value="${currentName}" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" style="
                            width: 100%;
                            padding: 12px;
                            border: 2px solid #e0e0e0;
                            border-radius: 10px;
                            font-size: 16px;
                            box-sizing: border-box;
                        ">
                    </div>
                    
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">–ü–æ–ª</label>
                        <select id="editGender" style="
                            width: 100%;
                            padding: 12px;
                            border: 2px solid #e0e0e0;
                            border-radius: 10px;
                            font-size: 16px;
                            box-sizing: border-box;
                        ">
                            <option value="all" ${currentGender === 'all' ? 'selected' : ''}>–ù–µ —É–∫–∞–∑–∞–Ω</option>
                            <option value="male" ${currentGender === 'male' ? 'selected' : ''}>üë® –ú—É–∂—Å–∫–æ–π</option>
                            <option value="female" ${currentGender === 'female' ? 'selected' : ''}>üë© –ñ–µ–Ω—Å–∫–∏–π</option>
                        </select>
                    </div>
                    
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                        <input type="date" id="editBirthDate" value="${currentBirthDate}" style="
                            width: 100%;
                            padding: 12px;
                            border: 2px solid #e0e0e0;
                            border-radius: 10px;
                            font-size: 16px;
                            box-sizing: border-box;
                        ">
                        <div id="zodiacPreview" style="
                            margin-top: 10px;
                            padding: 10px;
                            background: #f8f9fa;
                            border-radius: 8px;
                            text-align: center;
                            font-size: 14px;
                            color: #666;
                        ">
                            ${currentBirthDate ? `–ó–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞: ${currentZodiacSign} ${currentZodiac}` : '–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–Ω–∞–∫–∞ –∑–æ–¥–∏–∞–∫–∞'}
                        </div>
                    </div>
                    
                    <div style="background: #e8f5e8; padding: 15px; border-radius: 10px; border-left: 4px solid #28a745;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                            <span style="font-size: 20px;">üåü</span>
                            <span style="font-weight: 600; color: #333;">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø</span>
                        </div>
                        <p style="margin: 0; font-size: 14px; color: #666;">
                            –ü—Ä–∏ —É–∫–∞–∑–∞–Ω–∏–∏ –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø –¥–ª—è –≤–∞—à–µ–≥–æ –∑–Ω–∞–∫–∞ –∑–æ–¥–∏–∞–∫–∞.
                        </p>
                    </div>
                </div>
                
                <div style="display: flex; gap: 15px; margin-top: 30px;">
                    <button onclick="saveProfile()" style="
                        flex: 1;
                        background: #28a745;
                        color: white;
                        border: none;
                        padding: 15px;
                        border-radius: 10px;
                        cursor: pointer;
                        font-size: 16px;
                        font-weight: 600;
                        transition: background 0.3s ease;
                    " onmouseover="this.style.background='#218838'" onmouseout="this.style.background='#28a745'">
                        üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                    </button>
                    <button onclick="this.closest('.modal').remove()" style="
                        flex: 1;
                        background: #6c757d;
                        color: white;
                        border: none;
                        padding: 15px;
                        border-radius: 10px;
                        cursor: pointer;
                        font-size: 16px;
                        font-weight: 600;
                        transition: background 0.3s ease;
                    " onmouseover="this.style.background='#5a6268'" onmouseout="this.style.background='#6c757d'">
                        ‚ùå –û—Ç–º–µ–Ω–∞
                    </button>
                </div>
            `;
            
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è
            const birthDateInput = content.querySelector('#editBirthDate');
            const zodiacPreview = content.querySelector('#zodiacPreview');
            
            birthDateInput.addEventListener('change', function() {
                const birthDate = new Date(this.value);
                if (birthDate && !isNaN(birthDate.getTime())) {
                    const zodiac = getZodiacSign(birthDate);
                    zodiacPreview.innerHTML = `–ó–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞: ${zodiac.sign} ${zodiac.name}`;
                } else {
                    zodiacPreview.innerHTML = '–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–Ω–∞–∫–∞ –∑–æ–¥–∏–∞–∫–∞';
                }
            });
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–Ω–∞–∫–∞ –∑–æ–¥–∏–∞–∫–∞
            function getZodiacSign(date) {
                const month = date.getMonth() + 1;
                const day = date.getDate();
                
                const zodiacSigns = [
                    { name: '–ö–æ–∑–µ—Ä–æ–≥', sign: '‚ôë', start: [12, 22], end: [1, 19] },
                    { name: '–í–æ–¥–æ–ª–µ–π', sign: '‚ôí', start: [1, 20], end: [2, 18] },
                    { name: '–†—ã–±—ã', sign: '‚ôì', start: [2, 19], end: [3, 20] },
                    { name: '–û–≤–µ–Ω', sign: '‚ôà', start: [3, 21], end: [4, 19] },
                    { name: '–¢–µ–ª–µ—Ü', sign: '‚ôâ', start: [4, 20], end: [5, 20] },
                    { name: '–ë–ª–∏–∑–Ω–µ—Ü—ã', sign: '‚ôä', start: [5, 21], end: [6, 20] },
                    { name: '–†–∞–∫', sign: '‚ôã', start: [6, 21], end: [7, 22] },
                    { name: '–õ–µ–≤', sign: '‚ôå', start: [7, 23], end: [8, 22] },
                    { name: '–î–µ–≤–∞', sign: '‚ôç', start: [8, 23], end: [9, 22] },
                    { name: '–í–µ—Å—ã', sign: '‚ôé', start: [9, 23], end: [10, 22] },
                    { name: '–°–∫–æ—Ä–ø–∏–æ–Ω', sign: '‚ôè', start: [10, 23], end: [11, 21] },
                    { name: '–°—Ç—Ä–µ–ª–µ—Ü', sign: '‚ôê', start: [11, 22], end: [12, 21] }
                ];
                
                for (let zodiac of zodiacSigns) {
                    if (zodiac.name === '–ö–æ–∑–µ—Ä–æ–≥') {
                        if ((month === 12 && day >= 22) || (month === 1 && day <= 19)) {
                            return zodiac;
                        }
                    } else {
                        if ((month === zodiac.start[0] && day >= zodiac.start[1]) || 
                            (month === zodiac.end[0] && day <= zodiac.end[1])) {
                            return zodiac;
                        }
                    }
                }
                return zodiacSigns[3]; // –û–≤–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            }
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
            window.saveProfile = function() {
                const name = document.getElementById('editName').value.trim();
                const gender = document.getElementById('editGender').value;
                const birthDate = document.getElementById('editBirthDate').value;
                
                if (!name) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è');
                    return;
                }
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∑–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞
                let zodiac = { name: '–û–≤–µ–Ω', sign: '‚ôà' };
                if (birthDate) {
                    zodiac = getZodiacSign(new Date(birthDate));
                }
                
                // –í—ã—á–∏—Å–ª—è–µ–º –≤–æ–∑—Ä–∞—Å—Ç
                let age = '';
                if (birthDate) {
                    const today = new Date();
                    const birth = new Date(birthDate);
                    let ageYears = today.getFullYear() - birth.getFullYear();
                    const monthDiff = today.getMonth() - birth.getMonth();
                    if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {
                        ageYears--;
                    }
                    age = `${ageYears} –ª–µ—Ç`;
                }
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
                const userData = {
                    name: name,
                    gender: gender,
                    birthDate: birthDate,
                    zodiac: zodiac.name,
                    zodiacSign: zodiac.sign,
                    age: age
                };
                localStorage.setItem('userData', JSON.stringify(userData));
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                updateProfileDisplay(userData);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                showNotification('‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω', `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${name}!`, 'success');
                
                // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
                modal.remove();
            };
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
        function updateProfileDisplay(userData) {
            const userName = document.getElementById('userName');
            const userGender = document.getElementById('userGender');
            const userAge = document.getElementById('userAge');
            const zodiacName = document.getElementById('zodiacName');
            const zodiacSign = document.getElementById('zodiacSign');
            const profileAvatar = document.getElementById('profileAvatar');
            const horoscopeEnabled = document.getElementById('horoscopeEnabled');
            
            if (userName) userName.textContent = userData.name || '–ú–∞—Å—Ç–µ—Ä –¢–∞—Ä–æ';
            
            if (userGender) {
                const genderIcons = {
                    'male': 'üë®',
                    'female': 'üë©',
                    'all': 'üë§'
                };
                userGender.textContent = genderIcons[userData.gender] || 'üë§';
            }
            
            if (userAge) userAge.textContent = userData.age || '25 –ª–µ—Ç';
            if (zodiacName) zodiacName.textContent = userData.zodiac || '–û–≤–µ–Ω';
            if (zodiacSign) zodiacSign.textContent = userData.zodiacSign || '‚ôà';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–≤–∞—Ç–∞—Ä –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ–ª–∞
            if (profileAvatar) {
                const avatarIcons = {
                    'male': 'üîÆ',
                    'female': 'üåô',
                    'all': 'üîÆ'
                };
                profileAvatar.textContent = avatarIcons[userData.gender] || 'üîÆ';
            }
            
            // –í–∫–ª—é—á–∞–µ–º –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –≥–æ—Ä–æ—Å–∫–æ–ø –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω–∞ –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è
            if (horoscopeEnabled && userData.birthDate) {
                horoscopeEnabled.checked = true;
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —Ç–∞–±–ª–∏—Ü—ã –ª–∏–¥–µ—Ä–æ–≤
        function showLeaderboard() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.95);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                padding: 10px;
                box-sizing: border-box;
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
                border-radius: 25px;
                padding: 0;
                max-width: 95%;
                max-height: 95%;
                overflow: hidden;
                box-shadow: 0 25px 50px rgba(0,0,0,0.4);
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                width: 100%;
                max-width: 800px;
                display: flex;
                flex-direction: column;
            `;
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–æ–ø-100
            const generateLeaders = (league, startRank) => {
                const names = ["–ê–ª–µ–∫—Å–∞–Ω–¥—Ä", "–ú–∞—Ä–∏—è", "–î–º–∏—Ç—Ä–∏–π", "–ê–Ω–Ω–∞", "–ú–∞–∫—Å–∏–º", "–ï–ª–µ–Ω–∞", "–°–µ—Ä–≥–µ–π", "–û–ª—å–≥–∞", "–ê–Ω–¥—Ä–µ–π", "–¢–∞—Ç—å—è–Ω–∞", "–í–ª–∞–¥–∏–º–∏—Ä", "–ù–∞—Ç–∞–ª—å—è", "–ò–≥–æ—Ä—å", "–°–≤–µ—Ç–ª–∞–Ω–∞", "–ê–ª–µ–∫—Å–µ–π", "–Æ–ª–∏—è", "–î–µ–Ω–∏—Å", "–ò—Ä–∏–Ω–∞", "–ü–∞–≤–µ–ª", "–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞"];
                const avatars = ["üîÆ", "üåô", "‚≠ê", "üåü", "üí´", "‚ú®", "üîØ", "‚ôà", "‚ôâ", "‚ôä", "‚ôã", "‚ôå", "‚ôç", "‚ôé", "‚ôè", "‚ôê", "‚ôë", "‚ôí", "‚ôì", "üåå"];
                const zodiacs = ["‚ôà –û–≤–µ–Ω", "‚ôâ –¢–µ–ª–µ—Ü", "‚ôä –ë–ª–∏–∑–Ω–µ—Ü—ã", "‚ôã –†–∞–∫", "‚ôå –õ–µ–≤", "‚ôç –î–µ–≤–∞", "‚ôé –í–µ—Å—ã", "‚ôè –°–∫–æ—Ä–ø–∏–æ–Ω", "‚ôê –°—Ç—Ä–µ–ª–µ—Ü", "‚ôë –ö–æ–∑–µ—Ä–æ–≥", "‚ôí –í–æ–¥–æ–ª–µ–π", "‚ôì –†—ã–±—ã"];
                
                return Array.from({length: 100}, (_, i) => {
                    const rank = startRank + i;
                    const baseCoins = league === 'diamond' ? 50000 - (i * 400) : 
                                     league === 'gold' ? 20000 - (i * 150) : 
                                     10000 - (i * 80);
                    const baseLevel = league === 'diamond' ? 20 - Math.floor(i / 10) : 
                                     league === 'gold' ? 15 - Math.floor(i / 15) : 
                                     10 - Math.floor(i / 20);
                    
                    return {
                        id: startRank + i,
                        name: names[i % names.length] + (i > 19 ? ` ${Math.floor(i/20) + 1}` : ''),
                        avatar: avatars[i % avatars.length],
                        level: Math.max(1, baseLevel),
                        coins: Math.max(1000, baseCoins),
                        xp: Math.max(100, baseCoins * 0.1),
                        zodiac: zodiacs[i % zodiacs.length],
                        achievements: Math.max(1, Math.floor(baseCoins / 2000)),
                        gamesWon: Math.max(0, Math.floor(baseCoins / 500)),
                        readingsDone: Math.max(0, Math.floor(baseCoins / 1000)),
                        rank: rank,
                        league: league
                    };
                });
            };
            
            const diamondLeaders = generateLeaders('diamond', 1);
            const goldLeaders = generateLeaders('gold', 101);
            const silverLeaders = generateLeaders('silver', 201);
            
            content.innerHTML = `
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-bottom: 1px solid rgba(255,255,255,0.2);">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <h2 style="margin: 0; color: white; font-size: 28px; font-weight: 700; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">üëë –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</h2>
                        <button onclick="this.closest('.modal').remove()" style="
                            background: rgba(255,255,255,0.2);
                            color: white;
                            border: none;
                            border-radius: 50%;
                            width: 45px;
                            height: 45px;
                            cursor: pointer;
                            font-size: 20px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            transition: all 0.3s ease;
                            backdrop-filter: blur(10px);
                        " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                           onmouseout="this.style.background='rgba(255,255,255,0.2)'">√ó</button>
                    </div>
                </div>
                
                <div style="flex: 1; overflow-y: auto; padding: 20px;">
                    <!-- Diamond League -->
                    <div style="margin-bottom: 30px;">
                        <div style="background: linear-gradient(135deg, #b9f2ff 0%, #00bcd4 100%); padding: 15px 20px; border-radius: 15px; margin-bottom: 15px; box-shadow: 0 4px 15px rgba(0,188,212,0.3);">
                            <h3 style="margin: 0; color: white; font-size: 20px; font-weight: 700; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">üíé Diamond League (1-100)</h3>
                        </div>
                        <div style="background: rgba(255,255,255,0.95); border-radius: 15px; overflow: hidden; box-shadow: 0 8px 25px rgba(0,0,0,0.1);">
                            <div style="max-height: 300px; overflow-y: auto;">
                                ${diamondLeaders.map((leader, index) => `
                                    <div class="leader-row" ${index < 3 ? `onclick="showLeaderProfile(${leader.id})"` : ''} style="
                                        display: flex;
                                        align-items: center;
                                        padding: 12px 20px;
                                        border-bottom: ${index < 99 ? '1px solid #f0f0f0' : 'none'};
                                        cursor: ${index < 3 ? 'pointer' : 'default'};
                                        transition: all 0.2s ease;
                                        background: ${index < 3 ? 'linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%)' : 'white'};
                                    " onmouseover="this.style.background='${index < 3 ? 'linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%)' : '#f8f9fa'}'" 
                                       onmouseout="this.style.background='${index < 3 ? 'linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%)' : 'white'}'">
                                        
                                        <div style="width: 40px; text-align: center; font-weight: bold; font-size: 16px; color: ${index < 3 ? '#d63031' : '#666'};">
                                            ${index < 3 ? ['ü•á', 'ü•à', 'ü•â'][index] : `#${leader.rank}`}
                                        </div>
                                        
                                        <div style="width: 50px; text-align: center; font-size: 24px; margin: 0 15px;">
                                            ${leader.avatar}
                                        </div>
                                        
                                        <div style="flex: 1;">
                                            <div style="font-weight: 600; color: #333; font-size: 15px; margin-bottom: 2px;">${leader.name}</div>
                                            <div style="font-size: 12px; color: #666;">${leader.zodiac} ‚Ä¢ –£—Ä. ${leader.level}</div>
                                        </div>
                                        
                                        <div style="text-align: right; margin-right: 15px;">
                                            <div style="font-weight: bold; color: #2d3436; font-size: 16px;">${leader.coins.toLocaleString()}</div>
                                            <div style="font-size: 11px; color: #666;">–º–æ–Ω–µ—Ç</div>
                                        </div>
                                        
                                        ${index < 3 ? '<div style="color: #d63031; font-size: 18px; margin-left: 10px;">üëÜ</div>' : ''}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                    
                    <!-- Gold League -->
                    <div style="margin-bottom: 30px;">
                        <div style="background: linear-gradient(135deg, #ffd700 0%, #ffb347 100%); padding: 15px 20px; border-radius: 15px; margin-bottom: 15px; box-shadow: 0 4px 15px rgba(255,215,0,0.3);">
                            <h3 style="margin: 0; color: white; font-size: 20px; font-weight: 700; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">ü•á Gold League (101-200)</h3>
                        </div>
                        <div style="background: rgba(255,255,255,0.95); border-radius: 15px; overflow: hidden; box-shadow: 0 8px 25px rgba(0,0,0,0.1);">
                            <div style="max-height: 300px; overflow-y: auto;">
                                ${goldLeaders.map((leader, index) => `
                                    <div class="leader-row" ${index < 3 ? `onclick="showLeaderProfile(${leader.id})"` : ''} style="
                                        display: flex;
                                        align-items: center;
                                        padding: 12px 20px;
                                        border-bottom: ${index < 99 ? '1px solid #f0f0f0' : 'none'};
                                        cursor: ${index < 3 ? 'pointer' : 'default'};
                                        transition: all 0.2s ease;
                                        background: ${index < 3 ? 'linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%)' : 'white'};
                                    " onmouseover="this.style.background='${index < 3 ? 'linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%)' : '#f8f9fa'}'" 
                                       onmouseout="this.style.background='${index < 3 ? 'linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%)' : 'white'}'">
                                        
                                        <div style="width: 40px; text-align: center; font-weight: bold; font-size: 16px; color: ${index < 3 ? '#d63031' : '#666'};">
                                            ${index < 3 ? ['ü•á', 'ü•à', 'ü•â'][index] : `#${leader.rank}`}
                                        </div>
                                        
                                        <div style="width: 50px; text-align: center; font-size: 24px; margin: 0 15px;">
                                            ${leader.avatar}
                                        </div>
                                        
                                        <div style="flex: 1;">
                                            <div style="font-weight: 600; color: #333; font-size: 15px; margin-bottom: 2px;">${leader.name}</div>
                                            <div style="font-size: 12px; color: #666;">${leader.zodiac} ‚Ä¢ –£—Ä. ${leader.level}</div>
                                        </div>
                                        
                                        <div style="text-align: right; margin-right: 15px;">
                                            <div style="font-weight: bold; color: #2d3436; font-size: 16px;">${leader.coins.toLocaleString()}</div>
                                            <div style="font-size: 11px; color: #666;">–º–æ–Ω–µ—Ç</div>
                                        </div>
                                        
                                        ${index < 3 ? '<div style="color: #d63031; font-size: 18px; margin-left: 10px;">üëÜ</div>' : ''}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                    
                    <!-- Silver League -->
                    <div style="margin-bottom: 20px;">
                        <div style="background: linear-gradient(135deg, #c0c0c0 0%, #a8a8a8 100%); padding: 15px 20px; border-radius: 15px; margin-bottom: 15px; box-shadow: 0 4px 15px rgba(192,192,192,0.3);">
                            <h3 style="margin: 0; color: white; font-size: 20px; font-weight: 700; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">ü•à Silver League (201-300)</h3>
                        </div>
                        <div style="background: rgba(255,255,255,0.95); border-radius: 15px; overflow: hidden; box-shadow: 0 8px 25px rgba(0,0,0,0.1);">
                            <div style="max-height: 300px; overflow-y: auto;">
                                ${silverLeaders.map((leader, index) => `
                                    <div class="leader-row" ${index < 3 ? `onclick="showLeaderProfile(${leader.id})"` : ''} style="
                                        display: flex;
                                        align-items: center;
                                        padding: 12px 20px;
                                        border-bottom: ${index < 99 ? '1px solid #f0f0f0' : 'none'};
                                        cursor: ${index < 3 ? 'pointer' : 'default'};
                                        transition: all 0.2s ease;
                                        background: ${index < 3 ? 'linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%)' : 'white'};
                                    " onmouseover="this.style.background='${index < 3 ? 'linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%)' : '#f8f9fa'}'" 
                                       onmouseout="this.style.background='${index < 3 ? 'linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%)' : 'white'}'">
                                        
                                        <div style="width: 40px; text-align: center; font-weight: bold; font-size: 16px; color: ${index < 3 ? '#d63031' : '#666'};">
                                            ${index < 3 ? ['ü•á', 'ü•à', 'ü•â'][index] : `#${leader.rank}`}
                                        </div>
                                        
                                        <div style="width: 50px; text-align: center; font-size: 24px; margin: 0 15px;">
                                            ${leader.avatar}
                                        </div>
                                        
                                        <div style="flex: 1;">
                                            <div style="font-weight: 600; color: #333; font-size: 15px; margin-bottom: 2px;">${leader.name}</div>
                                            <div style="font-size: 12px; color: #666;">${leader.zodiac} ‚Ä¢ –£—Ä. ${leader.level}</div>
                                        </div>
                                        
                                        <div style="text-align: right; margin-right: 15px;">
                                            <div style="font-weight: bold; color: #2d3436; font-size: 16px;">${leader.coins.toLocaleString()}</div>
                                            <div style="font-size: 11px; color: #666;">–º–æ–Ω–µ—Ç</div>
                                        </div>
                                        
                                        ${index < 3 ? '<div style="color: #d63031; font-size: 18px; margin-left: 10px;">üëÜ</div>' : ''}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-top: 1px solid rgba(255,255,255,0.2);">
                    <div style="text-align: center;">
                        <h3 style="margin: 0 0 10px 0; color: white; font-size: 18px; font-weight: 600;">üìä –ö–∞–∫ –ø–æ–ø–∞—Å—Ç—å –≤ –ª–∏–¥–µ—Ä—ã?</h3>
                        <p style="margin: 0; color: rgba(255,255,255,0.9); font-size: 14px; line-height: 1.5;">
                            –ò–≥—Ä–∞–π—Ç–µ –≤ –∏–≥—Ä—ã, –¥–µ–ª–∞–π—Ç–µ –≥–∞–¥–∞–Ω–∏—è, –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –º–æ–Ω–µ—Ç—ã! –¢–æ–ø-3 –∏–≥—Ä–æ–∫–æ–≤ –∫–∞–∂–¥–æ–π –ª–∏–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π.
                        </p>
                    </div>
                </div>
            `;
            
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –ø—Ä–æ—Ñ–∏–ª—è –ª–∏–¥–µ—Ä–∞
            window.showLeaderProfile = function(leaderId) {
                const allLeaders = [...diamondLeaders, ...goldLeaders, ...silverLeaders];
                const leader = allLeaders.find(l => l.id === leaderId);
                if (!leader) return;
                
                const profileModal = document.createElement('div');
                profileModal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.9);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 10001;
                    padding: 20px;
                    box-sizing: border-box;
                `;
                
                const profileContent = document.createElement('div');
                profileContent.style.cssText = `
                    background: white;
                    border-radius: 20px;
                    padding: 30px;
                    max-width: 90%;
                    max-height: 90%;
                    overflow-y: auto;
                    box-shadow: 0 20px 40px rgba(0,0,0,0.3);
                    font-family: Arial, sans-serif;
                    width: 100%;
                    max-width: 500px;
                `;
                
                profileContent.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                        <h2 style="margin: 0; color: #333; font-size: 24px;">üë§ –ü—Ä–æ—Ñ–∏–ª—å –ª–∏–¥–µ—Ä–∞</h2>
                        <button onclick="this.closest('.modal').remove()" style="
                            background: #dc3545;
                            color: white;
                            border: none;
                            border-radius: 50%;
                            width: 40px;
                            height: 40px;
                            cursor: pointer;
                            font-size: 18px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                        ">√ó</button>
                    </div>
                    
                    <div style="text-align: center; margin-bottom: 30px;">
                        <div style="font-size: 60px; margin-bottom: 15px;">${leader.avatar}</div>
                        <h3 style="margin: 0 0 5px 0; color: #333; font-size: 24px; font-weight: 700;">${leader.name}</h3>
                        <p style="margin: 0 0 15px 0; color: #666; font-size: 16px; font-weight: 600;">${leader.zodiac}</p>
                        <div style="background: ${leader.league === 'diamond' ? 'linear-gradient(135deg, #b9f2ff 0%, #00bcd4 100%)' : 
                                                      leader.league === 'gold' ? 'linear-gradient(135deg, #ffd700 0%, #ffb347 100%)' : 
                                                      'linear-gradient(135deg, #c0c0c0 0%, #a8a8a8 100%)'}; color: white; padding: 10px 20px; border-radius: 20px; display: inline-block; font-weight: 600; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
                            ${leader.league === 'diamond' ? 'üíé' : leader.league === 'gold' ? 'ü•á' : 'ü•à'} ${leader.league === 'diamond' ? 'Diamond' : leader.league === 'gold' ? 'Gold' : 'Silver'} League ‚Ä¢ #${leader.rank}
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 30px;">
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 20px; font-weight: bold; color: #333; margin-bottom: 5px;">${leader.level}</div>
                            <div style="font-size: 12px; color: #666; font-weight: 600;">–£—Ä–æ–≤–µ–Ω—å</div>
                        </div>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 20px; font-weight: bold; color: #333; margin-bottom: 5px;">${leader.coins.toLocaleString()}</div>
                            <div style="font-size: 12px; color: #666; font-weight: 600;">–ú–æ–Ω–µ—Ç</div>
                        </div>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 20px; font-weight: bold; color: #333; margin-bottom: 5px;">${leader.achievements}</div>
                            <div style="font-size: 12px; color: #666; font-weight: 600;">–î–æ—Å—Ç–∏–∂–µ–Ω–∏–π</div>
                        </div>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 20px; font-weight: bold; color: #333; margin-bottom: 5px;">${leader.gamesWon}</div>
                            <div style="font-size: 12px; color: #666; font-weight: 600;">–ü–æ–±–µ–¥ –≤ –∏–≥—Ä–∞—Ö</div>
                        </div>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 15px;">
                        <h3 style="margin: 0 0 15px 0; color: #333; font-size: 18px;">üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
                        <div style="display: grid; gap: 10px;">
                            <div style="background: white; padding: 12px; border-radius: 8px; display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 20px;">üéØ</span>
                                <div>
                                    <div style="font-weight: 600; color: #333;">–ú–∞—Å—Ç–µ—Ä –≥–∞–¥–∞–Ω–∏–π</div>
                                    <div style="font-size: 12px; color: #666;">–í—ã–ø–æ–ª–Ω–µ–Ω–æ ${leader.readingsDone} –≥–∞–¥–∞–Ω–∏–π</div>
                                </div>
                            </div>
                            <div style="background: white; padding: 12px; border-radius: 8px; display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 20px;">üéÆ</span>
                                <div>
                                    <div style="font-weight: 600; color: #333;">–ü–æ–±–µ–¥–∏—Ç–µ–ª—å –∏–≥—Ä</div>
                                    <div style="font-size: 12px; color: #666;">–í—ã–∏–≥—Ä–∞–Ω–æ ${leader.gamesWon} –∏–≥—Ä</div>
                                </div>
                            </div>
                            <div style="background: white; padding: 12px; border-radius: 8px; display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 20px;">üí∞</span>
                                <div>
                                    <div style="font-weight: 600; color: #333;">–ë–æ–≥–∞—á</div>
                                    <div style="font-size: 12px; color: #666;">–ù–∞–∫–æ–ø–ª–µ–Ω–æ ${leader.coins.toLocaleString()} –º–æ–Ω–µ—Ç</div>
                                </div>
                            </div>
                            <div style="background: white; padding: 12px; border-radius: 8px; display: flex; align-items: center; gap: 10px;">
                                <span style="font-size: 20px;">‚≠ê</span>
                                <div>
                                    <div style="font-weight: 600; color: #333;">–û–ø—ã—Ç–Ω—ã–π –∏–≥—Ä–æ–∫</div>
                                    <div style="font-size: 12px; color: #666;">–î–æ—Å—Ç–∏–≥ ${leader.level} —É—Ä–æ–≤–Ω—è</div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                profileModal.className = 'modal';
                profileModal.appendChild(profileContent);
                document.body.appendChild(profileModal);
            };
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
        function showAdCabinet() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                padding: 20px;
                box-sizing: border-box;
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: white;
                border-radius: 20px;
                padding: 30px;
                max-width: 90%;
                max-height: 90%;
                overflow-y: auto;
                box-shadow: 0 20px 40px rgba(0,0,0,0.3);
                font-family: Arial, sans-serif;
                width: 100%;
                max-width: 800px;
            `;
            
            // –ü–æ–ª—É—á–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä–µ–∫–ª–∞–º—ã –∏–∑ localStorage
            const adStats = JSON.parse(localStorage.getItem('adStats') || '{}');
            const currentPeriod = adStats.currentPeriod || 'all';
            
            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º
            const statsByPeriod = {
                day: { views: 156, clicks: 12, subscriptions: 3 },
                week: { views: 1089, clicks: 89, subscriptions: 23 },
                month: { views: 4567, clicks: 345, subscriptions: 89 },
                year: { views: 23456, clicks: 1876, subscriptions: 456 },
                all: { views: 45678, clicks: 3456, subscriptions: 789 }
            };
            
            const currentStats = statsByPeriod[currentPeriod];
            
            content.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                    <h2 style="margin: 0; color: #333; font-size: 24px;">üìä –†–µ–∫–ª–∞–º–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>
                    <button onclick="this.closest('.modal').remove()" style="
                        background: #dc3545;
                        color: white;
                        border: none;
                        border-radius: 50%;
                        width: 40px;
                        height: 40px;
                        cursor: pointer;
                        font-size: 18px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                    ">√ó</button>
                </div>
                
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
                <div style="background: #f8f9fa; border-radius: 15px; padding: 20px; margin-bottom: 30px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3 style="margin: 0; color: #333;">üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                        <select id="periodSelect" onchange="updateStats(this.value)" style="padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
                            <option value="day" ${currentPeriod === 'day' ? 'selected' : ''}>–ó–∞ –¥–µ–Ω—å</option>
                            <option value="week" ${currentPeriod === 'week' ? 'selected' : ''}>–ó–∞ –Ω–µ–¥–µ–ª—é</option>
                            <option value="month" ${currentPeriod === 'month' ? 'selected' : ''}>–ó–∞ –º–µ—Å—è—Ü</option>
                            <option value="year" ${currentPeriod === 'year' ? 'selected' : ''}>–ó–∞ –≥–æ–¥</option>
                            <option value="all" ${currentPeriod === 'all' ? 'selected' : ''}>–ó–∞ –≤—Å–µ –≤—Ä–µ–º—è</option>
                        </select>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                        <div style="text-align: center; background: white; padding: 15px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <div style="font-size: 24px; color: #007bff; font-weight: bold;">${currentStats.views}</div>
                            <div style="font-size: 14px; color: #666;">–ü—Ä–æ—Å–º–æ—Ç—Ä—ã</div>
                        </div>
                        <div style="text-align: center; background: white; padding: 15px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <div style="font-size: 24px; color: #28a745; font-weight: bold;">${currentStats.clicks}</div>
                            <div style="font-size: 14px; color: #666;">–ü–µ—Ä–µ—Ö–æ–¥—ã</div>
                        </div>
                        <div style="text-align: center; background: white; padding: 15px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                            <div style="font-size: 24px; color: #ffc107; font-weight: bold;">${currentStats.subscriptions}</div>
                            <div style="font-size: 14px; color: #666;">–ü–æ–¥–ø–∏—Å–∫–∏</div>
                        </div>
                    </div>
                </div>
                
                <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥–∞ -->
                <div style="background: #f8f9fa; border-radius: 15px; padding: 20px; margin-bottom: 30px;">
                    <h3 style="margin: 0 0 20px 0; color: #333;">üéØ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥–∞</h3>
                    <div style="display: grid; gap: 15px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; background: white; padding: 15px; border-radius: 10px;">
                            <span style="font-weight: 500;">–í–æ–∑—Ä–∞—Å—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞</span>
                            <select id="ageGroup" style="padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
                                <option value="all">–í—Å–µ –≤–æ–∑—Ä–∞—Å—Ç—ã</option>
                                <option value="18-25">18-25 –ª–µ—Ç</option>
                                <option value="26-35">26-35 –ª–µ—Ç</option>
                                <option value="36-45">36-45 –ª–µ—Ç</option>
                                <option value="46+">46+ –ª–µ—Ç</option>
                            </select>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; background: white; padding: 15px; border-radius: 10px;">
                            <span style="font-weight: 500;">–ü–æ–ª</span>
                            <select id="gender" style="padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
                                <option value="all">–í—Å–µ</option>
                                <option value="male">–ú—É–∂—Å–∫–æ–π</option>
                                <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
                            </select>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; background: white; padding: 15px; border-radius: 10px;">
                            <span style="font-weight: 500;">–ì–µ–æ–≥—Ä–∞—Ñ–∏—è</span>
                            <select id="geography" style="padding: 8px; border: 1px solid #ddd; border-radius: 5px;">
                                <option value="all">–í—Å–µ —Ä–µ–≥–∏–æ–Ω—ã</option>
                                <option value="russia">–†–æ—Å—Å–∏—è</option>
                                <option value="ukraine">–£–∫—Ä–∞–∏–Ω–∞</option>
                                <option value="belarus">–ë–µ–ª–∞—Ä—É—Å—å</option>
                                <option value="kazakhstan">–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω</option>
                            </select>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; background: white; padding: 15px; border-radius: 10px;">
                            <span style="font-weight: 500;">–ë—é–¥–∂–µ—Ç –≤ –¥–µ–Ω—å</span>
                            <input type="number" id="dailyBudget" placeholder="1000" style="padding: 8px; border: 1px solid #ddd; border-radius: 5px; width: 100px;">
                        </div>
                    </div>
                </div>
                
                <!-- –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∫–ª–∞–º—ã -->
                <div style="background: #f8f9fa; border-radius: 15px; padding: 20px; margin-bottom: 30px;">
                    <h3 style="margin: 0 0 20px 0; color: #333;">üìù –°–æ–∑–¥–∞—Ç—å —Ä–µ–∫–ª–∞–º—É</h3>
                    <div style="display: grid; gap: 15px;">
                        <textarea id="adDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–≤–æ–∏–º–∏ —Å–ª–æ–≤–∞–º–∏" style="padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; min-height: 100px; resize: vertical;"></textarea>
                        <input type="url" id="adLink" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ–µ–∫—Ç –¥–ª—è –∫–Ω–æ–ø–∫–∏ –≤–Ω–∏–∑—É —Ä–æ–ª–∏–∫–∞" style="padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 16px;">
                        <div style="display: flex; gap: 10px;">
                            <input type="file" id="adVideo" accept="video/*" style="flex: 1; padding: 8px; border: 1px solid #ddd; border-radius: 8px;">
                            <button onclick="createAd()" style="
                                background: #007bff;
                                color: white;
                                border: none;
                                padding: 12px 24px;
                                border-radius: 8px;
                                cursor: pointer;
                                font-size: 16px;
                                font-weight: 500;
                            ">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ</button>
                        </div>
                    </div>
                </div>
                
                <!-- –†–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ -->
                <div style="background: #f8f9fa; border-radius: 15px; padding: 20px;">
                    <h3 style="margin: 0 0 20px 0; color: #333;">üìã –ú–æ–∏ –∫–∞–º–ø–∞–Ω–∏–∏</h3>
                    <div id="campaignsList" style="display: grid; gap: 15px;">
                        <div style="background: white; padding: 15px; border-radius: 10px; border-left: 4px solid #ffc107;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px;">
                                <h4 style="margin: 0; color: #333;">–ù–æ–≤–∞—è –∫–∞–º–ø–∞–Ω–∏—è #1</h4>
                                <span style="background: #ffc107; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px;">–ù–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏</span>
                            </div>
                            <p style="margin: 0 0 10px 0; color: #666; font-size: 14px;">–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–≤–æ–∏–º–∏ —Å–ª–æ–≤–∞–º–∏...</p>
                            <div style="display: flex; gap: 15px; font-size: 12px; color: #666;">
                                <span>üìÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 15.12.2024</span>
                                <span>‚è≥ –û–∂–∏–¥–∞–µ—Ç –º–æ–¥–µ—Ä–∞—Ü–∏–∏</span>
                            </div>
                        </div>
                        <div style="background: white; padding: 15px; border-radius: 10px; border-left: 4px solid #28a745;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px;">
                                <h4 style="margin: 0; color: #333;">–û–¥–æ–±—Ä–µ–Ω–Ω–∞—è –∫–∞–º–ø–∞–Ω–∏—è</h4>
                                <span style="background: #28a745; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px;">–ê–∫—Ç–∏–≤–Ω–∞</span>
                            </div>
                            <p style="margin: 0 0 10px 0; color: #666; font-size: 14px;">–ü—Ä–∏–º–µ—Ä –æ–¥–æ–±—Ä–µ–Ω–Ω–æ–π —Ä–µ–∫–ª–∞–º–Ω–æ–π –∫–∞–º–ø–∞–Ω–∏–∏</p>
                            <div style="display: flex; gap: 15px; font-size: 12px; color: #666;">
                                <span>üëÅÔ∏è 1,234 –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</span>
                                <span>üëÜ 45 –ø–µ—Ä–µ—Ö–æ–¥–æ–≤</span>
                                <span>üìä <button onclick="showCampaignStats('campaign1')" style="background: none; border: none; color: #007bff; cursor: pointer; text-decoration: underline;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button></span>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            window.updateStats = function(period) {
                const statsByPeriod = {
                    day: { views: 156, clicks: 12, subscriptions: 3 },
                    week: { views: 1089, clicks: 89, subscriptions: 23 },
                    month: { views: 4567, clicks: 345, subscriptions: 89 },
                    year: { views: 23456, clicks: 1876, subscriptions: 456 },
                    all: { views: 45678, clicks: 3456, subscriptions: 789 }
                };
                
                const stats = statsByPeriod[period];
                const statElements = content.querySelectorAll('.stat-value');
                if (statElements.length >= 3) {
                    statElements[0].textContent = stats.views;
                    statElements[1].textContent = stats.clicks;
                    statElements[2].textContent = stats.subscriptions;
                }
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥
                const adStats = JSON.parse(localStorage.getItem('adStats') || '{}');
                adStats.currentPeriod = period;
                localStorage.setItem('adStats', JSON.stringify(adStats));
            };
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–∞–º–ø–∞–Ω–∏–∏
            window.showCampaignStats = function(campaignId) {
                const statsModal = document.createElement('div');
                statsModal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0,0,0,0.8);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 10001;
                    padding: 20px;
                    box-sizing: border-box;
                `;
                
                const statsContent = document.createElement('div');
                statsContent.style.cssText = `
                    background: white;
                    border-radius: 15px;
                    padding: 25px;
                    max-width: 500px;
                    width: 100%;
                    box-shadow: 0 20px 40px rgba(0,0,0,0.3);
                `;
                
                statsContent.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3 style="margin: 0; color: #333;">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–∞–º–ø–∞–Ω–∏–∏</h3>
                        <button onclick="this.closest('.modal').remove()" style="
                            background: #dc3545;
                            color: white;
                            border: none;
                            border-radius: 50%;
                            width: 30px;
                            height: 30px;
                            cursor: pointer;
                            font-size: 16px;
                        ">√ó</button>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 20px;">
                        <div style="text-align: center; background: #f8f9fa; padding: 15px; border-radius: 10px;">
                            <div style="font-size: 20px; color: #007bff; font-weight: bold;">1,234</div>
                            <div style="font-size: 12px; color: #666;">–ü—Ä–æ—Å–º–æ—Ç—Ä—ã</div>
                        </div>
                        <div style="text-align: center; background: #f8f9fa; padding: 15px; border-radius: 10px;">
                            <div style="font-size: 20px; color: #28a745; font-weight: bold;">45</div>
                            <div style="font-size: 12px; color: #666;">–ü–µ—Ä–µ—Ö–æ–¥—ã</div>
                        </div>
                        <div style="text-align: center; background: #f8f9fa; padding: 15px; border-radius: 10px;">
                            <div style="font-size: 20px; color: #ffc107; font-weight: bold;">12</div>
                            <div style="font-size: 12px; color: #666;">–ü–æ–¥–ø–∏—Å–∫–∏</div>
                        </div>
                    </div>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 10px;">
                        <div style="margin-bottom: 10px;"><strong>CTR:</strong> 3.6%</div>
                        <div style="margin-bottom: 10px;"><strong>–ö–æ–Ω–≤–µ—Ä—Å–∏—è:</strong> 26.7%</div>
                        <div><strong>–°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞ –ø–µ—Ä–µ—Ö–æ–¥:</strong> 22 ‚ÇΩ</div>
                    </div>
                `;
                
                statsModal.className = 'modal';
                statsModal.appendChild(statsContent);
                document.body.appendChild(statsModal);
            };
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∫–ª–∞–º—ã
            window.createAd = function() {
                const description = document.getElementById('adDescription').value;
                const link = document.getElementById('adLink').value;
                const video = document.getElementById('adVideo').files[0];
                
                if (!description || !link) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ —Å—Å—ã–ª–∫—É');
                    return;
                }
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: #28a745;
                    color: white;
                    padding: 15px 20px;
                    border-radius: 10px;
                    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                    z-index: 10002;
                    animation: slideInRight 0.3s ease-out;
                `;
                notification.innerHTML = `
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span style="font-size: 20px;">‚úÖ</span>
                        <div>
                            <div style="font-weight: 600;">–†–µ–∫–ª–∞–º–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!</div>
                            <div style="font-size: 14px; opacity: 0.9;">–û–∂–∏–¥–∞–π—Ç–µ –æ—Ç–≤–µ—Ç–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</div>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 5000);
                
                // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
                document.getElementById('adDescription').value = '';
                document.getElementById('adLink').value = '';
                document.getElementById('adVideo').value = '';
                
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä
                console.log('–†–µ–∫–ª–∞–º–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–µ:', { description, link, video });
            };
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
        function showHistory() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                padding: 20px;
                box-sizing: border-box;
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
                color: white;
                padding: 30px;
                border-radius: 25px;
                max-width: 90%;
                max-height: 80%;
                overflow-y: auto;
                box-shadow: 0 15px 40px rgba(0,0,0,0.5);
                font-family: Arial, sans-serif;
                text-align: center;
            `;
            
            // –ü–æ–ª—É—á–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –∏–∑ localStorage
            const history = JSON.parse(localStorage.getItem('tarotHistory') || '[]');
            
            content.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <h2 style="margin: 0; font-size: 24px;">üìã –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤</h2>
                    <p style="margin: 10px 0 0 0; font-size: 16px; opacity: 0.9;">–í—Å–µ –≤–∞—à–∏ –≥–∞–¥–∞–Ω–∏—è –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</p>
                </div>
                <div style="text-align: left; max-height: 400px; overflow-y: auto;">
                    ${history.length === 0 ? 
                        '<div style="text-align: center; padding: 40px; color: #bdc3c7;"><p>üìù –ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞</p><p>–ù–∞—á–Ω–∏—Ç–µ –≥–∞–¥–∞–Ω–∏–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–¥–µ—Å—å</p></div>' :
                        history.map((item, index) => `
                            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 15px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                    <h4 style="margin: 0; color: #3498db;">${item.spreadName}</h4>
                                    <span style="font-size: 12px; color: #bdc3c7;">${new Date(item.timestamp).toLocaleString()}</span>
                                </div>
                                <div style="margin-bottom: 10px;">
                                    <strong>‚ùì –í–æ–ø—Ä–æ—Å:</strong> ${item.question}
                                </div>
                                <div style="margin-bottom: 10px;">
                                    <strong>üé¥ –ö–∞—Ä—Ç—ã:</strong> ${item.cards.map(card => card.name).join(', ')}
                                </div>
                                <div style="background: rgba(0,0,0,0.2); padding: 10px; border-radius: 10px;">
                                    <strong>üîÆ –†–µ–∑—É–ª—å—Ç–∞—Ç:</strong><br>
                                    ${item.result}
                                </div>
                            </div>
                        `).join('')
                    }
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button onclick="this.closest('.modal').remove()" style="
                        background: rgba(255,255,255,0.2);
                        border: 2px solid rgba(255,255,255,0.5);
                        color: white;
                        padding: 12px 30px;
                        border-radius: 25px;
                        cursor: pointer;
                        font-size: 16px;
                        font-weight: 600;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                       onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                        ‚ú® –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                </div>
            `;
            
            modal.className = 'modal';
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            modal.onclick = function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            };
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –¥—Ä—É–∑–µ–π –∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
        function showFriends() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                padding: 20px;
                box-sizing: border-box;
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
                color: white;
                padding: 30px;
                border-radius: 25px;
                text-align: center;
                max-width: 500px;
                width: 100%;
                max-height: 80vh;
                overflow-y: auto;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
            `;
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
            const userId = localStorage.getItem('userId') || Math.random().toString(36).substr(2, 9);
            localStorage.setItem('userId', userId);
            const referralLink = `https://t.me/your_bot?start=ref_${userId}`;
            
            // –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã—Ö –¥—Ä—É–∑–µ–π
            const invitedFriends = JSON.parse(localStorage.getItem('invitedFriends') || '[]');
            
            content.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <h2 style="margin: 0; font-size: 24px;">üë• –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–∑–µ–π</h2>
                    <p style="margin: 10px 0 0 0; font-size: 16px; opacity: 0.9;">–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –º–æ–Ω–µ—Ç—ã –∑–∞ –∫–∞–∂–¥–æ–≥–æ –¥—Ä—É–≥–∞!</p>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h3 style="margin: 0 0 15px 0; font-size: 18px;">üí∞ –ù–∞–≥—Ä–∞–¥—ã</h3>
                    <div style="text-align: left;">
                        <div style="margin-bottom: 10px;">‚Ä¢ –ó–∞ –∫–∞–∂–¥–æ–≥–æ –¥—Ä—É–≥–∞: <strong>100 –º–æ–Ω–µ—Ç</strong></div>
                        <div style="margin-bottom: 10px;">‚Ä¢ –î—Ä—É–≥ –ø–æ–ª—É—á–∞–µ—Ç: <strong>50 –º–æ–Ω–µ—Ç</strong></div>
                        <div>‚Ä¢ –ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ –¥—Ä—É–∑–µ–π: <strong>${invitedFriends.length}</strong></div>
                    </div>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h3 style="margin: 0 0 15px 0; font-size: 18px;">üîó –í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞</h3>
                    <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px; margin-bottom: 15px; word-break: break-all; font-family: monospace; font-size: 14px;">
                        ${referralLink}
                    </div>
                    <button onclick="copyReferralLink('${referralLink}')" style="
                        background: rgba(255,255,255,0.2);
                        border: 2px solid rgba(255,255,255,0.5);
                        color: white;
                        padding: 10px 20px;
                        border-radius: 20px;
                        cursor: pointer;
                        font-size: 14px;
                        font-weight: 600;
                        transition: all 0.3s ease;
                        margin-right: 10px;
                    " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                       onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                        üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
                    </button>
                    <button onclick="shareReferralLink('${referralLink}')" style="
                        background: rgba(255,255,255,0.2);
                        border: 2px solid rgba(255,255,255,0.5);
                        color: white;
                        padding: 10px 20px;
                        border-radius: 20px;
                        cursor: pointer;
                        font-size: 14px;
                        font-weight: 600;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                       onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                        üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
                    </button>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h3 style="margin: 0 0 15px 0; font-size: 18px;">üë• –ü—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã–µ –¥—Ä—É–∑—å—è</h3>
                    <div style="text-align: left; max-height: 200px; overflow-y: auto;">
                        ${invitedFriends.length === 0 ? 
                            '<div style="text-align: center; padding: 20px; color: rgba(255,255,255,0.7);">–ü–æ–∫–∞ –Ω–∏–∫—Ç–æ –Ω–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è</div>' :
                            invitedFriends.map((friend, index) => `
                                <div style="background: rgba(0,0,0,0.2); padding: 10px; border-radius: 10px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center;">
                                    <div>
                                        <div style="font-weight: 600;">üë§ ${friend.name || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å'}</div>
                                        <div style="font-size: 12px; opacity: 0.8;">${new Date(friend.date).toLocaleDateString()}</div>
                                    </div>
                                    <div style="color: #f39c12; font-weight: 600;">+100 –º–æ–Ω–µ—Ç</div>
                                </div>
                            `).join('')
                        }
                    </div>
                </div>
                
                <div style="text-align: center;">
                    <button onclick="this.closest('.modal').remove()" style="
                        background: rgba(255,255,255,0.2);
                        border: 2px solid rgba(255,255,255,0.5);
                        color: white;
                        padding: 12px 30px;
                        border-radius: 25px;
                        cursor: pointer;
                        font-size: 16px;
                        font-weight: 600;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                       onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                        ‚ú® –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                </div>
            `;
            
            modal.className = 'modal';
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            modal.onclick = function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            };
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —Ü–µ–Ω—Ç—Ä–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showNotificationCenter() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                padding: 20px;
                box-sizing: border-box;
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
                color: white;
                padding: 30px;
                border-radius: 25px;
                text-align: center;
                max-width: 500px;
                width: 100%;
                max-height: 80vh;
                overflow-y: auto;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
            `;
            
            // –ü–æ–ª—É—á–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏–∑ localStorage
            const notifications = JSON.parse(localStorage.getItem('notifications') || '[]');
            
            content.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <h2 style="margin: 0; font-size: 24px;">üîî –¶–µ–Ω—Ç—Ä —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</h2>
                    <p style="margin: 10px 0 0 0; font-size: 16px; opacity: 0.9;">–ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</p>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h3 style="margin: 0 0 15px 0; font-size: 18px;">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <div style="text-align: left;">
                        <div style="margin-bottom: 10px;">‚Ä¢ –í—Å–µ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π: <strong>${notifications.length}</strong></div>
                        <div style="margin-bottom: 10px;">‚Ä¢ –ù–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö: <strong>${notifications.filter(n => !n.read).length}</strong></div>
                        <div>‚Ä¢ –ü–æ—Å–ª–µ–¥–Ω–µ–µ: <strong>${notifications.length > 0 ? new Date(notifications[0].timestamp).toLocaleString() : '–ù–µ—Ç'}</strong></div>
                    </div>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h3 style="margin: 0 0 15px 0; font-size: 18px;">üìã –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                    <div style="text-align: left; max-height: 300px; overflow-y: auto;">
                        ${notifications.length === 0 ? 
                            '<div style="text-align: center; padding: 20px; color: rgba(255,255,255,0.7);">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</div>' :
                            notifications.map((notification, index) => `
                                <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px; margin-bottom: 10px; border-left: 4px solid ${notification.type === 'success' ? '#2ecc71' : notification.type === 'error' ? '#e74c3c' : '#f39c12'};">
                                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">
                                        <div style="font-weight: 600; font-size: 16px;">${notification.title}</div>
                                        <div style="font-size: 12px; opacity: 0.8;">${new Date(notification.timestamp).toLocaleString()}</div>
                                    </div>
                                    <div style="font-size: 14px; opacity: 0.9; line-height: 1.4;">${notification.message}</div>
                                    ${notification.reward ? `<div style="color: #f39c12; font-weight: 600; margin-top: 5px;">+${notification.reward} –º–æ–Ω–µ—Ç</div>` : ''}
                                </div>
                            `).join('')
                        }
                    </div>
                </div>
                
                <div style="text-align: center;">
                    <button onclick="clearAllNotifications()" style="
                        background: rgba(231, 76, 60, 0.8);
                        border: 2px solid #e74c3c;
                        color: white;
                        padding: 10px 20px;
                        border-radius: 20px;
                        cursor: pointer;
                        font-size: 14px;
                        font-weight: 600;
                        transition: all 0.3s ease;
                        margin-right: 10px;
                    " onmouseover="this.style.background='rgba(231, 76, 60, 1)'" 
                       onmouseout="this.style.background='rgba(231, 76, 60, 0.8)'">
                        üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ
                    </button>
                    <button onclick="this.closest('.modal').remove()" style="
                        background: rgba(255,255,255,0.2);
                        border: 2px solid rgba(255,255,255,0.5);
                        color: white;
                        padding: 12px 30px;
                        border-radius: 25px;
                        cursor: pointer;
                        font-size: 16px;
                        font-weight: 600;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                       onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                        ‚ú® –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                </div>
            `;
            
            modal.className = 'modal';
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            modal.onclick = function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            };
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∏–≥—Ä
        function showGamesHistory() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                padding: 20px;
                box-sizing: border-box;
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: linear-gradient(135deg, #e67e22 0%, #d35400 100%);
                color: white;
                padding: 30px;
                border-radius: 25px;
                text-align: center;
                max-width: 500px;
                width: 100%;
                max-height: 80vh;
                overflow-y: auto;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
            `;
            
            // –ü–æ–ª—É—á–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –∏–≥—Ä –∏–∑ localStorage
            const gamesHistory = JSON.parse(localStorage.getItem('gamesHistory') || '[]');
            
            // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            const totalGames = gamesHistory.length;
            const wins = gamesHistory.filter(game => game.result === 'win').length;
            const losses = gamesHistory.filter(game => game.result === 'loss').length;
            const totalSpent = gamesHistory.reduce((sum, game) => sum + (game.cost || 0), 0);
            const totalWon = gamesHistory.reduce((sum, game) => sum + (game.reward || 0), 0);
            const netProfit = totalWon - totalSpent;
            
            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∏–≥—Ä–∞–º
            const gameStats = {};
            gamesHistory.forEach(game => {
                if (!gameStats[game.gameName]) {
                    gameStats[game.gameName] = { played: 0, won: 0, spent: 0, earned: 0 };
                }
                gameStats[game.gameName].played++;
                if (game.result === 'win') gameStats[game.gameName].won++;
                gameStats[game.gameName].spent += game.cost || 0;
                gameStats[game.gameName].earned += game.reward || 0;
            });
            
            content.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <h2 style="margin: 0; font-size: 24px;">üéÆ –ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä</h2>
                    <p style="margin: 10px 0 0 0; font-size: 16px; opacity: 0.9;">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä</p>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h3 style="margin: 0 0 15px 0; font-size: 18px;">üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; text-align: left;">
                        <div>
                            <div style="margin-bottom: 8px;">‚Ä¢ –ò–≥—Ä —Å—ã–≥—Ä–∞–Ω–æ: <strong>${totalGames}</strong></div>
                            <div style="margin-bottom: 8px;">‚Ä¢ –ü–æ–±–µ–¥: <strong style="color: #2ecc71;">${wins}</strong></div>
                            <div>‚Ä¢ –ü–æ—Ä–∞–∂–µ–Ω–∏–π: <strong style="color: #e74c3c;">${losses}</strong></div>
                        </div>
                        <div>
                            <div style="margin-bottom: 8px;">‚Ä¢ –ü–æ—Ç—Ä–∞—á–µ–Ω–æ: <strong style="color: #e74c3c;">${totalSpent}</strong></div>
                            <div style="margin-bottom: 8px;">‚Ä¢ –í—ã–∏–≥—Ä–∞–Ω–æ: <strong style="color: #2ecc71;">${totalWon}</strong></div>
                            <div>‚Ä¢ –ü—Ä–∏–±—ã–ª—å: <strong style="color: ${netProfit >= 0 ? '#2ecc71' : '#e74c3c'};">${netProfit >= 0 ? '+' : ''}${netProfit}</strong></div>
                        </div>
                    </div>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h3 style="margin: 0 0 15px 0; font-size: 18px;">üéØ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∏–≥—Ä–∞–º</h3>
                    <div style="text-align: left; max-height: 200px; overflow-y: auto;">
                        ${Object.keys(gameStats).length === 0 ? 
                            '<div style="text-align: center; padding: 20px; color: rgba(255,255,255,0.7);">–ò–≥—Ä—ã –ø–æ–∫–∞ –Ω–µ –∏–≥—Ä–∞–ª–∏—Å—å</div>' :
                            Object.entries(gameStats).map(([gameName, stats]) => `
                                <div style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 10px; margin-bottom: 10px;">
                                    <div style="font-weight: 600; margin-bottom: 8px;">${gameName}</div>
                                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; font-size: 14px;">
                                        <div>–°—ã–≥—Ä–∞–Ω–æ: <strong>${stats.played}</strong></div>
                                        <div>–ü–æ–±–µ–¥: <strong style="color: #2ecc71;">${stats.won}</strong></div>
                                        <div>–ü–æ—Ç—Ä–∞—á–µ–Ω–æ: <strong style="color: #e74c3c;">${stats.spent}</strong></div>
                                        <div>–í—ã–∏–≥—Ä–∞–Ω–æ: <strong style="color: #2ecc71;">${stats.earned}</strong></div>
                                    </div>
                                </div>
                            `).join('')
                        }
                    </div>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                    <h3 style="margin: 0 0 15px 0; font-size: 18px;">üìã –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–≥—Ä—ã</h3>
                    <div style="text-align: left; max-height: 200px; overflow-y: auto;">
                        ${gamesHistory.length === 0 ? 
                            '<div style="text-align: center; padding: 20px; color: rgba(255,255,255,0.7);">–ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä –ø—É—Å—Ç–∞</div>' :
                            gamesHistory.slice(0, 10).map((game, index) => `
                                <div style="background: rgba(0,0,0,0.2); padding: 12px; border-radius: 10px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center;">
                                    <div>
                                        <div style="font-weight: 600; font-size: 14px;">${game.gameName}</div>
                                        <div style="font-size: 12px; opacity: 0.8;">${new Date(game.timestamp).toLocaleString()}</div>
                                    </div>
                                    <div style="text-align: right;">
                                        <div style="color: ${game.result === 'win' ? '#2ecc71' : '#e74c3c'}; font-weight: 600; font-size: 14px;">
                                            ${game.result === 'win' ? 'üèÜ –ü–æ–±–µ–¥–∞' : 'üíî –ü–æ—Ä–∞–∂–µ–Ω–∏–µ'}
                                        </div>
                                        <div style="font-size: 12px; opacity: 0.8;">
                                            ${game.reward ? `+${game.reward}` : `-${game.cost}`} –º–æ–Ω–µ—Ç
                                        </div>
                                    </div>
                                </div>
                            `).join('')
                        }
                    </div>
                </div>
                
                <div style="text-align: center;">
                    <button onclick="clearGamesHistory()" style="
                        background: rgba(231, 76, 60, 0.8);
                        border: 2px solid #e74c3c;
                        color: white;
                        padding: 10px 20px;
                        border-radius: 20px;
                        cursor: pointer;
                        font-size: 14px;
                        font-weight: 600;
                        transition: all 0.3s ease;
                        margin-right: 10px;
                    " onmouseover="this.style.background='rgba(231, 76, 60, 1)'" 
                       onmouseout="this.style.background='rgba(231, 76, 60, 0.8)'">
                        üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
                    </button>
                    <button onclick="this.closest('.modal').remove()" style="
                        background: rgba(255,255,255,0.2);
                        border: 2px solid rgba(255,255,255,0.5);
                        color: white;
                        padding: 12px 30px;
                        border-radius: 25px;
                        cursor: pointer;
                        font-size: 16px;
                        font-weight: 600;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                       onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                        ‚ú® –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                </div>
            `;
            
            modal.className = 'modal';
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            modal.onclick = function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            };
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏
        function copyReferralLink(link) {
            if (navigator.clipboard) {
                navigator.clipboard.writeText(link).then(() => {
                    showNotification('üîó –°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!', 'success');
                }).catch(() => {
                    showNotification('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É', 'error');
                });
            } else {
                // Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
                const textArea = document.createElement('textarea');
                textArea.value = link;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    showNotification('üîó –°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!', 'success');
                } catch (err) {
                    showNotification('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É', 'error');
                }
                document.body.removeChild(textArea);
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–æ–π
        function shareReferralLink(link) {
            if (navigator.share) {
                navigator.share({
                    title: '–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ –¢–∞—Ä–æ-–±–æ—Ç—É!',
                    text: '–ü–æ–ø—Ä–æ–±—É–π –≥–∞–¥–∞–Ω–∏—è –Ω–∞ –∫–∞—Ä—Ç–∞—Ö –¢–∞—Ä–æ –∏ –ø–æ–ª—É—á–∏ 50 –º–æ–Ω–µ—Ç!',
                    url: link
                }).then(() => {
                    showNotification('üì§ –°—Å—ã–ª–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!', 'success');
                }).catch(() => {
                    showNotification('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–µ–ª–∏—Ç—å—Å—è', 'error');
                });
            } else {
                // Fallback - –∫–æ–ø–∏—Ä—É–µ–º –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
                copyReferralLink(link);
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
        function addNotification(title, message, type = 'info', reward = null) {
            const notifications = JSON.parse(localStorage.getItem('notifications') || '[]');
            
            notifications.unshift({
                timestamp: Date.now(),
                title: title,
                message: message,
                type: type,
                reward: reward,
                read: false
            });
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–æ 50
            if (notifications.length > 50) {
                notifications.splice(50);
            }
            
            localStorage.setItem('notifications', JSON.stringify(notifications));
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
            updateNotificationCount();
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function updateNotificationCount() {
            const notifications = JSON.parse(localStorage.getItem('notifications') || '[]');
            const unreadCount = notifications.filter(n => !n.read).length;
            const countElement = document.getElementById('notificationCount');
            if (countElement) {
                countElement.textContent = unreadCount;
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –≤—Å–µ—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function clearAllNotifications() {
            localStorage.removeItem('notifications');
            showNotification('üóëÔ∏è –í—Å–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω—ã', 'success');
            updateNotificationCount();
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ –≤ –∏—Å—Ç–æ—Ä–∏—é –∏–≥—Ä
        function addGameToHistory(gameName, result, cost, reward) {
            const gamesHistory = JSON.parse(localStorage.getItem('gamesHistory') || '[]');
            
            gamesHistory.unshift({
                timestamp: Date.now(),
                gameName: gameName,
                result: result, // 'win' –∏–ª–∏ 'loss'
                cost: cost,
                reward: reward
            });
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –¥–æ 100 –∑–∞–ø–∏—Å–µ–π
            if (gamesHistory.length > 100) {
                gamesHistory.splice(100);
            }
            
            localStorage.setItem('gamesHistory', JSON.stringify(gamesHistory));
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ –∏–≥—Ä
        function clearGamesHistory() {
            localStorage.removeItem('gamesHistory');
            showNotification('üóëÔ∏è –ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä –æ—á–∏—â–µ–Ω–∞', 'success');
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
        function handleReferral() {
            const urlParams = new URLSearchParams(window.location.search);
            const refCode = urlParams.get('ref');
            
            if (refCode) {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –±—ã–ª –ª–∏ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω —ç—Ç–æ—Ç —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥
                const processedRefs = JSON.parse(localStorage.getItem('processedRefs') || '[]');
                if (!processedRefs.includes(refCode)) {
                    // –î–æ–±–∞–≤–ª—è–µ–º –±–æ–Ω—É—Å –∑–∞ –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ
                    addCoins(50);
                    showNotification('üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –í—ã –ø–æ–ª—É—á–∏–ª–∏ 50 –º–æ–Ω–µ—Ç –∑–∞ –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ!', 'success');
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–µ—Ñ–µ—Ä–∞–ª–µ
                    const referrerId = refCode.replace('ref_', '');
                    const invitedFriends = JSON.parse(localStorage.getItem('invitedFriends') || '[]');
                    invitedFriends.push({
                        id: referrerId,
                        name: '–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å',
                        date: Date.now()
                    });
                    localStorage.setItem('invitedFriends', JSON.stringify(invitedFriends));
                    
                    // –û—Ç–º–µ—á–∞–µ–º –∫–æ–¥ –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π
                    processedRefs.push(refCode);
                    localStorage.setItem('processedRefs', JSON.stringify(processedRefs));
                    
                    // –ù–∞–≥—Ä–∞–∂–¥–∞–µ–º —Ä–µ—Ñ–µ—Ä–µ—Ä–∞
                    const referrerFriends = JSON.parse(localStorage.getItem('referrerFriends') || '[]');
                    referrerFriends.push({
                        id: referrerId,
                        date: Date.now()
                    });
                    localStorage.setItem('referrerFriends', JSON.stringify(referrerFriends));
                }
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏
        function saveToHistory(spreadType, question, cards, result) {
            const history = JSON.parse(localStorage.getItem('tarotHistory') || '[]');
            const spreadInfo = getSpreadInfo(spreadType);
            
            history.unshift({
                timestamp: Date.now(),
                spreadType: spreadType,
                spreadName: spreadInfo.name,
                question: question,
                cards: cards,
                result: result
            });
            
            // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é 50 –∑–∞–ø–∏—Å—è–º–∏
            if (history.length > 50) {
                history.splice(50);
            }
            
            localStorage.setItem('tarotHistory', JSON.stringify(history));
            console.log('üìã –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞:', history.length, '–∑–∞–ø–∏—Å–µ–π');
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∫–ª–∞–º—ã
        function showAdUpload() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                padding: 20px;
                box-sizing: border-box;
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 30px;
                border-radius: 20px;
                max-width: 90%;
                max-height: 80%;
                overflow-y: auto;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                font-family: Arial, sans-serif;
            `;
            
            content.innerHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <h2 style="margin: 0; font-size: 24px;">üì§ –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∫–ª–∞–º—ã</h2>
                </div>
                <div style="margin-bottom: 20px;">
                    <p style="margin: 0 0 15px 0; font-size: 16px;">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª —Ä–µ–∫–ª–∞–º—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏:</p>
                    <input type="file" id="adFileInput" accept="image/*,video/*" style="
                        width: 100%;
                        padding: 10px;
                        border: 2px solid rgba(255,255,255,0.3);
                        border-radius: 10px;
                        background: rgba(255,255,255,0.1);
                        color: white;
                        font-size: 16px;
                        margin-bottom: 15px;
                    ">
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                        <h4 style="margin: 0 0 10px 0; font-size: 16px;">üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–µ–∫–ª–∞–º–µ:</h4>
                        <ul style="margin: 0; padding-left: 20px; font-size: 14px; line-height: 1.5;">
                            <li>–§–æ—Ä–º–∞—Ç: JPG, PNG, MP4, MOV</li>
                            <li>–†–∞–∑–º–µ—Ä: –¥–æ 10 –ú–ë</li>
                            <li>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–∏–¥–µ–æ: –¥–æ 30 —Å–µ–∫—É–Ω–¥</li>
                            <li>–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ: –º–∏–Ω–∏–º—É–º 720p</li>
                        </ul>
                    </div>
                </div>
                <div style="display: flex; gap: 15px; justify-content: center;">
                    <button onclick="uploadAd()" style="
                        background: rgba(255,255,255,0.2);
                        border: 2px solid white;
                        color: white;
                        padding: 12px 25px;
                        border-radius: 25px;
                        cursor: pointer;
                        font-size: 16px;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                       onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                        üì§ –ó–∞–≥—Ä—É–∑–∏—Ç—å
                    </button>
                    <button onclick="this.closest('.modal').remove()" style="
                        background: rgba(255,255,255,0.1);
                        border: 2px solid rgba(255,255,255,0.5);
                        color: white;
                        padding: 12px 25px;
                        border-radius: 25px;
                        cursor: pointer;
                        font-size: 16px;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='rgba(255,255,255,0.2)'" 
                       onmouseout="this.style.background='rgba(255,255,255,0.1)'">
                        ‚ùå –û—Ç–º–µ–Ω–∞
                    </button>
                </div>
            `;
            
            modal.className = 'modal';
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
            modal.onclick = function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            };
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∫–ª–∞–º—ã
        function uploadAd() {
            const fileInput = document.getElementById('adFileInput');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏!');
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (10 –ú–ë)
            const maxSize = 10 * 1024 * 1024; // 10 –ú–ë –≤ –±–∞–π—Ç–∞—Ö
            if (file.size > maxSize) {
                alert('‚ùå –§–∞–π–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π! –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 10 –ú–ë');
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø —Ñ–∞–π–ª–∞
            const allowedTypes = ['image/jpeg', 'image/png', 'video/mp4', 'video/quicktime'];
            if (!allowedTypes.includes(file.type)) {
                alert('‚ùå –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞! –†–∞–∑—Ä–µ—à–µ–Ω—ã: JPG, PNG, MP4, MOV');
                return;
            }
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            const modal = document.querySelector('.modal');
            if (modal) {
                modal.remove();
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ
            const successModal = document.createElement('div');
            successModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                padding: 20px;
                box-sizing: border-box;
            `;
            
            const successContent = document.createElement('div');
            successContent.style.cssText = `
                background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
                color: white;
                padding: 30px;
                border-radius: 20px;
                max-width: 90%;
                text-align: center;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                font-family: Arial, sans-serif;
            `;
            
            successContent.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <h2 style="margin: 0; font-size: 24px;">‚úÖ –†–µ–∫–ª–∞–º–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!</h2>
                </div>
                <div style="font-size: 16px; margin-bottom: 20px;">
                    <p>üìÅ –§–∞–π–ª: <strong>${file.name}</strong></p>
                    <p>üìè –†–∞–∑–º–µ—Ä: <strong>${(file.size / 1024 / 1024).toFixed(2)} –ú–ë</strong></p>
                    <p>üé¨ –¢–∏–ø: <strong>${file.type}</strong></p>
                </div>
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                    <p style="margin: 0; font-size: 14px;">
                        <strong>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</strong> –í –¥–µ–º–æ-–≤–µ—Ä—Å–∏–∏ —Ñ–∞–π–ª –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä. 
                        –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∫–ª–∞–º—ã.
                    </p>
                </div>
                <div style="text-align: center;">
                    <button onclick="this.closest('.modal').remove()" style="
                        background: rgba(255,255,255,0.2);
                        border: 2px solid white;
                        color: white;
                        padding: 12px 30px;
                        border-radius: 25px;
                        cursor: pointer;
                        font-size: 16px;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                       onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                        ‚ú® –ü–æ–Ω—è—Ç–Ω–æ
                    </button>
                </div>
            `;
            
            successModal.className = 'modal';
            successModal.appendChild(successContent);
            document.body.appendChild(successModal);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                if (successModal.parentNode) {
                    successModal.remove();
                }
            }, 5000);
            
            console.log('üì§ –†–µ–∫–ª–∞–º–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞:', file.name, file.size, file.type);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∞–ª–∞–Ω—Å–∞
        function initBalance() {
            const savedBalance = localStorage.getItem('userBalance');
            if (savedBalance) {
                // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –±–∞–ª–∞–Ω—Å–∞
                document.querySelectorAll('.balance-amount').forEach(element => {
                    element.textContent = savedBalance;
                });
                console.log('üí∞ –ë–∞–ª–∞–Ω—Å –∑–∞–≥—Ä—É–∂–µ–Ω –∏–∑ localStorage:', savedBalance);
            } else {
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
                const initialBalance = 1000;
                localStorage.setItem('userBalance', initialBalance.toString());
                document.querySelectorAll('.balance-amount').forEach(element => {
                    element.textContent = initialBalance;
                });
                console.log('üí∞ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å:', initialBalance);
            }
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
            const profileBalance = document.getElementById('profileBalance');
            if (profileBalance) {
                const currentBalance = getCurrentBalance();
                profileBalance.textContent = currentBalance;
            }
        }
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showNotification(title, message, type = 'info') {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤–∫–ª—é—á–µ–Ω—ã –ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            const notificationsEnabled = document.getElementById('notificationsEnabled');
            if (notificationsEnabled && !notificationsEnabled.checked) {
                console.log('üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–∫–ª—é—á–µ–Ω—ã');
                return;
            }
            
            // –°–æ–∑–¥–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px 20px;
                border-radius: 10px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                z-index: 10000;
                max-width: 90%;
                width: 300px;
                animation: slideInDown 0.3s ease-out;
                text-align: center;
            `;
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: space-between;">
                    <div>
                        <div style="font-weight: 600; margin-bottom: 5px;">${title}</div>
                        <div style="font-size: 14px; opacity: 0.9;">${message}</div>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" style="
                        background: none;
                        border: none;
                        color: white;
                        font-size: 18px;
                        cursor: pointer;
                        margin-left: 10px;
                    ">√ó</button>
                </div>
            `;
            
            // –î–æ–±–∞–≤–ª—è–µ–º CSS –∞–Ω–∏–º–∞—Ü–∏—é
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideInRight {
                    from {
                        transform: translateX(100%);
                        opacity: 0;
                    }
                    to {
                        transform: translateX(0);
                        opacity: 1;
                    }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(notification);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ–º —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.style.animation = 'slideInRight 0.3s ease-out reverse';
                    setTimeout(() => notification.remove(), 300);
                }
            }, 5000);
            
            console.log('üîî –ü–æ–∫–∞–∑–∞–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:', title, message);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã
        function toggleTheme() {
            console.log('üåô toggleTheme() –≤—ã–∑–≤–∞–Ω–∞');
            const darkThemeToggle = document.getElementById('darkThemeToggle');
            const body = document.body;
            
            console.log('üåô –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω:', darkThemeToggle);
            console.log('üåô –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è:', darkThemeToggle ? darkThemeToggle.checked : '–Ω–µ –Ω–∞–π–¥–µ–Ω');
            
            if (darkThemeToggle && darkThemeToggle.checked) {
                console.log('üåô –í–∫–ª—é—á–∞–µ–º —Ç–µ–º–Ω—É—é —Ç–µ–º—É');
                body.setAttribute('data-theme', 'dark');
                localStorage.setItem('darkTheme', 'enabled');
                showNotification('üåô –¢–µ–º–Ω–∞—è —Ç–µ–º–∞', '–¢–µ–º–Ω–∞—è —Ç–µ–º–∞ –≤–∫–ª—é—á–µ–Ω–∞', 'success');
            } else {
                console.log('‚òÄÔ∏è –í–∫–ª—é—á–∞–µ–º —Å–≤–µ—Ç–ª—É—é —Ç–µ–º—É');
                body.removeAttribute('data-theme');
                localStorage.setItem('darkTheme', 'disabled');
                showNotification('‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞', '–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ –≤–∫–ª—é—á–µ–Ω–∞', 'success');
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ–º—ã
        function initTheme() {
            console.log('üåô initTheme() –≤—ã–∑–≤–∞–Ω–∞');
            const darkTheme = localStorage.getItem('darkTheme');
            const darkThemeToggle = document.getElementById('darkThemeToggle');
            
            console.log('üåô –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–∞—è —Ç–µ–º–∞:', darkTheme);
            console.log('üåô –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω:', darkThemeToggle);
            
            if (darkTheme === 'enabled') {
                console.log('üåô –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–º–Ω—É—é —Ç–µ–º—É');
                document.body.setAttribute('data-theme', 'dark');
                if (darkThemeToggle) {
                    darkThemeToggle.checked = true;
                    console.log('üåô –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ true');
                }
            } else {
                console.log('‚òÄÔ∏è –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–≤–µ—Ç–ª—É—é —Ç–µ–º—É');
                document.body.removeAttribute('data-theme');
                if (darkThemeToggle) {
                    darkThemeToggle.checked = false;
                    console.log('‚òÄÔ∏è –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ false');
                }
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function initNotifications() {
            const notificationsEnabled = document.getElementById('notificationsEnabled');
            const savedSetting = localStorage.getItem('notificationsEnabled');
            
            if (savedSetting !== null) {
                notificationsEnabled.checked = savedSetting === 'true';
            }
        }
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –º–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –∏–≥—Ä
        
        // –ò–≥—Ä–∞: –ö—Ä–∏—Å—Ç–∞–ª—å–Ω—ã–π —à–∞—Ä
        function startCrystalBallGame() {
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫ –∏–≥—Ä
            const gamesPlayed = parseInt(localStorage.getItem('gamesPlayed')) || 0;
            localStorage.setItem('gamesPlayed', (gamesPlayed + 1).toString());
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
            if (gamesPlayed === 0) {
                unlockAchievement('first_game');
            }
            console.log('üîÆ –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã "–ö—Ä–∏—Å—Ç–∞–ª—å–Ω—ã–π —à–∞—Ä"');
            const cost = 15;
            const currentBalance = getCurrentBalance();
            
            if (currentBalance < cost) {
                showInsufficientBalance(cost, currentBalance);
                return;
            }
            
            // –°–æ–∑–¥–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–≥—Ä—ã
            const gameModal = document.createElement('div');
            gameModal.className = 'game-modal';
            gameModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;
            
            const gameContent = document.createElement('div');
            gameContent.style.cssText = `
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 40px;
                border-radius: 25px;
                text-align: center;
                max-width: 400px;
                width: 90%;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
                animation: slideInUp 0.5s ease-out;
            `;
            
            const colors = ['üî¥ –ö—Ä–∞—Å–Ω—ã–π', 'üîµ –°–∏–Ω–∏–π', 'üü¢ –ó–µ–ª–µ–Ω—ã–π', 'üü° –ñ–µ–ª—Ç—ã–π', 'üü£ –§–∏–æ–ª–µ—Ç–æ–≤—ã–π', 'üü† –û—Ä–∞–Ω–∂–µ–≤—ã–π'];
            
            gameContent.innerHTML = `
                <div style="font-size: 60px; margin-bottom: 20px; animation: float 2s ease-in-out infinite;">üîÆ</div>
                <h2 style="margin: 0 0 20px 0; font-size: 28px;">–ö—Ä–∏—Å—Ç–∞–ª—å–Ω—ã–π —à–∞—Ä</h2>
                <p style="margin: 0 0 30px 0; font-size: 16px; opacity: 0.9;">–í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∂–µ—Ç –∫—Ä–∏—Å—Ç–∞–ª–ª:</p>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 30px;">
                    ${colors.map((color, index) => `
                        <button class="color-choice" data-color="${index}" style="
                            background: rgba(255,255,255,0.2);
                            border: 2px solid rgba(255,255,255,0.3);
                            color: white;
                            padding: 15px;
                            border-radius: 15px;
                            cursor: pointer;
                            font-size: 16px;
                            transition: all 0.3s ease;
                        " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                           onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                            ${color}
                        </button>
                    `).join('')}
                </div>
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; margin-bottom: 5px;">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} –º–æ–Ω–µ—Ç</div>
                    <div style="font-size: 14px;">üí≥ –í–∞—à –±–∞–ª–∞–Ω—Å: ${currentBalance} –º–æ–Ω–µ—Ç</div>
                </div>
                <button onclick="this.closest('.game-modal').remove()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 12px 30px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 16px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    –û—Ç–º–µ–Ω–∞
                </button>
            `;
            
            gameModal.appendChild(gameContent);
            document.body.appendChild(gameModal);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ü–≤–µ—Ç–∞
            gameContent.querySelectorAll('.color-choice').forEach(button => {
                button.addEventListener('click', function() {
                    const selectedColor = parseInt(this.dataset.color);
                    deductCoins(cost);
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –∫—Ä–∏—Å—Ç–∞–ª—å–Ω–æ–≥–æ —à–∞—Ä–∞
                    gameContent.innerHTML = `
                        <div style="font-size: 80px; margin-bottom: 20px; animation: spin 2s linear infinite;">üîÆ</div>
                        <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ö—Ä–∏—Å—Ç–∞–ª–ª –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç...</h2>
                        <p style="margin: 0; font-size: 16px; opacity: 0.9;">–ú–∞–≥–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç...</p>
                    `;
                    
                    setTimeout(() => {
                        const randomColor = Math.floor(Math.random() * 6);
                        const isWin = selectedColor === randomColor;
                        const reward = isWin ? 30 : 0;
                        
                        gameContent.innerHTML = `
                            <div style="font-size: 60px; margin-bottom: 20px;">üîÆ</div>
                            <h2 style="margin: 0 0 20px 0; font-size: 24px;">${isWin ? 'üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!' : 'üòî –ù–µ —É–≥–∞–¥–∞–ª–∏'}</h2>
                            <div style="font-size: 48px; margin-bottom: 20px;">${colors[randomColor]}</div>
                            <p style="margin: 0 0 20px 0; font-size: 16px;">
                                ${isWin ? `–í—ã —É–≥–∞–¥–∞–ª–∏! –í—ã–∏–≥—Ä—ã—à: ${reward} –º–æ–Ω–µ—Ç` : '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!'}
                            </p>
                            <button onclick="this.closest('.game-modal').remove()" style="
                                background: rgba(255,255,255,0.2);
                                border: 2px solid white;
                                color: white;
                                padding: 12px 30px;
                                border-radius: 25px;
                                cursor: pointer;
                                font-size: 16px;
                            ">
                                –ó–∞–∫—Ä—ã—Ç—å
                            </button>
                        `;
                        
                        if (isWin) {
                            addCoins(reward);
                        }
                    }, 2000);
                });
            });
        }
        
        // –ò–≥—Ä–∞: –†—É–Ω—ã
        function startRunesGame() {
            console.log('·ö± –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã "–†—É–Ω—ã"');
            const cost = 20;
            const currentBalance = getCurrentBalance();
            
            if (currentBalance < cost) {
                showInsufficientBalance(cost, currentBalance);
                return;
            }
            
            const runes = [
                { symbol: '·ö†', name: '–§–µ—Ö—É', meaning: '–ë–æ–≥–∞—Ç—Å—Ç–≤–æ' },
                { symbol: '·ö¢', name: '–£—Ä—É–∑', meaning: '–°–∏–ª–∞' },
                { symbol: '·ö¶', name: '–¢—É—Ä–∏—Å–∞–∑', meaning: '–ì–∏–≥–∞–Ω—Ç' },
                { symbol: '·ö®', name: '–ê–Ω—Å—É–∑', meaning: '–ë–æ–≥' },
                { symbol: '·ö±', name: '–†–∞–π–¥–æ', meaning: '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ' },
                { symbol: '·ö≤', name: '–ö–µ–Ω–∞–∑', meaning: '–§–∞–∫–µ–ª' }
            ];
            
            // –°–æ–∑–¥–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–≥—Ä—ã
            const gameModal = document.createElement('div');
            gameModal.className = 'game-modal';
            gameModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;
            
            const gameContent = document.createElement('div');
            gameContent.style.cssText = `
                background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
                color: white;
                padding: 40px;
                border-radius: 25px;
                text-align: center;
                max-width: 400px;
                width: 90%;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
                animation: slideInUp 0.5s ease-out;
            `;
            
            gameContent.innerHTML = `
                <div style="font-size: 60px; margin-bottom: 20px; animation: float 2s ease-in-out infinite;">·ö±</div>
                <h2 style="margin: 0 0 20px 0; font-size: 28px;">–î—Ä–µ–≤–Ω–∏–µ –†—É–Ω—ã</h2>
                <p style="margin: 0 0 30px 0; font-size: 16px; opacity: 0.9;">–í—ã–±–µ—Ä–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä—É–Ω—ã, –∫–æ—Ç–æ—Ä—É—é –≤—ã—Ç–∞—â–∏—Ç–µ:</p>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 30px;">
                    ${runes.map((rune, index) => `
                        <button class="rune-choice" data-rune="${index}" style="
                            background: rgba(255,255,255,0.2);
                            border: 2px solid rgba(255,255,255,0.3);
                            color: white;
                            padding: 15px;
                            border-radius: 15px;
                            cursor: pointer;
                            font-size: 16px;
                            transition: all 0.3s ease;
                        " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                           onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                            <div style="font-size: 24px; margin-bottom: 5px;">${rune.symbol}</div>
                            <div style="font-size: 14px;">${rune.meaning}</div>
                        </button>
                    `).join('')}
                </div>
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; margin-bottom: 5px;">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} –º–æ–Ω–µ—Ç</div>
                    <div style="font-size: 14px;">üí≥ –í–∞—à –±–∞–ª–∞–Ω—Å: ${currentBalance} –º–æ–Ω–µ—Ç</div>
                </div>
                <button onclick="this.closest('.game-modal').remove()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 12px 30px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 16px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    –û—Ç–º–µ–Ω–∞
                </button>
            `;
            
            gameModal.appendChild(gameContent);
            document.body.appendChild(gameModal);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä—É–Ω—ã
            gameContent.querySelectorAll('.rune-choice').forEach(button => {
                button.addEventListener('click', function() {
                    const selectedRune = parseInt(this.dataset.rune);
                    deductCoins(cost);
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –≤—ã—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è —Ä—É–Ω—ã
                    gameContent.innerHTML = `
                        <div style="font-size: 80px; margin-bottom: 20px; animation: spin 2s linear infinite;">·ö±</div>
                        <h2 style="margin: 0 0 20px 0; font-size: 24px;">–†—É–Ω—ã –ø–µ—Ä–µ–º–µ—à–∏–≤–∞—é—Ç—Å—è...</h2>
                        <p style="margin: 0; font-size: 16px; opacity: 0.9;">–î—Ä–µ–≤–Ω—è—è –º–∞–≥–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç...</p>
                    `;
                    
                    setTimeout(() => {
                        const randomRune = Math.floor(Math.random() * 6);
                        const isWin = selectedRune === randomRune;
                        const reward = isWin ? 50 : 0;
                        
                        gameContent.innerHTML = `
                            <div style="font-size: 60px; margin-bottom: 20px;">${runes[randomRune].symbol}</div>
                            <h2 style="margin: 0 0 20px 0; font-size: 24px;">${isWin ? 'üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!' : 'üòî –ù–µ —É–≥–∞–¥–∞–ª–∏'}</h2>
                            <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                                <div style="font-size: 20px; margin-bottom: 10px;">${runes[randomRune].name}</div>
                                <div style="font-size: 16px; opacity: 0.9;">${runes[randomRune].meaning}</div>
                            </div>
                            <p style="margin: 0 0 20px 0; font-size: 16px;">
                                ${isWin ? `–í—ã —É–≥–∞–¥–∞–ª–∏! –í—ã–∏–≥—Ä—ã—à: ${reward} –º–æ–Ω–µ—Ç` : '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!'}
                            </p>
                            <button onclick="this.closest('.game-modal').remove()" style="
                                background: rgba(255,255,255,0.2);
                                border: 2px solid white;
                                color: white;
                                padding: 12px 30px;
                                border-radius: 25px;
                                cursor: pointer;
                                font-size: 16px;
                            ">
                                –ó–∞–∫—Ä—ã—Ç—å
                            </button>
                        `;
                        
                        if (isWin) {
                            addCoins(reward);
                        }
                    }, 2000);
                });
            });
        }
        
        // –ò–≥—Ä–∞: –ú–∞–≥–∏—á–µ—Å–∫–∏–π –∫—É–±
        function startMagicCubeGame() {
            console.log('üé≤ –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã "–ú–∞–≥–∏—á–µ—Å–∫–∏–π –∫—É–±"');
            const cost = 25;
            const currentBalance = getCurrentBalance();
            
            if (currentBalance < cost) {
                showInsufficientBalance(cost, currentBalance);
                return;
            }
            
            // –°–æ–∑–¥–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–≥—Ä—ã
            const gameModal = document.createElement('div');
            gameModal.className = 'game-modal';
            gameModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;
            
            const gameContent = document.createElement('div');
            gameContent.style.cssText = `
                background: linear-gradient(135deg, #8e44ad 0%, #9b59b6 100%);
                color: white;
                padding: 40px;
                border-radius: 25px;
                text-align: center;
                max-width: 400px;
                width: 90%;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
                animation: slideInUp 0.5s ease-out;
            `;
            
            const diceNumbers = ['‚öÄ', '‚öÅ', '‚öÇ', '‚öÉ', '‚öÑ', '‚öÖ'];
            
            gameContent.innerHTML = `
                <div style="font-size: 60px; margin-bottom: 20px; animation: float 2s ease-in-out infinite;">üé≤</div>
                <h2 style="margin: 0 0 20px 0; font-size: 28px;">–ú–∞–≥–∏—á–µ—Å–∫–∏–π –∫—É–±</h2>
                <p style="margin: 0 0 30px 0; font-size: 16px; opacity: 0.9;">–ü—Ä–µ–¥—Å–∫–∞–∂–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—Ä–æ—Å–∫–∞:</p>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 30px;">
                    ${diceNumbers.map((dice, index) => `
                        <button class="dice-choice" data-dice="${index + 1}" style="
                            background: rgba(255,255,255,0.2);
                            border: 2px solid rgba(255,255,255,0.3);
                            color: white;
                            padding: 20px;
                            border-radius: 15px;
                            cursor: pointer;
                            font-size: 24px;
                            transition: all 0.3s ease;
                        " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                           onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                            ${dice}
                        </button>
                    `).join('')}
                </div>
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; margin-bottom: 5px;">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} –º–æ–Ω–µ—Ç</div>
                    <div style="font-size: 14px;">üí≥ –í–∞—à –±–∞–ª–∞–Ω—Å: ${currentBalance} –º–æ–Ω–µ—Ç</div>
                </div>
                <button onclick="this.closest('.game-modal').remove()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 12px 30px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 16px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    –û—Ç–º–µ–Ω–∞
                </button>
            `;
            
            gameModal.appendChild(gameContent);
            document.body.appendChild(gameModal);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∫—É–±–∏–∫–∞
            gameContent.querySelectorAll('.dice-choice').forEach(button => {
                button.addEventListener('click', function() {
                    const selectedDice = parseInt(this.dataset.dice);
                    deductCoins(cost);
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –±—Ä–æ—Å–∫–∞ –∫—É–±–∏–∫–∞
                    gameContent.innerHTML = `
                        <div style="font-size: 80px; margin-bottom: 20px; animation: spin 2s linear infinite;">üé≤</div>
                        <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ö—É–± –∫—Ä—É—Ç–∏—Ç—Å—è...</h2>
                        <p style="margin: 0; font-size: 16px; opacity: 0.9;">–ú–∞–≥–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç...</p>
                    `;
                    
                    setTimeout(() => {
                        const randomNumber = Math.floor(Math.random() * 6) + 1;
                        const isWin = selectedDice === randomNumber;
                        const reward = isWin ? 100 : 0;
                        
                        gameContent.innerHTML = `
                            <div style="font-size: 80px; margin-bottom: 20px;">${diceNumbers[randomNumber - 1]}</div>
                            <h2 style="margin: 0 0 20px 0; font-size: 24px;">${isWin ? 'üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!' : 'üòî –ù–µ —É–≥–∞–¥–∞–ª–∏'}</h2>
                            <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                                <div style="font-size: 20px; margin-bottom: 10px;">–†–µ–∑—É–ª—å—Ç–∞—Ç: ${randomNumber}</div>
                                <div style="font-size: 16px; opacity: 0.9;">–í–∞—à –≤—ã–±–æ—Ä: ${selectedDice}</div>
                            </div>
                            <p style="margin: 0 0 20px 0; font-size: 16px;">
                                ${isWin ? `–í—ã —É–≥–∞–¥–∞–ª–∏! –í—ã–∏–≥—Ä—ã—à: ${reward} –º–æ–Ω–µ—Ç` : '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!'}
                            </p>
                            <button onclick="this.closest('.game-modal').remove()" style="
                                background: rgba(255,255,255,0.2);
                                border: 2px solid white;
                                color: white;
                                padding: 12px 30px;
                                border-radius: 25px;
                                cursor: pointer;
                                font-size: 16px;
                            ">
                                –ó–∞–∫—Ä—ã—Ç—å
                            </button>
                        `;
                        
                        if (isWin) {
                            addCoins(reward);
                        }
                    }, 2000);
                });
            });
        }
        
        // –ò–≥—Ä–∞: –ú–∞–≥–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç—ã
        function startMagicCardsGame() {
            console.log('üÉè –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã "–ú–∞–≥–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç—ã"');
            const cost = 30;
            const currentBalance = getCurrentBalance();
            
            if (currentBalance < cost) {
                showInsufficientBalance(cost, currentBalance);
                return;
            }
            
            const suits = ['‚ô†Ô∏è', '‚ô•Ô∏è', '‚ô¶Ô∏è', '‚ô£Ô∏è'];
            const values = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
            
            const gameModal = document.createElement('div');
            gameModal.className = 'game-modal';
            gameModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;
            
            const gameContent = document.createElement('div');
            gameContent.style.cssText = `
                background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
                color: white;
                padding: 40px;
                border-radius: 25px;
                text-align: center;
                max-width: 500px;
                width: 90%;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
                animation: slideInUp 0.5s ease-out;
            `;
            
            gameContent.innerHTML = `
                <div style="font-size: 60px; margin-bottom: 20px; animation: float 2s ease-in-out infinite;">üÉè</div>
                <h2 style="margin: 0 0 20px 0; font-size: 28px;">–ú–∞–≥–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç—ã</h2>
                <p style="margin: 0 0 30px 0; font-size: 16px; opacity: 0.9;">–£–≥–∞–¥–∞–π—Ç–µ –º–∞—Å—Ç—å –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã:</p>
                
                <div style="margin-bottom: 30px;">
                    <h3 style="margin: 0 0 15px 0; font-size: 20px;">–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Å—Ç—å:</h3>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">
                        ${suits.map((suit, index) => `
                            <button class="suit-choice" data-suit="${index}" style="
                                background: rgba(255,255,255,0.2);
                                border: 2px solid rgba(255,255,255,0.3);
                                color: white;
                                padding: 20px;
                                border-radius: 15px;
                                cursor: pointer;
                                font-size: 24px;
                                transition: all 0.3s ease;
                            " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                               onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                                ${suit}
                            </button>
                        `).join('')}
                    </div>
                    
                    <h3 style="margin: 0 0 15px 0; font-size: 20px;">–í—ã–±–µ—Ä–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ:</h3>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;">
                        ${values.map((value, index) => `
                            <button class="value-choice" data-value="${index}" style="
                                background: rgba(255,255,255,0.2);
                                border: 2px solid rgba(255,255,255,0.3);
                                color: white;
                                padding: 15px;
                                border-radius: 10px;
                                cursor: pointer;
                                font-size: 16px;
                                transition: all 0.3s ease;
                            " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                               onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                                ${value}
                            </button>
                        `).join('')}
                    </div>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; margin-bottom: 5px;">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} –º–æ–Ω–µ—Ç</div>
                    <div style="font-size: 14px;">üí≥ –í–∞—à –±–∞–ª–∞–Ω—Å: ${currentBalance} –º–æ–Ω–µ—Ç</div>
                </div>
                
                <button onclick="this.closest('.game-modal').remove()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 12px 30px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 16px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    –û—Ç–º–µ–Ω–∞
                </button>
            `;
            
            gameModal.appendChild(gameContent);
            document.body.appendChild(gameModal);
            
            let selectedSuit = null;
            let selectedValue = null;
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–∞—Å—Ç–∏
            gameContent.querySelectorAll('.suit-choice').forEach(button => {
                button.addEventListener('click', function() {
                    selectedSuit = parseInt(this.dataset.suit);
                    gameContent.querySelectorAll('.suit-choice').forEach(btn => btn.style.background = 'rgba(255,255,255,0.2)');
                    this.style.background = 'rgba(255,255,255,0.5)';
                    
                    if (selectedSuit !== null && selectedValue !== null) {
                        playMagicCardsGame(selectedSuit, selectedValue, cost);
                    }
                });
            });
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∑–Ω–∞—á–µ–Ω–∏—è
            gameContent.querySelectorAll('.value-choice').forEach(button => {
                button.addEventListener('click', function() {
                    selectedValue = parseInt(this.dataset.value);
                    gameContent.querySelectorAll('.value-choice').forEach(btn => btn.style.background = 'rgba(255,255,255,0.2)');
                    this.style.background = 'rgba(255,255,255,0.5)';
                    
                    if (selectedSuit !== null && selectedValue !== null) {
                        playMagicCardsGame(selectedSuit, selectedValue, cost);
                    }
                });
            });
            
            function playMagicCardsGame(userSuit, userValue, cost) {
                deductCoins(cost);
                
                gameContent.innerHTML = `
                    <div style="font-size: 80px; margin-bottom: 20px; animation: spin 2s linear infinite;">üÉè</div>
                    <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ö–∞—Ä—Ç—ã –ø–µ—Ä–µ–º–µ—à–∏–≤–∞—é—Ç—Å—è...</h2>
                    <p style="margin: 0; font-size: 16px; opacity: 0.9;">–ú–∞–≥–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç...</p>
                `;
                
                setTimeout(() => {
                    const randomSuit = Math.floor(Math.random() * 4);
                    const randomValue = Math.floor(Math.random() * 13);
                    const isSuitWin = userSuit === randomSuit;
                    const isValueWin = userValue === randomValue;
                    const isFullWin = isSuitWin && isValueWin;
                    
                    let reward = 0;
                    if (isFullWin) reward = 150;
                    else if (isSuitWin || isValueWin) reward = 50;
                    
                    gameContent.innerHTML = `
                        <div style="font-size: 80px; margin-bottom: 20px;">${suits[randomSuit]}${values[randomValue]}</div>
                        <h2 style="margin: 0 0 20px 0; font-size: 24px;">${isFullWin ? 'üéâ –ü–æ–ª–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à!' : isSuitWin || isValueWin ? 'üéØ –ß–∞—Å—Ç–∏—á–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à!' : 'üòî –ù–µ —É–≥–∞–¥–∞–ª–∏'}</h2>
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                            <div style="font-size: 18px; margin-bottom: 10px;">–í—ã–ø–∞–≤—à–∞—è –∫–∞—Ä—Ç–∞: ${suits[randomSuit]} ${values[randomValue]}</div>
                            <div style="font-size: 16px; opacity: 0.9;">–í–∞—à –≤—ã–±–æ—Ä: ${suits[userSuit]} ${values[userValue]}</div>
                        </div>
                        <p style="margin: 0 0 20px 0; font-size: 16px;">
                            ${isFullWin ? `–ü–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ! –í—ã–∏–≥—Ä—ã—à: ${reward} –º–æ–Ω–µ—Ç` : 
                              isSuitWin || isValueWin ? `–ß–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ! –í—ã–∏–≥—Ä—ã—à: ${reward} –º–æ–Ω–µ—Ç` : 
                              '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!'}
                        </p>
                        <button onclick="this.closest('.game-modal').remove()" style="
                            background: rgba(255,255,255,0.2);
                            border: 2px solid white;
                            color: white;
                            padding: 12px 30px;
                            border-radius: 25px;
                            cursor: pointer;
                            font-size: 16px;
                        ">
                            –ó–∞–∫—Ä—ã—Ç—å
                        </button>
                    `;
                    
                    if (reward > 0) {
                        addCoins(reward);
                    }
                }, 2000);
            }
        }
        
        // –ò–≥—Ä–∞: –ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã
        function startWheelOfFortuneGame() {
            console.log('üé° –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã "–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã"');
            const cost = 35;
            const currentBalance = getCurrentBalance();
            
            if (currentBalance < cost) {
                showInsufficientBalance(cost, currentBalance);
                return;
            }
            
            const prizes = [
                { name: '–ú–∞–ª—ã–π –ø—Ä–∏–∑', reward: 50, color: '#f39c12' },
                { name: '–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–∑', reward: 100, color: '#e74c3c' },
                { name: '–ë–æ–ª—å—à–æ–π –ø—Ä–∏–∑', reward: 150, color: '#9b59b6' },
                { name: '–°—É–ø–µ—Ä –ø—Ä–∏–∑', reward: 200, color: '#2ecc71' },
                { name: '–£–¥–∞—á–∞', reward: 25, color: '#3498db' },
                { name: '–ë–æ–Ω—É—Å', reward: 75, color: '#e67e22' },
                { name: '–î–∂–µ–∫–ø–æ—Ç', reward: 300, color: '#f1c40f' },
                { name: '–£—Ç–µ—à–∏—Ç–µ–ª—å–Ω—ã–π', reward: 10, color: '#95a5a6' }
            ];
            
            const gameModal = document.createElement('div');
            gameModal.className = 'game-modal';
            gameModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;
            
            const gameContent = document.createElement('div');
            gameContent.style.cssText = `
                background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
                color: white;
                padding: 40px;
                border-radius: 25px;
                text-align: center;
                max-width: 400px;
                width: 90%;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
                animation: slideInUp 0.5s ease-out;
            `;
            
            gameContent.innerHTML = `
                <div style="font-size: 60px; margin-bottom: 20px; animation: float 2s ease-in-out infinite;">üé°</div>
                <h2 style="margin: 0 0 20px 0; font-size: 28px;">–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã</h2>
                <p style="margin: 0 0 30px 0; font-size: 16px; opacity: 0.9;">–ö—Ä—É—Ç–∏—Ç–µ –∫–æ–ª–µ—Å–æ –∏ –≤—ã–∏–≥—Ä—ã–≤–∞–π—Ç–µ –ø—Ä–∏–∑—ã!</p>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; margin-bottom: 5px;">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} –º–æ–Ω–µ—Ç</div>
                    <div style="font-size: 14px;">üí≥ –í–∞—à –±–∞–ª–∞–Ω—Å: ${currentBalance} –º–æ–Ω–µ—Ç</div>
                </div>
                
                <button onclick="spinWheel()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 15px 40px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 18px;
                    font-weight: 600;
                    transition: all 0.3s ease;
                    margin-bottom: 20px;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    üé° –ö—Ä—É—Ç–∏—Ç—å –∫–æ–ª–µ—Å–æ!
                </button>
                
                <button onclick="this.closest('.game-modal').remove()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 12px 30px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 16px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    –û—Ç–º–µ–Ω–∞
                </button>
            `;
            
            gameModal.appendChild(gameContent);
            document.body.appendChild(gameModal);
            
            function spinWheel() {
                deductCoins(cost);
                
                gameContent.innerHTML = `
                    <div style="font-size: 80px; margin-bottom: 20px; animation: spin 3s linear infinite;">üé°</div>
                    <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ö–æ–ª–µ—Å–æ –∫—Ä—É—Ç–∏—Ç—Å—è...</h2>
                    <p style="margin: 0; font-size: 16px; opacity: 0.9;">–§–æ—Ä—Ç—É–Ω–∞ —Ä–µ—à–∞–µ—Ç –≤–∞—à—É —Å—É–¥—å–±—É...</p>
                `;
                
                setTimeout(() => {
                    const randomPrize = Math.floor(Math.random() * prizes.length);
                    const prize = prizes[randomPrize];
                    
                    gameContent.innerHTML = `
                        <div style="font-size: 60px; margin-bottom: 20px;">üéâ</div>
                        <h2 style="margin: 0 0 20px 0; font-size: 24px;">${prize.name}!</h2>
                        <div style="background: ${prize.color}; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                            <div style="font-size: 32px; font-weight: 700; margin-bottom: 10px;">${prize.reward} –º–æ–Ω–µ—Ç</div>
                            <div style="font-size: 18px; opacity: 0.9;">${prize.name}</div>
                        </div>
                        <p style="margin: 0 0 20px 0; font-size: 16px;">
                            –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –≤—ã–∏–≥—Ä—ã—à–µ–º!
                        </p>
                        <button onclick="this.closest('.game-modal').remove()" style="
                            background: rgba(255,255,255,0.2);
                            border: 2px solid white;
                            color: white;
                            padding: 12px 30px;
                            border-radius: 25px;
                            cursor: pointer;
                            font-size: 16px;
                        ">
                            –ó–∞–∫—Ä—ã—Ç—å
                        </button>
                    `;
                    
                    addCoins(prize.reward);
                }, 3000);
            }
        }
        
        // –ò–≥—Ä–∞: –ú–∞–≥–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç—ã (—É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
        function startMagicCardsGame() {
            console.log('üÉè –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã "–ú–∞–≥–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç—ã"');
            const cost = 30;
            const currentBalance = getCurrentBalance();
            
            if (currentBalance < cost) {
                showInsufficientBalance(cost, currentBalance);
                return;
            }
            
            const suits = ['‚ô†Ô∏è', '‚ô•Ô∏è', '‚ô¶Ô∏è', '‚ô£Ô∏è'];
            const values = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
            
            const gameModal = document.createElement('div');
            gameModal.className = 'game-modal';
            gameModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;
            
            const gameContent = document.createElement('div');
            gameContent.style.cssText = `
                background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
                color: white;
                padding: 40px;
                border-radius: 25px;
                text-align: center;
                max-width: 500px;
                width: 90%;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
                animation: slideInUp 0.5s ease-out;
            `;
            
            gameContent.innerHTML = `
                <div style="font-size: 60px; margin-bottom: 20px; animation: float 2s ease-in-out infinite;">üÉè</div>
                <h2 style="margin: 0 0 20px 0; font-size: 28px;">–ú–∞–≥–∏—á–µ—Å–∫–∏–µ –∫–∞—Ä—Ç—ã</h2>
                <p style="margin: 0 0 30px 0; font-size: 16px; opacity: 0.9;">–£–≥–∞–¥–∞–π—Ç–µ –º–∞—Å—Ç—å –∫–∞—Ä—Ç—ã (—É—Ä–æ–≤–µ–Ω—å 1):</p>
                
                <div style="margin-bottom: 30px;">
                    <h3 style="margin: 0 0 15px 0; font-size: 20px;">–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Å—Ç—å:</h3>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">
                        ${suits.map((suit, index) => `
                            <button class="suit-choice" data-suit="${index}" style="
                                background: rgba(255,255,255,0.2);
                                border: 2px solid rgba(255,255,255,0.3);
                                color: white;
                                padding: 20px;
                                border-radius: 15px;
                                cursor: pointer;
                                font-size: 24px;
                                transition: all 0.3s ease;
                            " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                               onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                                ${suit}
                            </button>
                        `).join('')}
                    </div>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; margin-bottom: 5px;">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} –º–æ–Ω–µ—Ç</div>
                    <div style="font-size: 14px;">üí≥ –í–∞—à –±–∞–ª–∞–Ω—Å: ${currentBalance} –º–æ–Ω–µ—Ç</div>
                </div>
                
                <button onclick="this.closest('.game-modal').remove()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 12px 30px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 16px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    –û—Ç–º–µ–Ω–∞
                </button>
            `;
            
            gameModal.appendChild(gameContent);
            document.body.appendChild(gameModal);
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ –º–∞—Å—Ç–∏
            gameContent.querySelectorAll('.suit-choice').forEach(button => {
                button.addEventListener('click', function() {
                    const selectedSuit = parseInt(this.dataset.suit);
                    playMagicCardsGame(selectedSuit, cost, suits, values);
                });
            });
            
            function playMagicCardsGame(userSuit, cost, suits, values) {
                deductCoins(cost);
                
                gameContent.innerHTML = `
                    <div style="font-size: 80px; margin-bottom: 20px; animation: spin 2s linear infinite;">üÉè</div>
                    <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ö–∞—Ä—Ç—ã –ø–µ—Ä–µ–º–µ—à–∏–≤–∞—é—Ç—Å—è...</h2>
                    <p style="margin: 0; font-size: 16px; opacity: 0.9;">–ú–∞–≥–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç...</p>
                `;
                
                setTimeout(() => {
                    const randomSuit = Math.floor(Math.random() * 4);
                    const randomValue = Math.floor(Math.random() * 13);
                    const isSuitWin = userSuit === randomSuit;
                    
                    if (isSuitWin) {
                        // –£—Ä–æ–≤–µ–Ω—å 2: —É–≥–∞–¥—ã–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
                        gameContent.innerHTML = `
                            <div style="font-size: 60px; margin-bottom: 20px;">üéâ</div>
                            <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ú–∞—Å—Ç—å —É–≥–∞–¥–∞–Ω–∞!</h2>
                            <p style="margin: 0 0 30px 0; font-size: 16px; opacity: 0.9;">–¢–µ–ø–µ—Ä—å —É–≥–∞–¥–∞–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã (—É—Ä–æ–≤–µ–Ω—å 2):</p>
                            
                            <div style="margin-bottom: 30px;">
                                <h3 style="margin: 0 0 15px 0; font-size: 20px;">–í—ã–±–µ—Ä–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ:</h3>
                                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;">
                                    ${values.map((value, index) => `
                                        <button class="value-choice" data-value="${index}" style="
                                            background: rgba(255,255,255,0.2);
                                            border: 2px solid rgba(255,255,255,0.3);
                                            color: white;
                                            padding: 15px;
                                            border-radius: 10px;
                                            cursor: pointer;
                                            font-size: 16px;
                                            transition: all 0.3s ease;
                                        " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                                           onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                                            ${value}
                                        </button>
                                    `).join('')}
                                </div>
                            </div>
                        `;
                        
                        gameContent.querySelectorAll('.value-choice').forEach(button => {
                            button.addEventListener('click', function() {
                                const selectedValue = parseInt(this.dataset.value);
                                const isValueWin = selectedValue === randomValue;
                                const reward = isValueWin ? 150 : 50; // –ü–æ–ª–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à –∏–ª–∏ —á–∞—Å—Ç–∏—á–Ω—ã–π
                                
                                gameContent.innerHTML = `
                                    <div style="font-size: 80px; margin-bottom: 20px;">${suits[randomSuit]}${values[randomValue]}</div>
                                    <h2 style="margin: 0 0 20px 0; font-size: 24px;">${isValueWin ? 'üéâ –ü–æ–ª–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à!' : 'üéØ –ß–∞—Å—Ç–∏—á–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à!'}</h2>
                                    <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                                        <div style="font-size: 18px; margin-bottom: 10px;">–í—ã–ø–∞–≤—à–∞—è –∫–∞—Ä—Ç–∞: ${suits[randomSuit]} ${values[randomValue]}</div>
                                        <div style="font-size: 16px; opacity: 0.9;">–í–∞—à –≤—ã–±–æ—Ä: ${suits[userSuit]} ${values[selectedValue]}</div>
                                    </div>
                                    <p style="margin: 0 0 20px 0; font-size: 16px;">
                                        ${isValueWin ? `–û—Ç–ª–∏—á–Ω–æ! –ü–æ–ª–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à: ${reward} –º–æ–Ω–µ—Ç` : `–•–æ—Ä–æ—à–æ! –ß–∞—Å—Ç–∏—á–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à: ${reward} –º–æ–Ω–µ—Ç`}
                                    </p>
                                    <button onclick="this.closest('.game-modal').remove()" style="
                                        background: rgba(255,255,255,0.2);
                                        border: 2px solid white;
                                        color: white;
                                        padding: 12px 30px;
                                        border-radius: 25px;
                                        cursor: pointer;
                                        font-size: 16px;
                                    ">
                                        –ó–∞–∫—Ä—ã—Ç—å
                                    </button>
                                `;
                                
                                addCoins(reward);
                            });
                        });
                    } else {
                        // –ù–µ —É–≥–∞–¥–∞–ª–∏ –º–∞—Å—Ç—å
                        gameContent.innerHTML = `
                            <div style="font-size: 80px; margin-bottom: 20px;">${suits[randomSuit]}${values[randomValue]}</div>
                            <h2 style="margin: 0 0 20px 0; font-size: 24px;">üòî –ù–µ —É–≥–∞–¥–∞–ª–∏</h2>
                            <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                                <div style="font-size: 18px; margin-bottom: 10px;">–í—ã–ø–∞–≤—à–∞—è –∫–∞—Ä—Ç–∞: ${suits[randomSuit]} ${values[randomValue]}</div>
                                <div style="font-size: 16px; opacity: 0.9;">–í–∞—à –≤—ã–±–æ—Ä –º–∞—Å—Ç–∏: ${suits[userSuit]}</div>
                            </div>
                            <p style="margin: 0 0 20px 0; font-size: 16px;">
                                –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!
                            </p>
                            <button onclick="this.closest('.game-modal').remove()" style="
                                background: rgba(255,255,255,0.2);
                                border: 2px solid white;
                                color: white;
                                padding: 12px 30px;
                                border-radius: 25px;
                                cursor: pointer;
                                font-size: 16px;
                            ">
                                –ó–∞–∫—Ä—ã—Ç—å
                            </button>
                        `;
                    }
                }, 2000);
            }
        }
        
        // –ò–≥—Ä–∞: –ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã
        function startWheelOfFortuneGame() {
            console.log('üé° –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã "–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã"');
            const cost = 35;
            const currentBalance = getCurrentBalance();
            
            if (currentBalance < cost) {
                showInsufficientBalance(cost, currentBalance);
                return;
            }
            
            const prizes = [
                { name: '–ú–∞–ª—ã–π –ø—Ä–∏–∑', reward: 50, color: '#f39c12' },
                { name: '–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–∑', reward: 100, color: '#e74c3c' },
                { name: '–ë–æ–ª—å—à–æ–π –ø—Ä–∏–∑', reward: 150, color: '#9b59b6' },
                { name: '–°—É–ø–µ—Ä –ø—Ä–∏–∑', reward: 200, color: '#2ecc71' },
                { name: '–£–¥–∞—á–∞', reward: 25, color: '#3498db' },
                { name: '–ë–æ–Ω—É—Å', reward: 75, color: '#e67e22' },
                { name: '–î–∂–µ–∫–ø–æ—Ç', reward: 300, color: '#f1c40f' },
                { name: '–£—Ç–µ—à–∏—Ç–µ–ª—å–Ω—ã–π', reward: 10, color: '#95a5a6' }
            ];
            
            const gameModal = document.createElement('div');
            gameModal.className = 'game-modal';
            gameModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;
            
            const gameContent = document.createElement('div');
            gameContent.style.cssText = `
                background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
                color: white;
                padding: 40px;
                border-radius: 25px;
                text-align: center;
                max-width: 400px;
                width: 90%;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
                animation: slideInUp 0.5s ease-out;
            `;
            
            gameContent.innerHTML = `
                <div style="font-size: 60px; margin-bottom: 20px; animation: float 2s ease-in-out infinite;">üé°</div>
                <h2 style="margin: 0 0 20px 0; font-size: 28px;">–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã</h2>
                <p style="margin: 0 0 30px 0; font-size: 16px; opacity: 0.9;">–ö—Ä—É—Ç–∏—Ç–µ –∫–æ–ª–µ—Å–æ –∏ –≤—ã–∏–≥—Ä—ã–≤–∞–π—Ç–µ –ø—Ä–∏–∑—ã!</p>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; margin-bottom: 5px;">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} –º–æ–Ω–µ—Ç</div>
                    <div style="font-size: 14px;">üí≥ –í–∞—à –±–∞–ª–∞–Ω—Å: ${currentBalance} –º–æ–Ω–µ—Ç</div>
                </div>
                
                <button onclick="spinWheel()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 15px 40px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 18px;
                    font-weight: 600;
                    transition: all 0.3s ease;
                    margin-bottom: 20px;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    üé° –ö—Ä—É—Ç–∏—Ç—å –∫–æ–ª–µ—Å–æ!
                </button>
                
                <button onclick="this.closest('.game-modal').remove()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 12px 30px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 16px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    –û—Ç–º–µ–Ω–∞
                </button>
            `;
            
            gameModal.appendChild(gameContent);
            document.body.appendChild(gameModal);
            
            function spinWheel() {
                deductCoins(cost);
                
                gameContent.innerHTML = `
                    <div style="font-size: 80px; margin-bottom: 20px; animation: spin 3s linear infinite;">üé°</div>
                    <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ö–æ–ª–µ—Å–æ –∫—Ä—É—Ç–∏—Ç—Å—è...</h2>
                    <p style="margin: 0; font-size: 16px; opacity: 0.9;">–§–æ—Ä—Ç—É–Ω–∞ —Ä–µ—à–∞–µ—Ç –≤–∞—à—É —Å—É–¥—å–±—É...</p>
                `;
                
                setTimeout(() => {
                    const randomPrize = Math.floor(Math.random() * prizes.length);
                    const prize = prizes[randomPrize];
                    
                    gameContent.innerHTML = `
                        <div style="font-size: 60px; margin-bottom: 20px;">üéâ</div>
                        <h2 style="margin: 0 0 20px 0; font-size: 24px;">${prize.name}!</h2>
                        <div style="background: ${prize.color}; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                            <div style="font-size: 32px; font-weight: 700; margin-bottom: 10px;">${prize.reward} –º–æ–Ω–µ—Ç</div>
                            <div style="font-size: 18px; opacity: 0.9;">${prize.name}</div>
                        </div>
                        <p style="margin: 0 0 20px 0; font-size: 16px;">
                            –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –≤—ã–∏–≥—Ä—ã—à–µ–º!
                        </p>
                        <button onclick="this.closest('.game-modal').remove()" style="
                            background: rgba(255,255,255,0.2);
                            border: 2px solid white;
                            color: white;
                            padding: 12px 30px;
                            border-radius: 25px;
                            cursor: pointer;
                            font-size: 16px;
                        ">
                            –ó–∞–∫—Ä—ã—Ç—å
                        </button>
                    `;
                    
                    addCoins(prize.reward);
                }, 3000);
            }
        }
        
        // –ò–≥—Ä–∞: –ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ª–∞–±–∏—Ä–∏–Ω—Ç
        function startMysticLabyrinthGame() {
            console.log('üåÄ –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã "–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ª–∞–±–∏—Ä–∏–Ω—Ç"');
            const cost = 40;
            const currentBalance = getCurrentBalance();
            
            if (currentBalance < cost) {
                showInsufficientBalance(cost, currentBalance);
                return;
            }
            
            const gameModal = document.createElement('div');
            gameModal.className = 'game-modal';
            gameModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;
            
            const gameContent = document.createElement('div');
            gameContent.style.cssText = `
                background: linear-gradient(135deg, #8e44ad 0%, #9b59b6 100%);
                color: white;
                padding: 40px;
                border-radius: 25px;
                text-align: center;
                max-width: 400px;
                width: 90%;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
                animation: slideInUp 0.5s ease-out;
            `;
            
            gameContent.innerHTML = `
                <div style="font-size: 60px; margin-bottom: 20px; animation: float 2s ease-in-out infinite;">üåÄ</div>
                <h2 style="margin: 0 0 20px 0; font-size: 28px;">–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ª–∞–±–∏—Ä–∏–Ω—Ç</h2>
                <p style="margin: 0 0 30px 0; font-size: 16px; opacity: 0.9;">–ù–∞–π–¥–∏—Ç–µ –≤—ã—Ö–æ–¥ –∏–∑ –º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ –ª–∞–±–∏—Ä–∏–Ω—Ç–∞!</p>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; margin-bottom: 5px;">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} –º–æ–Ω–µ—Ç</div>
                    <div style="font-size: 14px;">üí≥ –í–∞—à –±–∞–ª–∞–Ω—Å: ${currentBalance} –º–æ–Ω–µ—Ç</div>
                </div>
                
                <button onclick="startLabyrinth()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 15px 40px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 18px;
                    font-weight: 600;
                    transition: all 0.3s ease;
                    margin-bottom: 20px;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    üåÄ –ù–∞—á–∞—Ç—å –ø–æ–∏—Å–∫!
                </button>
                
                <button onclick="this.closest('.game-modal').remove()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 12px 30px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 16px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    –û—Ç–º–µ–Ω–∞
                </button>
            `;
            
            gameModal.appendChild(gameContent);
            document.body.appendChild(gameModal);
            
            function startLabyrinth() {
                deductCoins(cost);
                
                gameContent.innerHTML = `
                    <div style="font-size: 80px; margin-bottom: 20px; animation: spin 3s linear infinite;">üåÄ</div>
                    <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ò—Å—Å–ª–µ–¥—É–µ–º –ª–∞–±–∏—Ä–∏–Ω—Ç...</h2>
                    <p style="margin: 0; font-size: 16px; opacity: 0.9;">–ò—â–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å...</p>
                `;
                
                setTimeout(() => {
                    const paths = ['–ª–µ–≤–æ', '–ø—Ä–∞–≤–æ', '–ø—Ä—è–º–æ', '–Ω–∞–∑–∞–¥'];
                    const correctPath = Math.floor(Math.random() * 4);
                    const userPath = Math.floor(Math.random() * 4);
                    const isWin = correctPath === userPath;
                    const reward = isWin ? 250 : 0;
                    
                    gameContent.innerHTML = `
                        <div style="font-size: 60px; margin-bottom: 20px;">${isWin ? 'üèÜ' : 'üòî'}</div>
                        <h2 style="margin: 0 0 20px 0; font-size: 24px;">${isWin ? '–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!' : '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!'}</h2>
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                            <div style="font-size: 18px; margin-bottom: 10px;">–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å: ${paths[correctPath]}</div>
                            <div style="font-size: 16px; opacity: 0.9;">–í–∞—à –≤—ã–±–æ—Ä: ${paths[userPath]}</div>
                        </div>
                        <p style="margin: 0 0 20px 0; font-size: 16px;">
                            ${isWin ? `–í—ã –Ω–∞—à–ª–∏ –≤—ã—Ö–æ–¥! –í—ã–∏–≥—Ä—ã—à: ${reward} –º–æ–Ω–µ—Ç` : '–õ–∞–±–∏—Ä–∏–Ω—Ç –∑–∞–ø—É—Ç–∞–ª –≤–∞—Å...'}
                        </p>
                        <button onclick="this.closest('.game-modal').remove()" style="
                            background: rgba(255,255,255,0.2);
                            border: 2px solid white;
                            color: white;
                            padding: 12px 30px;
                            border-radius: 25px;
                            cursor: pointer;
                            font-size: 16px;
                        ">
                            –ó–∞–∫—Ä—ã—Ç—å
                        </button>
                    `;
                    
                    if (reward > 0) {
                        addCoins(reward);
                    }
                }, 3000);
            }
        }
        
        // –ò–≥—Ä–∞: –ó–≤–µ–∑–¥–Ω–∞—è –∫–∞—Ä—Ç–∞
        function startStarMapGame() {
            console.log('‚≠ê –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã "–ó–≤–µ–∑–¥–Ω–∞—è –∫–∞—Ä—Ç–∞"');
            const cost = 45;
            const currentBalance = getCurrentBalance();
            
            if (currentBalance < cost) {
                showInsufficientBalance(cost, currentBalance);
                return;
            }
            
            const constellations = [
                { name: '–ë–æ–ª—å—à–∞—è –ú–µ–¥–≤–µ–¥–∏—Ü–∞', symbol: 'üêª', stars: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê' },
                { name: '–û—Ä–∏–æ–Ω', symbol: 'üèπ', stars: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê' },
                { name: '–ö–∞—Å—Å–∏–æ–ø–µ—è', symbol: 'üëë', stars: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê' },
                { name: '–õ–µ–±–µ–¥—å', symbol: 'ü¶¢', stars: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê' },
                { name: '–ü–µ–≥–∞—Å', symbol: 'üêé', stars: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê' },
                { name: '–î—Ä–∞–∫–æ–Ω', symbol: 'üêâ', stars: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê' }
            ];
            
            const gameModal = document.createElement('div');
            gameModal.className = 'game-modal';
            gameModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;
            
            const gameContent = document.createElement('div');
            gameContent.style.cssText = `
                background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
                color: white;
                padding: 40px;
                border-radius: 25px;
                text-align: center;
                max-width: 400px;
                width: 90%;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
                animation: slideInUp 0.5s ease-out;
            `;
            
            gameContent.innerHTML = `
                <div style="font-size: 60px; margin-bottom: 20px; animation: float 2s ease-in-out infinite;">‚≠ê</div>
                <h2 style="margin: 0 0 20px 0; font-size: 28px;">–ó–≤–µ–∑–¥–Ω–∞—è –∫–∞—Ä—Ç–∞</h2>
                <p style="margin: 0 0 30px 0; font-size: 16px; opacity: 0.9;">–£–≥–∞–¥–∞–π—Ç–µ —Å–æ–∑–≤–µ–∑–¥–∏–µ –ø–æ –∑–≤–µ–∑–¥–∞–º!</p>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; margin-bottom: 5px;">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} –º–æ–Ω–µ—Ç</div>
                    <div style="font-size: 14px;">üí≥ –í–∞—à –±–∞–ª–∞–Ω—Å: ${currentBalance} –º–æ–Ω–µ—Ç</div>
                </div>
                
                <button onclick="showConstellation()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 15px 40px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 18px;
                    font-weight: 600;
                    transition: all 0.3s ease;
                    margin-bottom: 20px;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    ‚≠ê –ü–æ–∫–∞–∑–∞—Ç—å –∑–≤–µ–∑–¥—ã!
                </button>
                
                <button onclick="this.closest('.game-modal').remove()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 12px 30px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 16px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    –û—Ç–º–µ–Ω–∞
                </button>
            `;
            
            gameModal.appendChild(gameContent);
            document.body.appendChild(gameModal);
            
            function showConstellation() {
                deductCoins(cost);
                
                const randomConstellation = Math.floor(Math.random() * constellations.length);
                const constellation = constellations[randomConstellation];
                
                gameContent.innerHTML = `
                    <div style="font-size: 60px; margin-bottom: 20px;">${constellation.stars}</div>
                    <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ö–∞–∫–æ–µ —ç—Ç–æ —Å–æ–∑–≤–µ–∑–¥–∏–µ?</h2>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">
                        ${constellations.map((constellation, index) => `
                            <button class="constellation-choice" data-const="${index}" style="
                                background: rgba(255,255,255,0.2);
                                border: 2px solid rgba(255,255,255,0.3);
                                color: white;
                                padding: 15px;
                                border-radius: 15px;
                                cursor: pointer;
                                font-size: 14px;
                                transition: all 0.3s ease;
                            " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                               onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                                ${constellation.symbol} ${constellation.name}
                            </button>
                        `).join('')}
                    </div>
                `;
                
                gameContent.querySelectorAll('.constellation-choice').forEach(button => {
                    button.addEventListener('click', function() {
                        const selectedConst = parseInt(this.dataset.const);
                        const isWin = selectedConst === randomConstellation;
                        const reward = isWin ? 300 : 0;
                        
                        gameContent.innerHTML = `
                            <div style="font-size: 60px; margin-bottom: 20px;">${isWin ? 'üåü' : '‚≠ê'}</div>
                            <h2 style="margin: 0 0 20px 0; font-size: 24px;">${isWin ? '–ü—Ä–∞–≤–∏–ª—å–Ω–æ!' : '–ù–µ–≤–µ—Ä–Ω–æ!'}</h2>
                            <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                                <div style="font-size: 18px; margin-bottom: 10px;">–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${constellation.symbol} ${constellation.name}</div>
                                <div style="font-size: 16px; opacity: 0.9;">–í–∞—à –≤—ã–±–æ—Ä: ${constellations[selectedConst].symbol} ${constellations[selectedConst].name}</div>
                            </div>
                            <p style="margin: 0 0 20px 0; font-size: 16px;">
                                ${isWin ? `–û—Ç–ª–∏—á–Ω–æ! –í—ã–∏–≥—Ä—ã—à: ${reward} –º–æ–Ω–µ—Ç` : '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!'}
                            </p>
                            <button onclick="this.closest('.game-modal').remove()" style="
                                background: rgba(255,255,255,0.2);
                                border: 2px solid white;
                                color: white;
                                padding: 12px 30px;
                                border-radius: 25px;
                                cursor: pointer;
                                font-size: 16px;
                            ">
                                –ó–∞–∫—Ä—ã—Ç—å
                            </button>
                        `;
                        
                        if (reward > 0) {
                            addCoins(reward);
                        }
                    });
                });
            }
        }
        
        // –ò–≥—Ä–∞: –ö—Ä–∏—Å—Ç–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å
        function startCrystalMemoryGame() {
            console.log('üíé –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã "–ö—Ä–∏—Å—Ç–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å"');
            const cost = 50;
            const currentBalance = getCurrentBalance();
            
            if (currentBalance < cost) {
                showInsufficientBalance(cost, currentBalance);
                return;
            }
            
            const crystals = ['üíé', 'üîÆ', 'üí†', 'üî∑', 'üî∂', 'üíú', 'üíô', 'üíö'];
            
            const gameModal = document.createElement('div');
            gameModal.className = 'game-modal';
            gameModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;
            
            const gameContent = document.createElement('div');
            gameContent.style.cssText = `
                background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
                color: white;
                padding: 40px;
                border-radius: 25px;
                text-align: center;
                max-width: 400px;
                width: 90%;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
                animation: slideInUp 0.5s ease-out;
            `;
            
            gameContent.innerHTML = `
                <div style="font-size: 60px; margin-bottom: 20px; animation: float 2s ease-in-out infinite;">üíé</div>
                <h2 style="margin: 0 0 20px 0; font-size: 28px;">–ö—Ä–∏—Å—Ç–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å</h2>
                <p style="margin: 0 0 30px 0; font-size: 16px; opacity: 0.9;">–ó–∞–ø–æ–º–Ω–∏—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤!</p>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; margin-bottom: 5px;">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} –º–æ–Ω–µ—Ç</div>
                    <div style="font-size: 14px;">üí≥ –í–∞—à –±–∞–ª–∞–Ω—Å: ${currentBalance} –º–æ–Ω–µ—Ç</div>
                </div>
                
                <button onclick="startMemoryGame()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 15px 40px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 18px;
                    font-weight: 600;
                    transition: all 0.3s ease;
                    margin-bottom: 20px;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    üíé –ù–∞—á–∞—Ç—å –∏–≥—Ä—É!
                </button>
                
                <button onclick="this.closest('.game-modal').remove()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 12px 30px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 16px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    –û—Ç–º–µ–Ω–∞
                </button>
            `;
            
            gameModal.appendChild(gameContent);
            document.body.appendChild(gameModal);
            
            function startMemoryGame() {
                deductCoins(cost);
                
                const sequence = [];
                for (let i = 0; i < 4; i++) {
                    sequence.push(Math.floor(Math.random() * crystals.length));
                }
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                let currentIndex = 0;
                gameContent.innerHTML = `
                    <div style="font-size: 60px; margin-bottom: 20px;">${crystals[sequence[currentIndex]]}</div>
                    <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ó–∞–ø–æ–º–∏–Ω–∞–π—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å...</h2>
                    <p style="margin: 0; font-size: 16px; opacity: 0.9;">–ö—Ä–∏—Å—Ç–∞–ª–ª ${currentIndex + 1} –∏–∑ 4</p>
                `;
                
                const showNext = () => {
                    currentIndex++;
                    if (currentIndex < sequence.length) {
                        setTimeout(() => {
                            gameContent.innerHTML = `
                                <div style="font-size: 60px; margin-bottom: 20px;">${crystals[sequence[currentIndex]]}</div>
                                <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ó–∞–ø–æ–º–∏–Ω–∞–π—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å...</h2>
                                <p style="margin: 0; font-size: 16px; opacity: 0.9;">–ö—Ä–∏—Å—Ç–∞–ª–ª ${currentIndex + 1} –∏–∑ 4</p>
                            `;
                            showNext();
                        }, 1000);
                    } else {
                        setTimeout(() => {
                            showUserInput(sequence);
                        }, 1000);
                    }
                };
                
                showNext();
            }
            
            function showUserInput(sequence) {
                gameContent.innerHTML = `
                    <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</h2>
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px;">
                        ${crystals.map((crystal, index) => `
                            <button class="crystal-choice" data-crystal="${index}" style="
                                background: rgba(255,255,255,0.2);
                                border: 2px solid rgba(255,255,255,0.3);
                                color: white;
                                padding: 20px;
                                border-radius: 15px;
                                cursor: pointer;
                                font-size: 24px;
                                transition: all 0.3s ease;
                            " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                               onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                                ${crystal}
                            </button>
                        `).join('')}
                    </div>
                    <div id="user-sequence" style="font-size: 24px; margin-bottom: 20px;"></div>
                `;
                
                let userSequence = [];
                const userSequenceDiv = document.getElementById('user-sequence');
                
                gameContent.querySelectorAll('.crystal-choice').forEach(button => {
                    button.addEventListener('click', function() {
                        const crystalIndex = parseInt(this.dataset.crystal);
                        userSequence.push(crystalIndex);
                        userSequenceDiv.textContent = userSequence.map(i => crystals[i]).join(' ');
                        
                        if (userSequence.length === sequence.length) {
                            checkSequence(sequence, userSequence);
                        }
                    });
                });
            }
            
            function checkSequence(sequence, userSequence) {
                const isCorrect = sequence.every((crystal, index) => crystal === userSequence[index]);
                const reward = isCorrect ? 400 : 0;
                
                gameContent.innerHTML = `
                    <div style="font-size: 60px; margin-bottom: 20px;">${isCorrect ? 'üéâ' : 'üòî'}</div>
                    <h2 style="margin: 0 0 20px 0; font-size: 24px;">${isCorrect ? '–û—Ç–ª–∏—á–Ω–æ!' : '–ù–µ–≤–µ—Ä–Ω–æ!'}</h2>
                    <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                        <div style="font-size: 18px; margin-bottom: 10px;">–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</div>
                        <div style="font-size: 24px; margin-bottom: 10px;">${sequence.map(i => crystals[i]).join(' ')}</div>
                        <div style="font-size: 18px; margin-bottom: 10px;">–í–∞—à–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</div>
                        <div style="font-size: 24px;">${userSequence.map(i => crystals[i]).join(' ')}</div>
                    </div>
                    <p style="margin: 0 0 20px 0; font-size: 16px;">
                        ${isCorrect ? `–ü–∞–º—è—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ! –í—ã–∏–≥—Ä—ã—à: ${reward} –º–æ–Ω–µ—Ç` : '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!'}
                    </p>
                    <button onclick="this.closest('.game-modal').remove()" style="
                        background: rgba(255,255,255,0.2);
                        border: 2px solid white;
                        color: white;
                        padding: 12px 30px;
                        border-radius: 25px;
                        cursor: pointer;
                        font-size: 16px;
                    ">
                        –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                `;
                
                if (reward > 0) {
                    addCoins(reward);
                }
            }
        }
        
        // –ò–≥—Ä–∞: –†—É–Ω–∏—á–µ—Å–∫–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞
        function startRunicQuizGame() {
            console.log('üìö –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã "–†—É–Ω–∏—á–µ—Å–∫–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞"');
            const cost = 55;
            const currentBalance = getCurrentBalance();
            
            if (currentBalance < cost) {
                showInsufficientBalance(cost, currentBalance);
                return;
            }
            
            const questions = [
                {
                    question: '–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —Ä—É–Ω–∞ –§–µ—Ö—É?',
                    options: ['–ë–æ–≥–∞—Ç—Å—Ç–≤–æ', '–°–∏–ª–∞', '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ', '–ë–æ–≥'],
                    correct: 0
                },
                {
                    question: '–ö–∞–∫–∞—è —Ä—É–Ω–∞ —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É–µ—Ç —Å–∏–ª—É?',
                    options: ['–§–µ—Ö—É', '–£—Ä—É–∑', '–¢—É—Ä–∏—Å–∞–∑', '–ê–Ω—Å—É–∑'],
                    correct: 1
                },
                {
                    question: '–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —Ä—É–Ω–∞ –†–∞–π–¥–æ?',
                    options: ['–ë–æ–≥–∞—Ç—Å—Ç–≤–æ', '–°–∏–ª–∞', '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ', '–ë–æ–≥'],
                    correct: 2
                },
                {
                    question: '–ö–∞–∫–∞—è —Ä—É–Ω–∞ —Å–≤—è–∑–∞–Ω–∞ —Å –±–æ–≥–æ–º?',
                    options: ['–§–µ—Ö—É', '–£—Ä—É–∑', '–¢—É—Ä–∏—Å–∞–∑', '–ê–Ω—Å—É–∑'],
                    correct: 3
                },
                {
                    question: '–ß—Ç–æ —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É–µ—Ç —Ä—É–Ω–∞ –ö–µ–Ω–∞–∑?',
                    options: ['–ë–æ–≥–∞—Ç—Å—Ç–≤–æ', '–§–∞–∫–µ–ª', '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ', '–ë–æ–≥'],
                    correct: 1
                }
            ];
            
            const gameModal = document.createElement('div');
            gameModal.className = 'game-modal';
            gameModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;
            
            const gameContent = document.createElement('div');
            gameContent.style.cssText = `
                background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
                color: white;
                padding: 40px;
                border-radius: 25px;
                text-align: center;
                max-width: 500px;
                width: 90%;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
                animation: slideInUp 0.5s ease-out;
            `;
            
            gameContent.innerHTML = `
                <div style="font-size: 60px; margin-bottom: 20px; animation: float 2s ease-in-out infinite;">üìö</div>
                <h2 style="margin: 0 0 20px 0; font-size: 28px;">–†—É–Ω–∏—á–µ—Å–∫–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞</h2>
                <p style="margin: 0 0 30px 0; font-size: 16px; opacity: 0.9;">–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ —Ä—É–Ω–∞—Ö!</p>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; margin-bottom: 5px;">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} –º–æ–Ω–µ—Ç</div>
                    <div style="font-size: 14px;">üí≥ –í–∞—à –±–∞–ª–∞–Ω—Å: ${currentBalance} –º–æ–Ω–µ—Ç</div>
                </div>
                
                <button onclick="startQuiz()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 15px 40px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 18px;
                    font-weight: 600;
                    transition: all 0.3s ease;
                    margin-bottom: 20px;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    üìö –ù–∞—á–∞—Ç—å –≤–∏–∫—Ç–æ—Ä–∏–Ω—É!
                </button>
                
                <button onclick="this.closest('.game-modal').remove()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 12px 30px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 16px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    –û—Ç–º–µ–Ω–∞
                </button>
            `;
            
            gameModal.appendChild(gameContent);
            document.body.appendChild(gameModal);
            
            function startQuiz() {
                deductCoins(cost);
                
                let currentQuestion = 0;
                let correctAnswers = 0;
                
                function showQuestion() {
                    const question = questions[currentQuestion];
                    
                    gameContent.innerHTML = `
                        <div style="font-size: 40px; margin-bottom: 20px;">üìö</div>
                        <h2 style="margin: 0 0 20px 0; font-size: 24px;">–í–æ–ø—Ä–æ—Å ${currentQuestion + 1} –∏–∑ ${questions.length}</h2>
                        <p style="margin: 0 0 30px 0; font-size: 18px; font-weight: 600;">${question.question}</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">
                            ${question.options.map((option, index) => `
                                <button class="quiz-option" data-answer="${index}" style="
                                    background: rgba(255,255,255,0.2);
                                    border: 2px solid rgba(255,255,255,0.3);
                                    color: white;
                                    padding: 15px;
                                    border-radius: 15px;
                                    cursor: pointer;
                                    font-size: 16px;
                                    transition: all 0.3s ease;
                                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                                    ${option}
                                </button>
                            `).join('')}
                        </div>
                    `;
                    
                    gameContent.querySelectorAll('.quiz-option').forEach(button => {
                        button.addEventListener('click', function() {
                            const selectedAnswer = parseInt(this.dataset.answer);
                            const isCorrect = selectedAnswer === question.correct;
                            
                            if (isCorrect) {
                                correctAnswers++;
                            }
                            
                            currentQuestion++;
                            
                            if (currentQuestion < questions.length) {
                                setTimeout(() => {
                                    showQuestion();
                                }, 1000);
                            } else {
                                showResults();
                            }
                        });
                    });
                }
                
                function showResults() {
                    const percentage = Math.round((correctAnswers / questions.length) * 100);
                    let reward = 0;
                    
                    if (percentage >= 80) reward = 500;
                    else if (percentage >= 60) reward = 300;
                    else if (percentage >= 40) reward = 150;
                    else reward = 50;
                    
                    gameContent.innerHTML = `
                        <div style="font-size: 60px; margin-bottom: 20px;">${percentage >= 80 ? 'üèÜ' : percentage >= 60 ? 'ü•à' : percentage >= 40 ? 'ü•â' : 'üìö'}</div>
                        <h2 style="margin: 0 0 20px 0; font-size: 24px;">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã</h2>
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                            <div style="font-size: 18px; margin-bottom: 10px;">–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: ${correctAnswers} –∏–∑ ${questions.length}</div>
                            <div style="font-size: 18px; margin-bottom: 10px;">–ü—Ä–æ—Ü–µ–Ω—Ç: ${percentage}%</div>
                            <div style="font-size: 18px;">–í—ã–∏–≥—Ä—ã—à: ${reward} –º–æ–Ω–µ—Ç</div>
                        </div>
                        <p style="margin: 0 0 20px 0; font-size: 16px;">
                            ${percentage >= 80 ? '–û—Ç–ª–∏—á–Ω—ã–µ –∑–Ω–∞–Ω–∏—è —Ä—É–Ω!' : 
                              percentage >= 60 ? '–•–æ—Ä–æ—à–∏–µ –∑–Ω–∞–Ω–∏—è!' : 
                              percentage >= 40 ? '–ù–µ–ø–ª–æ—Ö–æ!' : '–ò–∑—É—á–∞–π—Ç–µ —Ä—É–Ω—ã –¥–∞–ª—å—à–µ!'}
                        </p>
                        <button onclick="this.closest('.game-modal').remove()" style="
                            background: rgba(255,255,255,0.2);
                            border: 2px solid white;
                            color: white;
                            padding: 12px 30px;
                            border-radius: 25px;
                            cursor: pointer;
                            font-size: 16px;
                        ">
                            –ó–∞–∫—Ä—ã—Ç—å
                        </button>
                    `;
                    
                    addCoins(reward);
                }
                
                showQuestion();
            }
        }
        
        // –ò–≥—Ä–∞: –¢–∞—Ä–æ-–∫–≤–∏–∑
        function startTarotQuizGame() {
            console.log('üé¥ –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã "–¢–∞—Ä–æ-–∫–≤–∏–∑"');
            const cost = 60;
            const currentBalance = getCurrentBalance();
            
            if (currentBalance < cost) {
                showInsufficientBalance(cost, currentBalance);
                return;
            }
            
            const questions = [
                {
                    question: '–°–∫–æ–ª—å–∫–æ –∫–∞—Ä—Ç –≤ –∫–æ–ª–æ–¥–µ –¢–∞—Ä–æ?',
                    options: ['72', '78', '84', '90'],
                    correct: 1
                },
                {
                    question: '–°–∫–æ–ª—å–∫–æ –∫–∞—Ä—Ç –≤ –°—Ç–∞—Ä—à–∏—Ö –ê—Ä–∫–∞–Ω–∞—Ö?',
                    options: ['20', '21', '22', '23'],
                    correct: 2
                },
                {
                    question: '–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∫–∞—Ä—Ç–∞ "–î—É—Ä–∞–∫"?',
                    options: ['–ì–ª—É–ø–æ—Å—Ç—å', '–ù–∞—á–∞–ª–æ –ø—É—Ç–∏', '–ö–æ–Ω–µ—Ü', '–ú—É–¥—Ä–æ—Å—Ç—å'],
                    correct: 1
                },
                {
                    question: '–ö–∞–∫–∞—è –∫–∞—Ä—Ç–∞ –æ–∑–Ω–∞—á–∞–µ—Ç –ª—é–±–æ–≤—å?',
                    options: ['–ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞', '–í–ª—é–±–ª–µ–Ω–Ω—ã–µ', '–°–æ–ª–Ω—Ü–µ', '–õ—É–Ω–∞'],
                    correct: 1
                },
                {
                    question: '–ß—Ç–æ —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞—Ä—Ç–∞ "–°–º–µ—Ä—Ç—å"?',
                    options: ['–ö–æ–Ω–µ—Ü –∂–∏–∑–Ω–∏', '–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è', '–ë–æ–ª–µ–∑–Ω—å', '–ü–æ—Ç–µ—Ä—è'],
                    correct: 1
                }
            ];
            
            const gameModal = document.createElement('div');
            gameModal.className = 'game-modal';
            gameModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;
            
            const gameContent = document.createElement('div');
            gameContent.style.cssText = `
                background: linear-gradient(135deg, #8e44ad 0%, #9b59b6 100%);
                color: white;
                padding: 40px;
                border-radius: 25px;
                text-align: center;
                max-width: 500px;
                width: 90%;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
                animation: slideInUp 0.5s ease-out;
            `;
            
            gameContent.innerHTML = `
                <div style="font-size: 60px; margin-bottom: 20px; animation: float 2s ease-in-out infinite;">üé¥</div>
                <h2 style="margin: 0 0 20px 0; font-size: 28px;">–¢–∞—Ä–æ-–∫–≤–∏–∑</h2>
                <p style="margin: 0 0 30px 0; font-size: 16px; opacity: 0.9;">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–Ω–∞–Ω–∏—è –∫–∞—Ä—Ç –¢–∞—Ä–æ!</p>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; margin-bottom: 5px;">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} –º–æ–Ω–µ—Ç</div>
                    <div style="font-size: 14px;">üí≥ –í–∞—à –±–∞–ª–∞–Ω—Å: ${currentBalance} –º–æ–Ω–µ—Ç</div>
                </div>
                
                <button onclick="startTarotQuiz()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 15px 40px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 18px;
                    font-weight: 600;
                    transition: all 0.3s ease;
                    margin-bottom: 20px;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    üé¥ –ù–∞—á–∞—Ç—å –∫–≤–∏–∑!
                </button>
                
                <button onclick="this.closest('.game-modal').remove()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 12px 30px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 16px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    –û—Ç–º–µ–Ω–∞
                </button>
            `;
            
            gameModal.appendChild(gameContent);
            document.body.appendChild(gameModal);
            
            function startTarotQuiz() {
                deductCoins(cost);
                
                let currentQuestion = 0;
                let correctAnswers = 0;
                
                function showQuestion() {
                    const question = questions[currentQuestion];
                    
                    gameContent.innerHTML = `
                        <div style="font-size: 40px; margin-bottom: 20px;">üé¥</div>
                        <h2 style="margin: 0 0 20px 0; font-size: 24px;">–í–æ–ø—Ä–æ—Å ${currentQuestion + 1} –∏–∑ ${questions.length}</h2>
                        <p style="margin: 0 0 30px 0; font-size: 18px; font-weight: 600;">${question.question}</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">
                            ${question.options.map((option, index) => `
                                <button class="quiz-option" data-answer="${index}" style="
                                    background: rgba(255,255,255,0.2);
                                    border: 2px solid rgba(255,255,255,0.3);
                                    color: white;
                                    padding: 15px;
                                    border-radius: 15px;
                                    cursor: pointer;
                                    font-size: 16px;
                                    transition: all 0.3s ease;
                                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                                    ${option}
                                </button>
                            `).join('')}
                        </div>
                    `;
                    
                    gameContent.querySelectorAll('.quiz-option').forEach(button => {
                        button.addEventListener('click', function() {
                            const selectedAnswer = parseInt(this.dataset.answer);
                            const isCorrect = selectedAnswer === question.correct;
                            
                            if (isCorrect) {
                                correctAnswers++;
                            }
                            
                            currentQuestion++;
                            
                            if (currentQuestion < questions.length) {
                                setTimeout(() => {
                                    showQuestion();
                                }, 1000);
                            } else {
                                showResults();
                            }
                        });
                    });
                }
                
                function showResults() {
                    const percentage = Math.round((correctAnswers / questions.length) * 100);
                    let reward = 0;
                    
                    if (percentage >= 80) reward = 600;
                    else if (percentage >= 60) reward = 400;
                    else if (percentage >= 40) reward = 200;
                    else reward = 100;
                    
                    gameContent.innerHTML = `
                        <div style="font-size: 60px; margin-bottom: 20px;">${percentage >= 80 ? 'üèÜ' : percentage >= 60 ? 'ü•à' : percentage >= 40 ? 'ü•â' : 'üé¥'}</div>
                        <h2 style="margin: 0 0 20px 0; font-size: 24px;">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–≤–∏–∑–∞</h2>
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                            <div style="font-size: 18px; margin-bottom: 10px;">–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: ${correctAnswers} –∏–∑ ${questions.length}</div>
                            <div style="font-size: 18px; margin-bottom: 10px;">–ü—Ä–æ—Ü–µ–Ω—Ç: ${percentage}%</div>
                            <div style="font-size: 18px;">–í—ã–∏–≥—Ä—ã—à: ${reward} –º–æ–Ω–µ—Ç</div>
                        </div>
                        <p style="margin: 0 0 20px 0; font-size: 16px;">
                            ${percentage >= 80 ? '–û—Ç–ª–∏—á–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –¢–∞—Ä–æ!' : 
                              percentage >= 60 ? '–•–æ—Ä–æ—à–∏–µ –∑–Ω–∞–Ω–∏—è!' : 
                              percentage >= 40 ? '–ù–µ–ø–ª–æ—Ö–æ!' : '–ò–∑—É—á–∞–π—Ç–µ –¢–∞—Ä–æ –¥–∞–ª—å—à–µ!'}
                        </p>
                        <button onclick="this.closest('.game-modal').remove()" style="
                            background: rgba(255,255,255,0.2);
                            border: 2px solid white;
                            color: white;
                            padding: 12px 30px;
                            border-radius: 25px;
                            cursor: pointer;
                            font-size: 16px;
                        ">
                            –ó–∞–∫—Ä—ã—Ç—å
                        </button>
                    `;
                    
                    addCoins(reward);
                }
                
                showQuestion();
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function saveNotificationSetting() {
            const notificationsEnabled = document.getElementById('notificationsEnabled');
            localStorage.setItem('notificationsEnabled', notificationsEnabled.checked.toString());
            
            if (notificationsEnabled.checked) {
                showNotification('üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è', '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–∫–ª—é—á–µ–Ω—ã', 'success');
            } else {
                showNotification('üîï –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è', '–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–∫–ª—é—á–µ–Ω—ã', 'info');
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã —Å—Ä–∞–∑—É –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∫—Ä–∏–ø—Ç–∞
        (function() {
            console.log('üåô –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∫—Ä–∏–ø—Ç–∞...');
            const darkTheme = localStorage.getItem('darkTheme');
            if (darkTheme === 'enabled') {
                console.log('üåô –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º–Ω—É—é —Ç–µ–º—É —Å—Ä–∞–∑—É');
                document.body.setAttribute('data-theme', 'dark');
            }
        })();
        
        // –ó–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üì± DOM –∑–∞–≥—Ä—É–∂–µ–Ω');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
            updateNotificationCount();
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram WebApp –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è
            if (window.Telegram && window.Telegram.WebApp) {
                const tg = window.Telegram.WebApp;
                
                // –û—Ç–∫–ª—é—á–∞–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
                tg.enableClosingConfirmation();
                
                // –û—Ç–∫–ª—é—á–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –ø—Ä–∏ —Å–≤–∞–π–ø–µ
                tg.disableVerticalSwipes();
                
                // –û—Ç–∫–ª—é—á–∞–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
                tg.disableHorizontalSwipes();
                
                // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º
                tg.expand();
                
                // –û—Ç–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è
                tg.MainButton.hide();
                tg.BackButton.hide();
                
                console.log('üö´ –û—Ç–∫–ª—é—á–µ–Ω–æ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è');
            }
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–≤–∞–π–ø–æ–≤
            let startY = 0;
            let startX = 0;
            
            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º —Å–≤–∞–π–ø—ã –≤–Ω–∏–∑
            document.addEventListener('touchstart', function(e) {
                startY = e.touches[0].clientY;
                startX = e.touches[0].clientX;
            }, { passive: false });
            
            document.addEventListener('touchmove', function(e) {
                const currentY = e.touches[0].clientY;
                const currentX = e.touches[0].clientX;
                const diffY = startY - currentY;
                const diffX = startX - currentX;
                
                // –ï—Å–ª–∏ —Å–≤–∞–π–ø –≤–Ω–∏–∑ –±–æ–ª—å—à–µ —á–µ–º –≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ, –±–ª–æ–∫–∏—Ä—É–µ–º
                if (Math.abs(diffY) > Math.abs(diffX) && diffY < 0) {
                    e.preventDefault();
                }
            }, { passive: false });
            
            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
            });
            
            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
            document.addEventListener('selectstart', function(e) {
                e.preventDefault();
            });
            
            initBalance(); // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –±–∞–ª–∞–Ω—Å
            initTheme(); // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç–µ–º—É
            initNotifications(); // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–π
            const darkThemeToggle = document.getElementById('darkThemeToggle');
            const notificationsEnabled = document.getElementById('notificationsEnabled');
            
            console.log('üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–π...');
            console.log('üîß –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã –Ω–∞–π–¥–µ–Ω:', darkThemeToggle);
            console.log('üîß –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞–π–¥–µ–Ω:', notificationsEnabled);
            
            if (darkThemeToggle) {
                console.log('üîß –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è —Ç–µ–º—ã');
                darkThemeToggle.addEventListener('change', function() {
                    console.log('üåô –°–æ–±—ã—Ç–∏–µ change –Ω–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ —Ç–µ–º—ã');
                    toggleTheme();
                });
            } else {
                console.error('‚ùå –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã –Ω–µ –Ω–∞–π–¥–µ–Ω!');
            }
            
            if (notificationsEnabled) {
                console.log('üîß –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π');
                notificationsEnabled.addEventListener('change', function() {
                    console.log('üîî –°–æ–±—ã—Ç–∏–µ change –Ω–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π');
                    saveNotificationSetting();
                });
            } else {
                console.error('‚ùå –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω!');
            }
            
            setTimeout(initNav, 500);
            setTimeout(initSpreadButtons, 1000);
            
            // –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                console.log('üö® –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏...');
                initNav();
            }, 3000);
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã —á–µ—Ä–µ–∑ 4 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                console.log('üö® –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã...');
                initTheme();
            }, 4000);
            
            // –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                console.log('üö® –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–π...');
                const darkThemeToggle = document.getElementById('darkThemeToggle');
                const notificationsEnabled = document.getElementById('notificationsEnabled');
                
                if (darkThemeToggle && !darkThemeToggle.onchange) {
                    console.log('üîß –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è —Ç–µ–º—ã');
                    darkThemeToggle.addEventListener('change', function() {
                        console.log('üåô –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ change –Ω–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ —Ç–µ–º—ã');
                        toggleTheme();
                    });
                }
                
                if (notificationsEnabled && !notificationsEnabled.onchange) {
                    console.log('üîß –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π');
                    notificationsEnabled.addEventListener('change', function() {
                        console.log('üîî –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ change –Ω–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π');
                        saveNotificationSetting();
                    });
                }
                
                // –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã
                console.log('üö® –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã...');
                initTheme();
            }, 2000);
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–æ–∫ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                console.log('üîÑ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–æ–∫...');
                initSpreadButtons();
            }, 2000);
            
            // –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–æ–∫ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                console.log('üö® –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–Ω–æ–ø–æ–∫...');
                const spreadCards = document.querySelectorAll('.spread-card');
                spreadCards.forEach((card, index) => {
                    console.log(`üîß –≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã ${index + 1}:`, card);
                    
                    // –£–¥–∞–ª—è–µ–º –≤—Å–µ —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
                    card.onclick = null;
                    card.onmouseover = null;
                    card.onmouseout = null;
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
                    const spreadType = card.getAttribute('data-spread');
                    card.onclick = function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        console.log('üé¥ –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –∫–ª–∏–∫ –ø–æ —Ä–∞—Å–∫–ª–∞–¥—É:', spreadType);
                        startReading(spreadType);
                    };
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏
                    card.style.cursor = 'pointer';
                    card.style.transition = 'transform 0.2s ease';
                    
                    card.onmouseover = function() {
                        this.style.transform = 'scale(1.05)';
                    };
                    
                    card.onmouseout = function() {
                        this.style.transform = 'scale(1)';
                    };
                    
                    console.log(`‚úÖ –ö–∞—Ä—Ç–∞ ${index + 1} —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞`);
                });
            }, 5000);
            
            // –§–∏–Ω–∞–ª—å–Ω–∞—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ 7 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                console.log('üö® –§–ò–ù–ê–õ–¨–ù–ê–Ø —ç–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏...');
                initNav();
                
                // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
                const navButtons = document.querySelectorAll('.nav-item');
                navButtons.forEach((btn, index) => {
                    console.log(`üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ ${index + 1}:`, btn);
                    if (!btn.onclick) {
                        const btnId = btn.id;
                        if (btnId === 'navShop') {
                            btn.onclick = () => switchPage('shopPage', 'navShop');
                        } else if (btnId === 'navReadings') {
                            btn.onclick = () => switchPage('mainPage', 'navReadings');
                        } else if (btnId === 'navGames') {
                            btn.onclick = () => switchPage('gamesPage', 'navGames');
                        } else if (btnId === 'navCabinet') {
                            btn.onclick = () => switchPage('cabinetPage', 'navCabinet');
                        }
                        console.log(`‚úÖ –ö–Ω–æ–ø–∫–∞ ${btnId} —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞`);
                    }
                });
            }, 7000);
        });
    </script>
    
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–≥—Ä -->
    <script src="additional_games.js"></script>
    
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã -->
    <script src="economic_system.js"></script>
    
    <!-- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–≥—Ä -->
    <script>
        // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∏–≥—Ä —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ —Å–æ–±—ã—Ç–∏–π
        
        // –ò–≥—Ä–∞: –ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º –∫–æ–ª–µ—Å–æ–º)
        function startWheelOfFortuneGame() {
            console.log('üé° –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã "–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã"');
            const cost = 35;
            const currentBalance = getCurrentBalance();
            
            if (currentBalance < cost) {
                showInsufficientBalance(cost, currentBalance);
                return;
            }
            
            const prizes = [
                { name: '–ú–∞–ª—ã–π –ø—Ä–∏–∑', reward: 50, color: '#f39c12' },
                { name: '–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–∑', reward: 100, color: '#e74c3c' },
                { name: '–ë–æ–ª—å—à–æ–π –ø—Ä–∏–∑', reward: 150, color: '#9b59b6' },
                { name: '–°—É–ø–µ—Ä –ø—Ä–∏–∑', reward: 200, color: '#2ecc71' },
                { name: '–£–¥–∞—á–∞', reward: 25, color: '#3498db' },
                { name: '–ë–æ–Ω—É—Å', reward: 75, color: '#e67e22' },
                { name: '–î–∂–µ–∫–ø–æ—Ç', reward: 300, color: '#f1c40f' },
                { name: '–£—Ç–µ—à–∏—Ç–µ–ª—å–Ω—ã–π', reward: 10, color: '#95a5a6' }
            ];
            
            const gameModal = document.createElement('div');
            gameModal.className = 'game-modal';
            gameModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;
            
            const gameContent = document.createElement('div');
            gameContent.style.cssText = `
                background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
                color: white;
                padding: 40px;
                border-radius: 25px;
                text-align: center;
                max-width: 500px;
                width: 90%;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
                animation: slideInUp 0.5s ease-out;
            `;
            
            gameContent.innerHTML = `
                <div style="font-size: 60px; margin-bottom: 20px; animation: float 2s ease-in-out infinite;">üé°</div>
                <h2 style="margin: 0 0 20px 0; font-size: 28px;">–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã</h2>
                <p style="margin: 0 0 30px 0; font-size: 16px; opacity: 0.9;">–ö—Ä—É—Ç–∏—Ç–µ –∫–æ–ª–µ—Å–æ –∏ –≤—ã–∏–≥—Ä—ã–≤–∞–π—Ç–µ –ø—Ä–∏–∑—ã!</p>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; margin-bottom: 5px;">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} –º–æ–Ω–µ—Ç</div>
                    <div style="font-size: 14px;">üí≥ –í–∞—à –±–∞–ª–∞–Ω—Å: ${currentBalance} –º–æ–Ω–µ—Ç</div>
                </div>
                
                <button class="spin-wheel-btn" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 15px 40px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 18px;
                    font-weight: 600;
                    transition: all 0.3s ease;
                    margin-bottom: 20px;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    üé° –ö—Ä—É—Ç–∏—Ç—å –∫–æ–ª–µ—Å–æ!
                </button>
                
                <button onclick="this.closest('.game-modal').remove()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 12px 30px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 16px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    –û—Ç–º–µ–Ω–∞
                </button>
            `;
            
            gameModal.appendChild(gameContent);
            document.body.appendChild(gameModal);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏
            gameContent.querySelector('.spin-wheel-btn').addEventListener('click', function() {
                deductCoins(cost);
                
                // –°–æ–∑–¥–∞–µ–º –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –∫–æ–ª–µ—Å–æ (–∫–∞–∫ —Ä—É–ª–µ—Ç–∫–∞)
                const wheelContainer = document.createElement('div');
                wheelContainer.style.cssText = `
                    position: relative;
                    width: 300px;
                    height: 300px;
                    margin: 30px auto;
                    border-radius: 50%;
                    background: conic-gradient(
                        #2c3e50 0deg 45deg,
                        #e74c3c 45deg 90deg,
                        #2c3e50 90deg 135deg,
                        #e74c3c 135deg 180deg,
                        #2c3e50 180deg 225deg,
                        #e74c3c 225deg 270deg,
                        #2c3e50 270deg 315deg,
                        #e74c3c 315deg 360deg
                    );
                    box-shadow: 
                        0 0 40px rgba(0,0,0,0.8),
                        inset 0 0 30px rgba(0,0,0,0.3),
                        0 15px 50px rgba(0,0,0,0.4);
                    border: 6px solid #34495e;
                    transition: transform 4s cubic-bezier(0.25, 0.1, 0.25, 1);
                    transform-style: preserve-3d;
                `;
                
                // –î–æ–±–∞–≤–ª—è–µ–º —É–∫–∞–∑–∞—Ç–µ–ª—å (–∫–∞–∫ –≤ —Ä—É–ª–µ—Ç–∫–µ)
                const pointer = document.createElement('div');
                pointer.style.cssText = `
                    position: absolute;
                    top: -20px;
                    left: 50%;
                    transform: translateX(-50%);
                    width: 0;
                    height: 0;
                    border-left: 15px solid transparent;
                    border-right: 15px solid transparent;
                    border-top: 30px solid #f39c12;
                    z-index: 10;
                    filter: drop-shadow(0 6px 12px rgba(0,0,0,0.7));
                `;
                wheelContainer.appendChild(pointer);
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—É—é —Ç–æ—á–∫—É
                const centerDot = document.createElement('div');
                centerDot.style.cssText = `
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    width: 20px;
                    height: 20px;
                    background: #34495e;
                    border-radius: 50%;
                    border: 3px solid #f39c12;
                    z-index: 5;
                    box-shadow: 0 0 10px rgba(0,0,0,0.5);
                `;
                wheelContainer.appendChild(centerDot);
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Å–µ–∫—Ç–æ—Ä—ã —Å —Ç–µ–∫—Å—Ç–æ–º (–∫–∞–∫ –≤ —Ä—É–ª–µ—Ç–∫–µ)
                prizes.forEach((prize, index) => {
                    const sector = document.createElement('div');
                    const angle = (360 / prizes.length) * index;
                    sector.style.cssText = `
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform-origin: 0 0;
                        transform: rotate(${angle}deg) translateY(-50%);
                        width: 120px;
                        height: 2px;
                        text-align: right;
                        font-size: 12px;
                        font-weight: bold;
                        color: white;
                        text-shadow: 2px 2px 4px rgba(0,0,0,0.9);
                        padding-right: 15px;
                        line-height: 1;
                    `;
                    sector.textContent = prize.name;
                    wheelContainer.appendChild(sector);
                });
                
                gameContent.innerHTML = `
                    <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ö–æ–ª–µ—Å–æ –∫—Ä—É—Ç–∏—Ç—Å—è...</h2>
                    <p style="margin: 0 0 20px 0; font-size: 16px; opacity: 0.9;">–§–æ—Ä—Ç—É–Ω–∞ —Ä–µ—à–∞–µ—Ç –≤–∞—à—É —Å—É–¥—å–±—É...</p>
                `;
                gameContent.appendChild(wheelContainer);
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –≤—Ä–∞—â–µ–Ω–∏—è
                const randomRotation = 1800 + Math.random() * 1800; // 5-10 –æ–±–æ—Ä–æ—Ç–æ–≤
                
                // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
                setTimeout(() => {
                    wheelContainer.style.transform = `rotate(${randomRotation}deg)`;
                }, 100);
                
                setTimeout(() => {
                    const finalAngle = randomRotation % 360;
                    const sectorAngle = 360 / prizes.length;
                    const winningIndex = Math.floor((360 - finalAngle) / sectorAngle) % prizes.length;
                    const prize = prizes[winningIndex];
                    
                    gameContent.innerHTML = `
                        <div style="font-size: 60px; margin-bottom: 20px;">üéâ</div>
                        <h2 style="margin: 0 0 20px 0; font-size: 24px;">${prize.name}!</h2>
                        <div style="background: ${prize.color}; padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                            <div style="font-size: 32px; font-weight: 700; margin-bottom: 10px;">${prize.reward} –º–æ–Ω–µ—Ç</div>
                            <div style="font-size: 18px; opacity: 0.9;">${prize.name}</div>
                        </div>
                        <p style="margin: 0 0 20px 0; font-size: 16px;">
                            –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –≤—ã–∏–≥—Ä—ã—à–µ–º!
                        </p>
                        <button onclick="this.closest('.game-modal').remove()" style="
                            background: rgba(255,255,255,0.2);
                            border: 2px solid white;
                            color: white;
                            padding: 12px 30px;
                            border-radius: 25px;
                            cursor: pointer;
                            font-size: 16px;
                        ">
                            –ó–∞–∫—Ä—ã—Ç—å
                        </button>
                    `;
                    
                    addCoins(prize.reward);
                }, 3000);
            });
        }
        
        // –ò–≥—Ä–∞: –ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ª–∞–±–∏—Ä–∏–Ω—Ç (–º–Ω–æ–≥–æ—Ö–æ–¥–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)
        function startMysticLabyrinthGame() {
            console.log('üåÄ –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã "–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ª–∞–±–∏—Ä–∏–Ω—Ç"');
            const cost = 40;
            const currentBalance = getCurrentBalance();
            
            if (currentBalance < cost) {
                showInsufficientBalance(cost, currentBalance);
                return;
            }
            
            const gameModal = document.createElement('div');
            gameModal.className = 'game-modal';
            gameModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;
            
            const gameContent = document.createElement('div');
            gameContent.style.cssText = `
                background: linear-gradient(135deg, #8e44ad 0%, #9b59b6 100%);
                color: white;
                padding: 40px;
                border-radius: 25px;
                text-align: center;
                max-width: 500px;
                width: 90%;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
                animation: slideInUp 0.5s ease-out;
            `;
            
            let currentStep = 0;
            let totalReward = 0;
            let collectedRewards = [];
            const maxSteps = 5; // –ú–∞–∫—Å–∏–º—É–º 5 —à–∞–≥–æ–≤
            
            function showLabyrinthStep() {
                const rewards = [
                    { name: '–°–æ–∫—Ä–æ–≤–∏—â–µ', reward: 200, emoji: 'üíé' },
                    { name: '–ú–∞–≥–∏—á–µ—Å–∫–∏–π –∫—Ä–∏—Å—Ç–∞–ª–ª', reward: 150, emoji: 'üîÆ' },
                    { name: '–î—Ä–µ–≤–Ω–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç', reward: 100, emoji: '‚ö±Ô∏è' },
                    { name: '–†—É–Ω–∏—á–µ—Å–∫–∏–π –∫–∞–º–µ–Ω—å', reward: 75, emoji: 'ü™®' },
                    { name: '–ú–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –ø—ã–ª—å', reward: 50, emoji: '‚ú®' }
                ];
                
                // –í—ã—á–∏—Å–ª—è–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç –Ω–µ—É–¥–∞—á–∏ (–ø–æ–Ω–∏–∂–∞–µ—Ç—Å—è —Å –∫–∞–∂–¥—ã–º —à–∞–≥–æ–º)
                const failureChance = Math.max(10, 50 - (currentStep * 8)); // –û—Ç 50% –¥–æ 10%
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞ –Ω–µ—É–¥–∞—á—É
                if (Math.random() * 100 < failureChance) {
                    gameContent.innerHTML = `
                        <div style="font-size: 60px; margin-bottom: 20px;">üíÄ</div>
                        <h2 style="margin: 0 0 20px 0; font-size: 24px;">–õ–æ–≤—É—à–∫–∞!</h2>
                        <div style="background: rgba(231, 76, 60, 0.2); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                            <div style="font-size: 18px; margin-bottom: 10px;">–í—ã –ø–æ–ø–∞–ª–∏ –≤ –ª–æ–≤—É—à–∫—É!</div>
                            <div style="font-size: 24px; font-weight: 700;">–ü–æ—Ç–µ—Ä—è–Ω–æ: ${totalReward} –º–æ–Ω–µ—Ç</div>
                        </div>
                        <p style="margin: 0 0 20px 0; font-size: 16px;">
                            –®–∞–Ω—Å –Ω–µ—É–¥–∞—á–∏ –±—ã–ª: ${failureChance}%
                        </p>
                        <button onclick="this.closest('.game-modal').remove()" style="
                            background: rgba(255,255,255,0.2);
                            border: 2px solid white;
                            color: white;
                            padding: 12px 30px;
                            border-radius: 25px;
                            cursor: pointer;
                            font-size: 16px;
                        ">
                            –ó–∞–∫—Ä—ã—Ç—å
                        </button>
                    `;
                    return;
                }
                
                const randomReward = rewards[Math.floor(Math.random() * rewards.length)];
                collectedRewards.push(randomReward);
                totalReward += randomReward.reward;
                currentStep++;
                
                gameContent.innerHTML = `
                    <div style="font-size: 60px; margin-bottom: 20px;">${randomReward.emoji}</div>
                    <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ù–∞–π–¥–µ–Ω–æ —Å–æ–∫—Ä–æ–≤–∏—â–µ!</h2>
                    <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                        <div style="font-size: 18px; margin-bottom: 10px;">${randomReward.name}</div>
                        <div style="font-size: 24px; font-weight: 700;">+${randomReward.reward} –º–æ–Ω–µ—Ç</div>
                    </div>
                    <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                        <div style="font-size: 16px; margin-bottom: 5px;">–û–±—â–∏–π –≤—ã–∏–≥—Ä—ã—à: ${totalReward} –º–æ–Ω–µ—Ç</div>
                        <div style="font-size: 14px; opacity: 0.8;">–®–∞–≥ ${currentStep} –∏–∑ ${maxSteps}</div>
                        <div style="font-size: 14px; opacity: 0.8;">–®–∞–Ω—Å –Ω–µ—É–¥–∞—á–∏: ${Math.max(10, 50 - (currentStep * 8))}%</div>
                    </div>
                    <p style="margin: 0 0 20px 0; font-size: 16px;">
                        ${currentStep >= 2 ? '–ú–æ–∂–µ—Ç–µ –∑–∞–±—Ä–∞—Ç—å –ø—Ä–∏–∑ –∏–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å (—Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –≤—Å–µ–≥–æ)!' : '–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ...'}
                    </p>
                    ${currentStep < maxSteps ? `
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">
                            <button class="labyrinth-path" data-path="left" style="
                                background: rgba(255,255,255,0.2);
                                border: 2px solid rgba(255,255,255,0.3);
                                color: white;
                                padding: 15px;
                                border-radius: 15px;
                                cursor: pointer;
                                font-size: 14px;
                                transition: all 0.3s ease;
                            " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                               onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                                ‚¨ÖÔ∏è –õ–µ–≤—ã–π –ø—É—Ç—å
                            </button>
                            <button class="labyrinth-path" data-path="right" style="
                                background: rgba(255,255,255,0.2);
                                border: 2px solid rgba(255,255,255,0.3);
                                color: white;
                                padding: 15px;
                                border-radius: 15px;
                                cursor: pointer;
                                font-size: 14px;
                                transition: all 0.3s ease;
                            " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                               onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                                ‚û°Ô∏è –ü—Ä–∞–≤—ã–π –ø—É—Ç—å
                            </button>
                        </div>
                    ` : ''}
                    ${currentStep >= 2 ? `
                        <button class="take-reward-btn" style="
                            background: rgba(46, 204, 113, 0.8);
                            border: 2px solid #2ecc71;
                            color: white;
                            padding: 15px 30px;
                            border-radius: 25px;
                            cursor: pointer;
                            font-size: 16px;
                            font-weight: 600;
                            transition: all 0.3s ease;
                            margin-bottom: 15px;
                        " onmouseover="this.style.background='rgba(46, 204, 113, 1)'" 
                           onmouseout="this.style.background='rgba(46, 204, 113, 0.8)'">
                            üí∞ –ó–∞–±—Ä–∞—Ç—å –ø—Ä–∏–∑ (${totalReward} –º–æ–Ω–µ—Ç)
                        </button>
                    ` : ''}
                    <button onclick="this.closest('.game-modal').remove()" style="
                        background: rgba(255,255,255,0.2);
                        border: 2px solid white;
                        color: white;
                        padding: 12px 30px;
                        border-radius: 25px;
                        cursor: pointer;
                        font-size: 16px;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                       onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                        –û—Ç–º–µ–Ω–∞
                    </button>
                `;
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è
                gameContent.querySelectorAll('.labyrinth-path').forEach(button => {
                    button.addEventListener('click', function() {
                        if (currentStep >= 3) {
                            // –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞ - –≤—Å–µ —Å–≥–æ—Ä–µ–ª–æ
                            gameContent.innerHTML = `
                                <div style="font-size: 60px; margin-bottom: 20px;">üî•</div>
                                <h2 style="margin: 0 0 20px 0; font-size: 24px;">–í—Å–µ —Å–≥–æ—Ä–µ–ª–æ!</h2>
                                <div style="background: rgba(231, 76, 60, 0.2); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                                    <div style="font-size: 18px; margin-bottom: 10px;">–í—ã –∑–∞—à–ª–∏ —Å–ª–∏—à–∫–æ–º –¥–∞–ª–µ–∫–æ...</div>
                                    <div style="font-size: 16px; opacity: 0.9;">–í—Å–µ —Å–æ–∫—Ä–æ–≤–∏—â–∞ –ø–æ—Ç–µ—Ä—è–Ω—ã!</div>
                                </div>
                                <p style="margin: 0 0 20px 0; font-size: 16px;">
                                    –í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –±—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω–µ–µ!
                                </p>
                                <button onclick="this.closest('.game-modal').remove()" style="
                                    background: rgba(255,255,255,0.2);
                                    border: 2px solid white;
                                    color: white;
                                    padding: 12px 30px;
                                    border-radius: 25px;
                                    cursor: pointer;
                                    font-size: 16px;
                                ">
                                    –ó–∞–∫—Ä—ã—Ç—å
                                </button>
                            `;
                        } else {
                            // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –∏–≥—Ä—É
                            gameContent.innerHTML = `
                                <div style="font-size: 80px; margin-bottom: 20px; animation: spin 2s linear infinite;">üåÄ</div>
                                <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ò—Å—Å–ª–µ–¥—É–µ–º –¥–∞–ª—å—à–µ...</h2>
                                <p style="margin: 0; font-size: 16px; opacity: 0.9;">–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏–ª—ã –≤–µ–¥—É—Ç –≤–∞—Å...</p>
                            `;
                            
                            setTimeout(() => {
                                showLabyrinthStep();
                            }, 2000);
                        }
                    });
                });
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –≤–∑—è—Ç–∏—è –ø—Ä–∏–∑–∞
                const takeRewardBtn = gameContent.querySelector('.take-reward-btn');
                if (takeRewardBtn) {
                    takeRewardBtn.addEventListener('click', function() {
                        gameContent.innerHTML = `
                            <div style="font-size: 60px; margin-bottom: 20px;">üéâ</div>
                            <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h2>
                            <div style="background: rgba(46, 204, 113, 0.2); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                                <div style="font-size: 18px; margin-bottom: 10px;">–í—ã —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—à–ª–∏ –ª–∞–±–∏—Ä–∏–Ω—Ç!</div>
                                <div style="font-size: 24px; font-weight: 700;">–í—ã–∏–≥—Ä—ã—à: ${totalReward} –º–æ–Ω–µ—Ç</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                                <div style="font-size: 14px; margin-bottom: 10px;">–ù–∞–π–¥–µ–Ω–Ω—ã–µ —Å–æ–∫—Ä–æ–≤–∏—â–∞:</div>
                                ${collectedRewards.map(reward => `
                                    <div style="font-size: 12px; opacity: 0.8;">${reward.emoji} ${reward.name} (+${reward.reward})</div>
                                `).join('')}
                            </div>
                            <button onclick="this.closest('.game-modal').remove()" style="
                                background: rgba(255,255,255,0.2);
                                border: 2px solid white;
                                color: white;
                                padding: 12px 30px;
                                border-radius: 25px;
                                cursor: pointer;
                                font-size: 16px;
                            ">
                                –ó–∞–∫—Ä—ã—Ç—å
                            </button>
                        `;
                        
                        addCoins(totalReward);
                    });
                }
            }
            
            gameContent.innerHTML = `
                <div style="font-size: 60px; margin-bottom: 20px; animation: float 2s ease-in-out infinite;">üåÄ</div>
                <h2 style="margin: 0 0 20px 0; font-size: 28px;">–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –ª–∞–±–∏—Ä–∏–Ω—Ç</h2>
                <p style="margin: 0 0 30px 0; font-size: 16px; opacity: 0.9;">–ò—Å—Å–ª–µ–¥—É–π—Ç–µ –ª–∞–±–∏—Ä–∏–Ω—Ç –∏ —Å–æ–±–∏—Ä–∞–π—Ç–µ —Å–æ–∫—Ä–æ–≤–∏—â–∞!</p>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; margin-bottom: 5px;">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} –º–æ–Ω–µ—Ç</div>
                    <div style="font-size: 14px;">üí≥ –í–∞—à –±–∞–ª–∞–Ω—Å: ${currentBalance} –º–æ–Ω–µ—Ç</div>
                </div>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; margin-bottom: 5px;">üéØ –ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã:</div>
                    <div style="font-size: 12px; opacity: 0.8; text-align: left;">
                        ‚Ä¢ –°–æ–±–∏—Ä–∞–π—Ç–µ —Å–æ–∫—Ä–æ–≤–∏—â–∞ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ<br>
                        ‚Ä¢ –ü–æ—Å–ª–µ 2-–≥–æ —à–∞–≥–∞ –º–æ–∂–µ—Ç–µ –∑–∞–±—Ä–∞—Ç—å –ø—Ä–∏–∑<br>
                        ‚Ä¢ –ò–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å (—Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ –≤—Å–µ–≥–æ!)<br>
                        ‚Ä¢ –ú–∞–∫—Å–∏–º—É–º 5 —É—Ä–æ–≤–Ω–µ–π<br>
                        ‚Ä¢ –®–∞–Ω—Å –Ω–µ—É–¥–∞—á–∏ —Å–Ω–∏–∂–∞–µ—Ç—Å—è —Å –∫–∞–∂–¥—ã–º —à–∞–≥–æ–º
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">
                    <button class="labyrinth-path" data-path="left" style="
                        background: rgba(255,255,255,0.2);
                        border: 2px solid rgba(255,255,255,0.3);
                        color: white;
                        padding: 20px;
                        border-radius: 15px;
                        cursor: pointer;
                        font-size: 16px;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                       onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                        ‚¨ÖÔ∏è –õ–µ–≤—ã–π –ø—É—Ç—å
                    </button>
                    <button class="labyrinth-path" data-path="right" style="
                        background: rgba(255,255,255,0.2);
                        border: 2px solid rgba(255,255,255,0.3);
                        color: white;
                        padding: 20px;
                        border-radius: 15px;
                        cursor: pointer;
                        font-size: 16px;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                       onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                        ‚û°Ô∏è –ü—Ä–∞–≤—ã–π –ø—É—Ç—å
                    </button>
                </div>
                
                <button onclick="this.closest('.game-modal').remove()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 12px 30px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 16px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    –û—Ç–º–µ–Ω–∞
                </button>
            `;
            
            gameModal.appendChild(gameContent);
            document.body.appendChild(gameModal);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–Ω–æ–ø–æ–∫
            gameContent.querySelectorAll('.labyrinth-path').forEach(button => {
                button.addEventListener('click', function() {
                    deductCoins(cost);
                    
                    gameContent.innerHTML = `
                        <div style="font-size: 80px; margin-bottom: 20px; animation: spin 2s linear infinite;">üåÄ</div>
                        <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ò—Å—Å–ª–µ–¥—É–µ–º –ª–∞–±–∏—Ä–∏–Ω—Ç...</h2>
                        <p style="margin: 0; font-size: 16px; opacity: 0.9;">–ú–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏–ª—ã –≤–µ–¥—É—Ç –≤–∞—Å...</p>
                    `;
                    
                    setTimeout(() => {
                        showLabyrinthStep();
                    }, 2000);
                });
            });
        }
        
        // –ò–≥—Ä–∞: –ó–≤–µ–∑–¥–Ω–∞—è –∫–∞—Ä—Ç–∞ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
        function startStarMapGame() {
            console.log('‚≠ê –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã "–ó–≤–µ–∑–¥–Ω–∞—è –∫–∞—Ä—Ç–∞"');
            const cost = 45;
            const currentBalance = getCurrentBalance();
            
            if (currentBalance < cost) {
                showInsufficientBalance(cost, currentBalance);
                return;
            }
            
            const constellations = [
                { name: '–û—Ä–∏–æ–Ω', symbol: 'üèπ', stars: '‚≠ê‚≠ê‚≠ê' },
                { name: '–ë–æ–ª—å—à–∞—è –ú–µ–¥–≤–µ–¥–∏—Ü–∞', symbol: 'üêª', stars: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê' },
                { name: '–ö–∞—Å—Å–∏–æ–ø–µ—è', symbol: 'üëë', stars: '‚≠ê‚≠ê‚≠ê‚≠ê' },
                { name: '–õ–µ–±–µ–¥—å', symbol: 'ü¶¢', stars: '‚≠ê‚≠ê‚≠ê' },
                { name: '–ü–µ–≥–∞—Å', symbol: 'üê¥', stars: '‚≠ê‚≠ê‚≠ê‚≠ê' },
                { name: '–î—Ä–∞–∫–æ–Ω', symbol: 'üêâ', stars: '‚≠ê‚≠ê‚≠ê' },
                { name: '–ì–µ—Ä–∫—É–ª–µ—Å', symbol: 'üí™', stars: '‚≠ê‚≠ê‚≠ê' },
                { name: '–ê–Ω–¥—Ä–æ–º–µ–¥–∞', symbol: 'üë∏', stars: '‚≠ê‚≠ê‚≠ê' }
            ];
            
            const gameModal = document.createElement('div');
            gameModal.className = 'game-modal';
            gameModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;
            
            const gameContent = document.createElement('div');
            gameContent.style.cssText = `
                background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
                color: white;
                padding: 40px;
                border-radius: 25px;
                text-align: center;
                max-width: 500px;
                width: 90%;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
                animation: slideInUp 0.5s ease-out;
            `;
            
            gameContent.innerHTML = `
                <div style="font-size: 60px; margin-bottom: 20px; animation: float 2s ease-in-out infinite;">‚≠ê</div>
                <h2 style="margin: 0 0 20px 0; font-size: 28px;">–ó–≤–µ–∑–¥–Ω–∞—è –∫–∞—Ä—Ç–∞</h2>
                <p style="margin: 0 0 30px 0; font-size: 16px; opacity: 0.9;">–£–≥–∞–¥–∞–π—Ç–µ —Å–æ–∑–≤–µ–∑–¥–∏–µ –ø–æ —Å–∏–º–≤–æ–ª–∞–º!</p>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; margin-bottom: 5px;">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} –º–æ–Ω–µ—Ç</div>
                    <div style="font-size: 14px;">üí≥ –í–∞—à –±–∞–ª–∞–Ω—Å: ${currentBalance} –º–æ–Ω–µ—Ç</div>
                </div>
                
                <button class="start-star-game" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 15px 40px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 18px;
                    font-weight: 600;
                    transition: all 0.3s ease;
                    margin-bottom: 20px;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    ‚≠ê –ù–∞—á–∞—Ç—å –∏–≥—Ä—É!
                </button>
                
                <button onclick="this.closest('.game-modal').remove()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 12px 30px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 16px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    –û—Ç–º–µ–Ω–∞
                </button>
            `;
            
            gameModal.appendChild(gameContent);
            document.body.appendChild(gameModal);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏
            gameContent.querySelector('.start-star-game').addEventListener('click', function() {
                deductCoins(cost);
                
                gameContent.innerHTML = `
                    <div style="font-size: 80px; margin-bottom: 20px; animation: spin 2s linear infinite;">‚≠ê</div>
                    <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ó–≤–µ–∑–¥—ã –≤—ã—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è...</h2>
                    <p style="margin: 0; font-size: 16px; opacity: 0.9;">–ö–æ—Å–º–∏—á–µ—Å–∫–∏–µ —Å–∏–ª—ã —Ä–∞–±–æ—Ç–∞—é—Ç...</p>
                `;
                
                setTimeout(() => {
                    const randomConstellation = Math.floor(Math.random() * constellations.length);
                    const constellation = constellations[randomConstellation];
                    
                    // –°–æ–∑–¥–∞–µ–º –≤–∏–∑—É–∞–ª—å–Ω–æ–µ —Å–æ–∑–≤–µ–∑–¥–∏–µ
                    const starMap = document.createElement('div');
                    starMap.style.cssText = `
                        position: relative;
                        width: 250px;
                        height: 250px;
                        margin: 20px auto;
                        background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
                        border-radius: 50%;
                        border: 2px solid rgba(255,255,255,0.3);
                    `;
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –∑–≤–µ–∑–¥—ã –≤ –≤–∏–¥–µ —Ç–æ—á–µ–∫ (–≤–Ω—É—Ç—Ä–∏ –∫—Ä—É–≥–∞)
                    const starPositions = [
                        { x: 50, y: 25 }, { x: 75, y: 35 }, { x: 25, y: 45 },
                        { x: 65, y: 55 }, { x: 50, y: 65 }, { x: 80, y: 75 },
                        { x: 35, y: 80 }, { x: 60, y: 85 }
                    ];
                    
                    starPositions.forEach((pos, index) => {
                        const star = document.createElement('div');
                        star.style.cssText = `
                            position: absolute;
                            left: ${pos.x}%;
                            top: ${pos.y}%;
                            width: 6px;
                            height: 6px;
                            background: white;
                            border-radius: 50%;
                            box-shadow: 0 0 8px white;
                            animation: twinkle ${1 + Math.random() * 2}s ease-in-out infinite alternate;
                        `;
                        starMap.appendChild(star);
                    });
                    
                    gameContent.innerHTML = `
                        <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ö–∞–∫–æ–µ —ç—Ç–æ —Å–æ–∑–≤–µ–∑–¥–∏–µ?</h2>
                    `;
                    gameContent.appendChild(starMap);
                    
                    gameContent.innerHTML += `
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 20px; max-width: 400px; margin-left: auto; margin-right: auto;">
                            ${constellations.map((constellation, index) => `
                                <button class="constellation-choice" data-const="${index}" style="
                                    background: rgba(255,255,255,0.2);
                                    border: 2px solid rgba(255,255,255,0.3);
                                    color: white;
                                    padding: 12px 8px;
                                    border-radius: 12px;
                                    cursor: pointer;
                                    font-size: 12px;
                                    transition: all 0.3s ease;
                                    min-height: 50px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                    text-align: center;
                                    line-height: 1.2;
                                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                                    <div>
                                        <div style="font-size: 16px; margin-bottom: 2px;">${constellation.symbol}</div>
                                        <div style="font-size: 10px;">${constellation.name}</div>
                                    </div>
                                </button>
                            `).join('')}
                        </div>
                    `;
                    
                    gameContent.querySelectorAll('.constellation-choice').forEach(button => {
                        button.addEventListener('click', function() {
                            const selectedConst = parseInt(this.dataset.const);
                            const isWin = selectedConst === randomConstellation;
                            const reward = isWin ? 300 : 0;
                            
                            gameContent.innerHTML = `
                                <div style="font-size: 60px; margin-bottom: 20px;">${isWin ? 'üåü' : '‚≠ê'}</div>
                                <h2 style="margin: 0 0 20px 0; font-size: 24px;">${isWin ? '–ü—Ä–∞–≤–∏–ª—å–Ω–æ!' : '–ù–µ–≤–µ—Ä–Ω–æ!'}</h2>
                                <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                                    <div style="font-size: 18px; margin-bottom: 10px;">–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${constellation.symbol} ${constellation.name}</div>
                                    <div style="font-size: 16px; opacity: 0.9;">–í–∞—à –≤—ã–±–æ—Ä: ${constellations[selectedConst].symbol} ${constellations[selectedConst].name}</div>
                                </div>
                                <p style="margin: 0 0 20px 0; font-size: 16px;">
                                    ${isWin ? `–û—Ç–ª–∏—á–Ω–æ! –í—ã–∏–≥—Ä—ã—à: ${reward} –º–æ–Ω–µ—Ç` : '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!'}
                                </p>
                                <button onclick="this.closest('.game-modal').remove()" style="
                                    background: rgba(255,255,255,0.2);
                                    border: 2px solid white;
                                    color: white;
                                    padding: 12px 30px;
                                    border-radius: 25px;
                                    cursor: pointer;
                                    font-size: 16px;
                                ">
                                    –ó–∞–∫—Ä—ã—Ç—å
                                </button>
                            `;
                            
                            if (reward > 0) {
                                addCoins(reward);
                            }
                        });
                    });
                }, 2000);
            });
        }
        
        // –ò–≥—Ä–∞: –ö—Ä–∏—Å—Ç–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
        function startCrystalMemoryGame() {
            console.log('üíé –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã "–ö—Ä–∏—Å—Ç–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å"');
            const cost = 50;
            const currentBalance = getCurrentBalance();
            
            if (currentBalance < cost) {
                showInsufficientBalance(cost, currentBalance);
                return;
            }
            
            const gameModal = document.createElement('div');
            gameModal.className = 'game-modal';
            gameModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;
            
            const gameContent = document.createElement('div');
            gameContent.style.cssText = `
                background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
                color: white;
                padding: 40px;
                border-radius: 25px;
                text-align: center;
                max-width: 400px;
                width: 90%;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
                animation: slideInUp 0.5s ease-out;
            `;
            
            gameContent.innerHTML = `
                <div style="font-size: 60px; margin-bottom: 20px; animation: float 2s ease-in-out infinite;">üíé</div>
                <h2 style="margin: 0 0 20px 0; font-size: 28px;">–ö—Ä–∏—Å—Ç–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å</h2>
                <p style="margin: 0 0 30px 0; font-size: 16px; opacity: 0.9;">–ó–∞–ø–æ–º–Ω–∏—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤!</p>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; margin-bottom: 5px;">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} –º–æ–Ω–µ—Ç</div>
                    <div style="font-size: 14px;">üí≥ –í–∞—à –±–∞–ª–∞–Ω—Å: ${currentBalance} –º–æ–Ω–µ—Ç</div>
                </div>
                
                <button class="start-memory-game" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 15px 40px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 18px;
                    font-weight: 600;
                    transition: all 0.3s ease;
                    margin-bottom: 20px;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    üíé –ù–∞—á–∞—Ç—å –∏–≥—Ä—É!
                </button>
                
                <button onclick="this.closest('.game-modal').remove()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 12px 30px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 16px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    –û—Ç–º–µ–Ω–∞
                </button>
            `;
            
            gameModal.appendChild(gameContent);
            document.body.appendChild(gameModal);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏
            gameContent.querySelector('.start-memory-game').addEventListener('click', function() {
                deductCoins(cost);
                
                const crystals = ['üíé', 'üîÆ', 'üí†', 'üî∑', 'üíô'];
                const sequence = [];
                const sequenceLength = 3 + Math.floor(Math.random() * 3); // 3-5 –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤
                
                // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                for (let i = 0; i < sequenceLength; i++) {
                    sequence.push(crystals[Math.floor(Math.random() * crystals.length)]);
                }
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                gameContent.innerHTML = `
                    <div style="font-size: 60px; margin-bottom: 20px;">üíé</div>
                    <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ó–∞–ø–æ–º–Ω–∏—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å!</h2>
                    <div style="font-size: 40px; margin-bottom: 20px; letter-spacing: 10px;">
                        ${sequence.join(' ')}
                    </div>
                    <p style="margin: 0; font-size: 16px; opacity: 0.9;">–°–µ–∫—É–Ω–¥ –¥–æ –Ω–∞—á–∞–ª–∞...</p>
                `;
                
                let countdown = 3;
                const countdownInterval = setInterval(() => {
                    countdown--;
                    if (countdown > 0) {
                        gameContent.querySelector('p').textContent = `–°–µ–∫—É–Ω–¥ –¥–æ –Ω–∞—á–∞–ª–∞: ${countdown}`;
                    } else {
                        clearInterval(countdownInterval);
                        startMemoryTest();
                    }
                }, 1000);
                
                function startMemoryTest() {
                    gameContent.innerHTML = `
                        <div style="font-size: 60px; margin-bottom: 20px;">üîÆ</div>
                        <h2 style="margin: 0 0 20px 0; font-size: 24px;">–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å!</h2>
                        <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; margin-bottom: 20px; max-width: 300px; margin-left: auto; margin-right: auto;">
                            ${crystals.map((crystal, index) => `
                                <button class="crystal-choice" data-crystal="${crystal}" style="
                                    background: rgba(255,255,255,0.2);
                                    border: 2px solid rgba(255,255,255,0.3);
                                    color: white;
                                    padding: 8px;
                                    border-radius: 10px;
                                    cursor: pointer;
                                    font-size: 16px;
                                    transition: all 0.3s ease;
                                    min-height: 40px;
                                    display: flex;
                                    align-items: center;
                                    justify-content: center;
                                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                                    ${crystal}
                                </button>
                            `).join('')}
                        </div>
                        <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                            <div style="font-size: 16px;">–í–∞—à–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</div>
                            <div id="user-sequence" style="font-size: 24px; margin-top: 10px; min-height: 30px;"></div>
                        </div>
                    `;
                    
                    let userSequence = [];
                    const userSequenceDiv = document.getElementById('user-sequence');
                    
                    gameContent.querySelectorAll('.crystal-choice').forEach(button => {
                        button.addEventListener('click', function() {
                            const crystal = this.dataset.crystal;
                            userSequence.push(crystal);
                            userSequenceDiv.textContent = userSequence.join(' ');
                            
                            if (userSequence.length === sequence.length) {
                                checkSequence();
                            }
                        });
                    });
                    
                    function checkSequence() {
                        const isCorrect = JSON.stringify(userSequence) === JSON.stringify(sequence);
                        let reward = 0;
                        
                        if (isCorrect) {
                            reward = 100 + (sequence.length - 3) * 50; // 100-200 –º–æ–Ω–µ—Ç
                        }
                        
                        gameContent.innerHTML = `
                            <div style="font-size: 60px; margin-bottom: 20px;">${isCorrect ? 'üéâ' : 'üíé'}</div>
                            <h2 style="margin: 0 0 20px 0; font-size: 24px;">${isCorrect ? '–ü—Ä–∞–≤–∏–ª—å–Ω–æ!' : '–ù–µ–≤–µ—Ä–Ω–æ!'}</h2>
                            <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                                <div style="font-size: 18px; margin-bottom: 10px;">–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</div>
                                <div style="font-size: 24px; margin-bottom: 10px;">${sequence.join(' ')}</div>
                                <div style="font-size: 18px; margin-bottom: 10px;">–í–∞—à–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</div>
                                <div style="font-size: 24px;">${userSequence.join(' ')}</div>
                            </div>
                            <p style="margin: 0 0 20px 0; font-size: 16px;">
                                ${isCorrect ? `–û—Ç–ª–∏—á–Ω–æ! –í—ã–∏–≥—Ä—ã—à: ${reward} –º–æ–Ω–µ—Ç` : '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!'}
                            </p>
                            <button onclick="this.closest('.game-modal').remove()" style="
                                background: rgba(255,255,255,0.2);
                                border: 2px solid white;
                                color: white;
                                padding: 12px 30px;
                                border-radius: 25px;
                                cursor: pointer;
                                font-size: 16px;
                            ">
                                –ó–∞–∫—Ä—ã—Ç—å
                            </button>
                        `;
                        
                        if (reward > 0) {
                            addCoins(reward);
                        }
                    }
                }
            });
        }
        
        // –ò–≥—Ä–∞: –†—É–Ω–∏—á–µ—Å–∫–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
        function startRunicQuizGame() {
            console.log('üìö –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã "–†—É–Ω–∏—á–µ—Å–∫–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞"');
            const cost = 55;
            const currentBalance = getCurrentBalance();
            
            if (currentBalance < cost) {
                showInsufficientBalance(cost, currentBalance);
                return;
            }
            
            const questions = [
                {
                    question: '–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —Ä—É–Ω–∞ –§–µ—Ö—É?',
                    options: ['–ë–æ–≥–∞—Ç—Å—Ç–≤–æ', '–°–∏–ª–∞', '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ', '–ë–æ–≥'],
                    correct: 0
                },
                {
                    question: '–ö–∞–∫–∞—è —Ä—É–Ω–∞ —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É–µ—Ç —Å–∏–ª—É?',
                    options: ['–§–µ—Ö—É', '–£—Ä—É–∑', '–¢—É—Ä–∏—Å–∞–∑', '–ê–Ω—Å—É–∑'],
                    correct: 1
                },
                {
                    question: '–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —Ä—É–Ω–∞ –†–∞–π–¥–æ?',
                    options: ['–ë–æ–≥–∞—Ç—Å—Ç–≤–æ', '–°–∏–ª–∞', '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ', '–ë–æ–≥'],
                    correct: 2
                },
                {
                    question: '–ö–∞–∫–∞—è —Ä—É–Ω–∞ —Å–≤—è–∑–∞–Ω–∞ —Å –±–æ–≥–æ–º?',
                    options: ['–§–µ—Ö—É', '–£—Ä—É–∑', '–¢—É—Ä–∏—Å–∞–∑', '–ê–Ω—Å—É–∑'],
                    correct: 3
                },
                {
                    question: '–ß—Ç–æ —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É–µ—Ç —Ä—É–Ω–∞ –ö–µ–Ω–∞–∑?',
                    options: ['–ë–æ–≥–∞—Ç—Å—Ç–≤–æ', '–§–∞–∫–µ–ª', '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ', '–ë–æ–≥'],
                    correct: 1
                }
            ];
            
            const gameModal = document.createElement('div');
            gameModal.className = 'game-modal';
            gameModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;
            
            const gameContent = document.createElement('div');
            gameContent.style.cssText = `
                background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
                color: white;
                padding: 40px;
                border-radius: 25px;
                text-align: center;
                max-width: 500px;
                width: 90%;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
                animation: slideInUp 0.5s ease-out;
            `;
            
            gameContent.innerHTML = `
                <div style="font-size: 60px; margin-bottom: 20px; animation: float 2s ease-in-out infinite;">üìö</div>
                <h2 style="margin: 0 0 20px 0; font-size: 28px;">–†—É–Ω–∏—á–µ—Å–∫–∞—è –≤–∏–∫—Ç–æ—Ä–∏–Ω–∞</h2>
                <p style="margin: 0 0 30px 0; font-size: 16px; opacity: 0.9;">–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ —Ä—É–Ω–∞—Ö!</p>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; margin-bottom: 5px;">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} –º–æ–Ω–µ—Ç</div>
                    <div style="font-size: 14px;">üí≥ –í–∞—à –±–∞–ª–∞–Ω—Å: ${currentBalance} –º–æ–Ω–µ—Ç</div>
                </div>
                
                <button class="start-runic-quiz" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 15px 40px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 18px;
                    font-weight: 600;
                    transition: all 0.3s ease;
                    margin-bottom: 20px;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    üìö –ù–∞—á–∞—Ç—å –≤–∏–∫—Ç–æ—Ä–∏–Ω—É!
                </button>
                
                <button onclick="this.closest('.game-modal').remove()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 12px 30px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 16px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    –û—Ç–º–µ–Ω–∞
                </button>
            `;
            
            gameModal.appendChild(gameContent);
            document.body.appendChild(gameModal);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏
            gameContent.querySelector('.start-runic-quiz').addEventListener('click', function() {
                deductCoins(cost);
                
                let currentQuestion = 0;
                let correctAnswers = 0;
                
                function showQuestion() {
                    const question = questions[currentQuestion];
                    
                    gameContent.innerHTML = `
                        <div style="font-size: 40px; margin-bottom: 20px;">üìö</div>
                        <h2 style="margin: 0 0 20px 0; font-size: 24px;">–í–æ–ø—Ä–æ—Å ${currentQuestion + 1} –∏–∑ ${questions.length}</h2>
                        <p style="margin: 0 0 30px 0; font-size: 18px; font-weight: 600;">${question.question}</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">
                            ${question.options.map((option, index) => `
                                <button class="quiz-option" data-answer="${index}" style="
                                    background: rgba(255,255,255,0.2);
                                    border: 2px solid rgba(255,255,255,0.3);
                                    color: white;
                                    padding: 15px;
                                    border-radius: 15px;
                                    cursor: pointer;
                                    font-size: 16px;
                                    transition: all 0.3s ease;
                                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                                    ${option}
                                </button>
                            `).join('')}
                        </div>
                    `;
                    
                    gameContent.querySelectorAll('.quiz-option').forEach(button => {
                        button.addEventListener('click', function() {
                            const selectedAnswer = parseInt(this.dataset.answer);
                            const isCorrect = selectedAnswer === question.correct;
                            
                            if (isCorrect) {
                                correctAnswers++;
                            }
                            
                            currentQuestion++;
                            
                            if (currentQuestion < questions.length) {
                                setTimeout(() => {
                                    showQuestion();
                                }, 1000);
                            } else {
                                showResults();
                            }
                        });
                    });
                }
                
                function showResults() {
                    const percentage = Math.round((correctAnswers / questions.length) * 100);
                    let reward = 0;
                    
                    if (percentage >= 80) reward = 500;
                    else if (percentage >= 60) reward = 300;
                    else if (percentage >= 40) reward = 150;
                    else reward = 50;
                    
                    gameContent.innerHTML = `
                        <div style="font-size: 60px; margin-bottom: 20px;">${percentage >= 80 ? 'üèÜ' : percentage >= 60 ? 'ü•à' : percentage >= 40 ? 'ü•â' : 'üìö'}</div>
                        <h2 style="margin: 0 0 20px 0; font-size: 24px;">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã</h2>
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                            <div style="font-size: 18px; margin-bottom: 10px;">–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: ${correctAnswers} –∏–∑ ${questions.length}</div>
                            <div style="font-size: 18px; margin-bottom: 10px;">–ü—Ä–æ—Ü–µ–Ω—Ç: ${percentage}%</div>
                            <div style="font-size: 18px;">–í—ã–∏–≥—Ä—ã—à: ${reward} –º–æ–Ω–µ—Ç</div>
                        </div>
                        <p style="margin: 0 0 20px 0; font-size: 16px;">
                            ${percentage >= 80 ? '–û—Ç–ª–∏—á–Ω—ã–µ –∑–Ω–∞–Ω–∏—è —Ä—É–Ω!' :
                              percentage >= 60 ? '–•–æ—Ä–æ—à–∏–µ –∑–Ω–∞–Ω–∏—è!' :
                              percentage >= 40 ? '–ù–µ–ø–ª–æ—Ö–æ!' : '–ò–∑—É—á–∞–π—Ç–µ —Ä—É–Ω—ã –¥–∞–ª—å—à–µ!'}
                        </p>
                        <button onclick="this.closest('.game-modal').remove()" style="
                            background: rgba(255,255,255,0.2);
                            border: 2px solid white;
                            color: white;
                            padding: 12px 30px;
                            border-radius: 25px;
                            cursor: pointer;
                            font-size: 16px;
                        ">
                            –ó–∞–∫—Ä—ã—Ç—å
                        </button>
                    `;
                    
                    addCoins(reward);
                }
                
                showQuestion();
            });
        }
        
        // –ò–≥—Ä–∞: –¢–∞—Ä–æ-–∫–≤–∏–∑ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
        function startTarotQuizGame() {
            console.log('üé¥ –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã "–¢–∞—Ä–æ-–∫–≤–∏–∑"');
            const cost = 60;
            const currentBalance = getCurrentBalance();
            
            if (currentBalance < cost) {
                showInsufficientBalance(cost, currentBalance);
                return;
            }
            
            const questions = [
                {
                    question: '–°–∫–æ–ª—å–∫–æ –∫–∞—Ä—Ç –≤ –∫–æ–ª–æ–¥–µ –¢–∞—Ä–æ?',
                    options: ['72', '78', '84', '90'],
                    correct: 1
                },
                {
                    question: '–°–∫–æ–ª—å–∫–æ –∫–∞—Ä—Ç –≤ –°—Ç–∞—Ä—à–∏—Ö –ê—Ä–∫–∞–Ω–∞—Ö?',
                    options: ['20', '21', '22', '23'],
                    correct: 2
                },
                {
                    question: '–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∫–∞—Ä—Ç–∞ "–î—É—Ä–∞–∫"?',
                    options: ['–ì–ª—É–ø–æ—Å—Ç—å', '–ù–∞—á–∞–ª–æ –ø—É—Ç–∏', '–ö–æ–Ω–µ—Ü', '–ú—É–¥—Ä–æ—Å—Ç—å'],
                    correct: 1
                },
                {
                    question: '–ö–∞–∫–∞—è –∫–∞—Ä—Ç–∞ –æ–∑–Ω–∞—á–∞–µ—Ç –ª—é–±–æ–≤—å?',
                    options: ['–ò–º–ø–µ—Ä–∞—Ç—Ä–∏—Ü–∞', '–í–ª—é–±–ª–µ–Ω–Ω—ã–µ', '–°–æ–ª–Ω—Ü–µ', '–õ—É–Ω–∞'],
                    correct: 1
                },
                {
                    question: '–ß—Ç–æ —Å–∏–º–≤–æ–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞—Ä—Ç–∞ "–°–º–µ—Ä—Ç—å"?',
                    options: ['–ö–æ–Ω–µ—Ü –∂–∏–∑–Ω–∏', '–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è', '–ë–æ–ª–µ–∑–Ω—å', '–ü–æ—Ç–µ—Ä—è'],
                    correct: 1
                }
            ];
            
            const gameModal = document.createElement('div');
            gameModal.className = 'game-modal';
            gameModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.9);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                animation: fadeIn 0.3s ease-out;
            `;
            
            const gameContent = document.createElement('div');
            gameContent.style.cssText = `
                background: linear-gradient(135deg, #8e44ad 0%, #9b59b6 100%);
                color: white;
                padding: 40px;
                border-radius: 25px;
                text-align: center;
                max-width: 500px;
                width: 90%;
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
                animation: slideInUp 0.5s ease-out;
            `;
            
            gameContent.innerHTML = `
                <div style="font-size: 60px; margin-bottom: 20px; animation: float 2s ease-in-out infinite;">üé¥</div>
                <h2 style="margin: 0 0 20px 0; font-size: 28px;">–¢–∞—Ä–æ-–∫–≤–∏–∑</h2>
                <p style="margin: 0 0 30px 0; font-size: 16px; opacity: 0.9;">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–Ω–∞–Ω–∏—è –∫–∞—Ä—Ç –¢–∞—Ä–æ!</p>
                
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 15px; margin-bottom: 20px;">
                    <div style="font-size: 14px; margin-bottom: 5px;">üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å: ${cost} –º–æ–Ω–µ—Ç</div>
                    <div style="font-size: 14px;">üí≥ –í–∞—à –±–∞–ª–∞–Ω—Å: ${currentBalance} –º–æ–Ω–µ—Ç</div>
                </div>
                
                <button class="start-tarot-quiz" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 15px 40px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 18px;
                    font-weight: 600;
                    transition: all 0.3s ease;
                    margin-bottom: 20px;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    üé¥ –ù–∞—á–∞—Ç—å –∫–≤–∏–∑!
                </button>
                
                <button onclick="this.closest('.game-modal').remove()" style="
                    background: rgba(255,255,255,0.2);
                    border: 2px solid white;
                    color: white;
                    padding: 12px 30px;
                    border-radius: 25px;
                    cursor: pointer;
                    font-size: 16px;
                    transition: all 0.3s ease;
                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    –û—Ç–º–µ–Ω–∞
                </button>
            `;
            
            gameModal.appendChild(gameContent);
            document.body.appendChild(gameModal);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏
            gameContent.querySelector('.start-tarot-quiz').addEventListener('click', function() {
                deductCoins(cost);
                
                let currentQuestion = 0;
                let correctAnswers = 0;
                
                function showQuestion() {
                    const question = questions[currentQuestion];
                    
                    gameContent.innerHTML = `
                        <div style="font-size: 40px; margin-bottom: 20px;">üé¥</div>
                        <h2 style="margin: 0 0 20px 0; font-size: 24px;">–í–æ–ø—Ä–æ—Å ${currentQuestion + 1} –∏–∑ ${questions.length}</h2>
                        <p style="margin: 0 0 30px 0; font-size: 18px; font-weight: 600;">${question.question}</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 20px;">
                            ${question.options.map((option, index) => `
                                <button class="quiz-option" data-answer="${index}" style="
                                    background: rgba(255,255,255,0.2);
                                    border: 2px solid rgba(255,255,255,0.3);
                                    color: white;
                                    padding: 15px;
                                    border-radius: 15px;
                                    cursor: pointer;
                                    font-size: 16px;
                                    transition: all 0.3s ease;
                                " onmouseover="this.style.background='rgba(255,255,255,0.3)'" 
                                   onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                                    ${option}
                                </button>
                            `).join('')}
                        </div>
                    `;
                    
                    gameContent.querySelectorAll('.quiz-option').forEach(button => {
                        button.addEventListener('click', function() {
                            const selectedAnswer = parseInt(this.dataset.answer);
                            const isCorrect = selectedAnswer === question.correct;
                            
                            if (isCorrect) {
                                correctAnswers++;
                            }
                            
                            currentQuestion++;
                            
                            if (currentQuestion < questions.length) {
                                setTimeout(() => {
                                    showQuestion();
                                }, 1000);
                            } else {
                                showResults();
                            }
                        });
                    });
                }
                
                function showResults() {
                    const percentage = Math.round((correctAnswers / questions.length) * 100);
                    let reward = 0;
                    
                    if (percentage >= 80) reward = 600;
                    else if (percentage >= 60) reward = 400;
                    else if (percentage >= 40) reward = 200;
                    else if (percentage >= 20) reward = 50;
                    else reward = 0; // 0 –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ = 0 –º–æ–Ω–µ—Ç
                    
                    gameContent.innerHTML = `
                        <div style="font-size: 60px; margin-bottom: 20px;">${percentage >= 80 ? 'üèÜ' : percentage >= 60 ? 'ü•à' : percentage >= 40 ? 'ü•â' : percentage >= 20 ? 'üé¥' : '‚ùå'}</div>
                        <h2 style="margin: 0 0 20px 0; font-size: 24px;">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–≤–∏–∑–∞</h2>
                        <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 15px; margin-bottom: 20px;">
                            <div style="font-size: 18px; margin-bottom: 10px;">–ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: ${correctAnswers} –∏–∑ ${questions.length}</div>
                            <div style="font-size: 18px; margin-bottom: 10px;">–ü—Ä–æ—Ü–µ–Ω—Ç: ${percentage}%</div>
                            <div style="font-size: 18px;">–í—ã–∏–≥—Ä—ã—à: ${reward} –º–æ–Ω–µ—Ç</div>
                        </div>
                        <p style="margin: 0 0 20px 0; font-size: 16px;">
                            ${percentage >= 80 ? '–û—Ç–ª–∏—á–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –¢–∞—Ä–æ!' :
                              percentage >= 60 ? '–•–æ—Ä–æ—à–∏–µ –∑–Ω–∞–Ω–∏—è!' :
                              percentage >= 40 ? '–ù–µ–ø–ª–æ—Ö–æ!' : 
                              percentage >= 20 ? '–ò–∑—É—á–∞–π—Ç–µ –¢–∞—Ä–æ –¥–∞–ª—å—à–µ!' : '–ù—É–∂–Ω–æ –±–æ–ª—å—à–µ –∏–∑—É—á–∞—Ç—å –¢–∞—Ä–æ!'}
                        </p>
                        <button onclick="this.closest('.game-modal').remove()" style="
                            background: rgba(255,255,255,0.2);
                            border: 2px solid white;
                            color: white;
                            padding: 12px 30px;
                            border-radius: 25px;
                            cursor: pointer;
                            font-size: 16px;
                        ">
                            –ó–∞–∫—Ä—ã—Ç—å
                        </button>
                    `;
                    
                    addCoins(reward);
                }
                
                showQuestion();
            });
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã
            handleReferral();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            initUserProfile();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Telegram WebApp
            if (window.Telegram && window.Telegram.WebApp) {
                window.Telegram.WebApp.ready();
                window.Telegram.WebApp.expand();
                window.Telegram.WebApp.disableVerticalSwipes();
                window.Telegram.WebApp.enableClosingConfirmation();
            }
        });
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function initUserProfile() {
            const userData = JSON.parse(localStorage.getItem('userData') || '{}');
            
            // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            if (!userData.name) {
                const defaultData = {
                    name: '–ú–∞—Å—Ç–µ—Ä –¢–∞—Ä–æ',
                    gender: 'all',
                    birthDate: '',
                    zodiac: '–û–≤–µ–Ω',
                    zodiacSign: '‚ôà',
                    age: '25 –ª–µ—Ç'
                };
                localStorage.setItem('userData', JSON.stringify(defaultData));
                updateProfileDisplay(defaultData);
            } else {
                updateProfileDisplay(userData);
            }
        }
    </script>
    
    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è —É–∂–µ –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ HTML -->
</body>
</html>
